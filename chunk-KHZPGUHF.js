import{d as yi}from"./chunk-EHBTLVHR.js";import{a as gi,b as xi,c as mi,d as pi,e as Ci,f as wi,g as Ai,k as Ei,m as Ii}from"./chunk-PITBRRP6.js";import{i as Yn,j as fi,k as Zn,l as di,m as Qn}from"./chunk-BQAP42OQ.js";import{$a as Xn,Ba as ai,Ga as ct,Ia as ae,La as G,Ma as J,Na as dt,Oa as qe,Pa as Ke,Qa as bt,Va as Be,Wa as Ne,Xa as Jt,Z as zn,Za as ci,_a as we,ab as Gt,bb as Tn,c as Ho,ca as tt,cb as li,d as zo,da as nt,db as ui,e as cn,gb as Wn,hb as lt,ib as hi,jb as Rt,kb as vt,ra as jn,ta as Gn,ya as Z,za as ln}from"./chunk-F7FOZMUX.js";var Oi=Ho(($n,Mi)=>{"use strict";(function(u,h){typeof $n=="object"&&typeof Mi<"u"?h($n):typeof define=="function"&&define.amd?define(["exports"],h):(u=typeof globalThis<"u"?globalThis:u||self,h(u.ZXing={}))})($n,function(u){"use strict";function h(l){return l==null}var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,e){l.__proto__=e}||function(l,e){for(var t in e)e.hasOwnProperty(t)&&(l[t]=e[t])};function x(l,e){d(l,e);function t(){this.constructor=l}l.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function p(l,e){var t=Object.setPrototypeOf;t?t(l,e):l.__proto__=e}function g(l,e){e===void 0&&(e=l.constructor);var t=Error.captureStackTrace;t&&t(l,e)}var y=function(l){x(e,l);function e(t){var n=this.constructor,r=l.call(this,t)||this;return Object.defineProperty(r,"name",{value:n.name,enumerable:!1}),p(r,n.prototype),g(r),r}return e}(Error);let T=(()=>{class l extends y{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}return l.kind="Exception",l})(),N=(()=>{class l extends T{}return l.kind="ArgumentException",l})(),C=(()=>{class l extends T{}return l.kind="IllegalArgumentException",l})();class D{constructor(e){if(this.binarizer=e,e===null)throw new C("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,n,r){let i=this.binarizer.getLuminanceSource().crop(e,t,n,r);return new D(this.binarizer.createBinarizer(i))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){let e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new D(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){let e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new D(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}let P=(()=>{class l extends T{static getChecksumInstance(){return new l}}return l.kind="ChecksumException",l})();class xe{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class Q{static arraycopy(e,t,n,r,i){for(;i--;)n[r++]=e[t++]}static currentTimeMillis(){return Date.now()}}let Fe=(()=>{class l extends T{}return l.kind="IndexOutOfBoundsException",l})(),Oe=(()=>{class l extends Fe{constructor(t=void 0,n=void 0){super(n),this.index=t,this.message=n}}return l.kind="ArrayIndexOutOfBoundsException",l})();class ne{static fill(e,t){for(let n=0,r=e.length;n<r;n++)e[n]=t}static fillWithin(e,t,n,r){ne.rangeCheck(e.length,t,n);for(let i=t;i<n;i++)e[i]=r}static rangeCheck(e,t,n){if(t>n)throw new C("fromIndex("+t+") > toIndex("+n+")");if(t<0)throw new Oe(t);if(n>e)throw new Oe(n)}static asList(...e){return e}static create(e,t,n){return Array.from({length:e}).map(i=>Array.from({length:t}).fill(n))}static createInt32Array(e,t,n){return Array.from({length:e}).map(i=>Int32Array.from({length:t}).fill(n))}static equals(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}static hashCode(e){if(e===null)return 0;let t=1;for(let n of e)t=31*t+n;return t}static fillUint8Array(e,t){for(let n=0;n!==e.length;n++)e[n]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){let n=new Uint8Array(t);return n.set(e),n}return e.slice(0,t)}static copyOfRange(e,t,n){let r=n-t,i=new Int32Array(r);return Q.arraycopy(e,t,i,0,r),i}static binarySearch(e,t,n){n===void 0&&(n=ne.numberComparator);let r=0,i=e.length-1;for(;r<=i;){let o=i+r>>1,s=n(t,e[o]);if(s>0)r=o+1;else if(s<0)i=o-1;else return o}return-r-1}static numberComparator(e,t){return e-t}}class W{static numberOfTrailingZeros(e){let t;if(e===0)return 32;let n=31;return t=e<<16,t!==0&&(n-=16,e=t),t=e<<8,t!==0&&(n-=8,e=t),t=e<<4,t!==0&&(n-=4,e=t),t=e<<2,t!==0&&(n-=2,e=t),n-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e,t=void 0){return parseInt(e,t)}}W.MIN_VALUE_32_BITS=-2147483648,W.MAX_VALUE=Number.MAX_SAFE_INTEGER;class le{constructor(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=le.makeArray(e):this.bits=t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){let t=le.makeArray(e);Q.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){let t=this.size;if(e>=t)return t;let n=this.bits,r=Math.floor(e/32),i=n[r];i&=~((1<<(e&31))-1);let o=n.length;for(;i===0;){if(++r===o)return t;i=n[r]}let s=r*32+W.numberOfTrailingZeros(i);return s>t?t:s}getNextUnset(e){let t=this.size;if(e>=t)return t;let n=this.bits,r=Math.floor(e/32),i=~n[r];i&=~((1<<(e&31))-1);let o=n.length;for(;i===0;){if(++r===o)return t;i=~n[r]}let s=r*32+W.numberOfTrailingZeros(i);return s>t?t:s}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new C;if(t===e)return;t--;let n=Math.floor(e/32),r=Math.floor(t/32),i=this.bits;for(let o=n;o<=r;o++){let s=o>n?0:e&31,c=(2<<(o<r?31:t&31))-(1<<s);i[o]|=c}}clear(){let e=this.bits.length,t=this.bits;for(let n=0;n<e;n++)t[n]=0}isRange(e,t,n){if(t<e||e<0||t>this.size)throw new C;if(t===e)return!0;t--;let r=Math.floor(e/32),i=Math.floor(t/32),o=this.bits;for(let s=r;s<=i;s++){let a=s>r?0:e&31,f=(2<<(s<i?31:t&31))-(1<<a)&4294967295;if((o[s]&f)!==(n?f:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,t){if(t<0||t>32)throw new C("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let n=t;n>0;n--)this.appendBit((e>>n-1&1)===1)}appendBitArray(e){let t=e.size;this.ensureCapacity(this.size+t);for(let n=0;n<t;n++)this.appendBit(e.get(n))}xor(e){if(this.size!==e.size)throw new C("Sizes don't match");let t=this.bits;for(let n=0,r=t.length;n<r;n++)t[n]^=e.bits[n]}toBytes(e,t,n,r){for(let i=0;i<r;i++){let o=0;for(let s=0;s<8;s++)this.get(e)&&(o|=1<<7-s),e++;t[n+i]=o}}getBitArray(){return this.bits}reverse(){let e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),n=t+1,r=this.bits;for(let i=0;i<n;i++){let o=r[i];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[t-i]=o}if(this.size!==n*32){let i=n*32-this.size,o=e[0]>>>i;for(let s=1;s<n;s++){let a=e[s];o|=a<<32-i,e[s-1]=o,o=a>>>i}e[n-1]=o}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof le))return!1;let t=e;return this.size===t.size&&ne.equals(this.bits,t.bits)}hashCode(){return 31*this.size+ne.hashCode(this.bits)}toString(){let e="";for(let t=0,n=this.size;t<n;t++)t&7||(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new le(this.size,this.bits.slice())}}var Tt=function(l){return l[l.OTHER=0]="OTHER",l[l.PURE_BARCODE=1]="PURE_BARCODE",l[l.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",l[l.TRY_HARDER=3]="TRY_HARDER",l[l.CHARACTER_SET=4]="CHARACTER_SET",l[l.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",l[l.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",l[l.ASSUME_GS1=7]="ASSUME_GS1",l[l.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",l[l.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",l[l.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS",l}(Tt||{}),ue=Tt;let k=(()=>{class l extends T{static getFormatInstance(){return new l}}return l.kind="FormatException",l})();var ge=function(l){return l[l.Cp437=0]="Cp437",l[l.ISO8859_1=1]="ISO8859_1",l[l.ISO8859_2=2]="ISO8859_2",l[l.ISO8859_3=3]="ISO8859_3",l[l.ISO8859_4=4]="ISO8859_4",l[l.ISO8859_5=5]="ISO8859_5",l[l.ISO8859_6=6]="ISO8859_6",l[l.ISO8859_7=7]="ISO8859_7",l[l.ISO8859_8=8]="ISO8859_8",l[l.ISO8859_9=9]="ISO8859_9",l[l.ISO8859_10=10]="ISO8859_10",l[l.ISO8859_11=11]="ISO8859_11",l[l.ISO8859_13=12]="ISO8859_13",l[l.ISO8859_14=13]="ISO8859_14",l[l.ISO8859_15=14]="ISO8859_15",l[l.ISO8859_16=15]="ISO8859_16",l[l.SJIS=16]="SJIS",l[l.Cp1250=17]="Cp1250",l[l.Cp1251=18]="Cp1251",l[l.Cp1252=19]="Cp1252",l[l.Cp1256=20]="Cp1256",l[l.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",l[l.UTF8=22]="UTF8",l[l.ASCII=23]="ASCII",l[l.Big5=24]="Big5",l[l.GB18030=25]="GB18030",l[l.EUC_KR=26]="EUC_KR",l}(ge||{});class F{constructor(e,t,n,...r){this.valueIdentifier=e,this.name=n,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=r,F.VALUE_IDENTIFIER_TO_ECI.set(e,this),F.NAME_TO_ECI.set(n,this);let i=this.values;for(let o=0,s=i.length;o!==s;o++){let a=i[o];F.VALUES_TO_ECI.set(a,this)}for(let o of r)F.NAME_TO_ECI.set(o,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new k("incorect value");let t=F.VALUES_TO_ECI.get(e);if(t===void 0)throw new k("incorect value");return t}static getCharacterSetECIByName(e){let t=F.NAME_TO_ECI.get(e);if(t===void 0)throw new k("incorect value");return t}equals(e){if(!(e instanceof F))return!1;let t=e;return this.getName()===t.getName()}}F.VALUE_IDENTIFIER_TO_ECI=new Map,F.VALUES_TO_ECI=new Map,F.NAME_TO_ECI=new Map,F.Cp437=new F(ge.Cp437,Int32Array.from([0,2]),"Cp437"),F.ISO8859_1=new F(ge.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),F.ISO8859_2=new F(ge.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),F.ISO8859_3=new F(ge.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),F.ISO8859_4=new F(ge.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),F.ISO8859_5=new F(ge.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),F.ISO8859_6=new F(ge.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),F.ISO8859_7=new F(ge.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),F.ISO8859_8=new F(ge.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),F.ISO8859_9=new F(ge.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),F.ISO8859_10=new F(ge.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),F.ISO8859_11=new F(ge.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),F.ISO8859_13=new F(ge.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),F.ISO8859_14=new F(ge.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),F.ISO8859_15=new F(ge.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),F.ISO8859_16=new F(ge.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),F.SJIS=new F(ge.SJIS,20,"SJIS","Shift_JIS"),F.Cp1250=new F(ge.Cp1250,21,"Cp1250","windows-1250"),F.Cp1251=new F(ge.Cp1251,22,"Cp1251","windows-1251"),F.Cp1252=new F(ge.Cp1252,23,"Cp1252","windows-1252"),F.Cp1256=new F(ge.Cp1256,24,"Cp1256","windows-1256"),F.UnicodeBigUnmarked=new F(ge.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),F.UTF8=new F(ge.UTF8,26,"UTF8","UTF-8"),F.ASCII=new F(ge.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),F.Big5=new F(ge.Big5,28,"Big5"),F.GB18030=new F(ge.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),F.EUC_KR=new F(ge.EUC_KR,30,"EUC_KR","EUC-KR");let fn=(()=>{class l extends T{}return l.kind="UnsupportedOperationException",l})();class rt{static decode(e,t){let n=this.encodingName(t);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)}static shouldDecodeOnFallback(e){return!rt.isBrowser()&&e==="ISO-8859-1"}static encode(e,t){let n=this.encodingName(t);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof F?e:F.getCharacterSetECIByName(e)}static decodeFallback(e,t){let n=this.encodingCharacterSet(t);if(rt.isDecodeFallbackSupported(n)){let r="";for(let i=0,o=e.length;i<o;i++){let s=e[i].toString(16);s.length<2&&(s="0"+s),r+="%"+s}return decodeURIComponent(r)}if(n.equals(F.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new fn(`Encoding ${this.encodingName(t)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(F.UTF8)||e.equals(F.ISO8859_1)||e.equals(F.ASCII)}static encodeFallback(e){let n=btoa(unescape(encodeURIComponent(e))).split(""),r=[];for(let i=0;i<n.length;i++)r.push(n[i].charCodeAt(0));return new Uint8Array(r)}}class ee{static castAsNonUtf8Char(e,t=null){let n=t?t.getName():this.ISO88591;return rt.decode(new Uint8Array([e]),n)}static guessEncoding(e,t){if(t!=null&&t.get(ue.CHARACTER_SET)!==void 0)return t.get(ue.CHARACTER_SET).toString();let n=e.length,r=!0,i=!0,o=!0,s=0,a=0,c=0,f=0,m=0,w=0,E=0,I=0,S=0,b=0,M=0,B=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let V=0;V<n&&(r||i||o);V++){let R=e[V]&255;o&&(s>0?R&128?s--:o=!1:R&128&&(R&64?(s++,R&32?(s++,R&16?(s++,R&8?o=!1:f++):c++):a++):o=!1)),r&&(R>127&&R<160?r=!1:R>159&&(R<192||R===215||R===247)&&M++),i&&(m>0?R<64||R===127||R>252?i=!1:m--:R===128||R===160||R>239?i=!1:R>160&&R<224?(w++,I=0,E++,E>S&&(S=E)):R>127?(m++,E=0,I++,I>b&&(b=I)):(E=0,I=0))}return o&&s>0&&(o=!1),i&&m>0&&(i=!1),o&&(B||a+c+f>0)?ee.UTF8:i&&(ee.ASSUME_SHIFT_JIS||S>=3||b>=3)?ee.SHIFT_JIS:r&&i?S===2&&w===2||M*10>=n?ee.SHIFT_JIS:ee.ISO88591:r?ee.ISO88591:i?ee.SHIFT_JIS:o?ee.UTF8:ee.PLATFORM_DEFAULT_ENCODING}static format(e,...t){let n=-1;function r(o,s,a,c,f,m){if(o==="%%")return"%";if(t[++n]===void 0)return;o=c?parseInt(c.substr(1)):void 0;let w=f?parseInt(f.substr(1)):void 0,E;switch(m){case"s":E=t[n];break;case"c":E=t[n][0];break;case"f":E=parseFloat(t[n]).toFixed(o);break;case"p":E=parseFloat(t[n]).toPrecision(o);break;case"e":E=parseFloat(t[n]).toExponential(o);break;case"x":E=parseInt(t[n]).toString(w||16);break;case"d":E=parseFloat(parseInt(t[n],w||10).toPrecision(o)).toFixed(0);break}E=typeof E=="object"?JSON.stringify(E):(+E).toString(w);let I=parseInt(a),S=a&&a[0]+""=="0"?"0":" ";for(;E.length<I;)E=s!==void 0?E+S:S+E;return E}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,r)}static getBytes(e,t){return rt.encode(e,t)}static getCharCode(e,t=0){return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}ee.SHIFT_JIS=F.SJIS.getName(),ee.GB2312="GB2312",ee.ISO88591=F.ISO8859_1.getName(),ee.EUC_JP="EUC_JP",ee.UTF8=F.UTF8.getName(),ee.PLATFORM_DEFAULT_ENCODING=ee.UTF8,ee.ASSUME_SHIFT_JIS=!1;class Ie{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=ee.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,n){for(let r=t;t<t+n;r++)this.append(e[r]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class Ue{constructor(e,t,n,r){if(this.width=e,this.height=t,this.rowSize=n,this.bits=r,t==null&&(t=e),this.height=t,e<1||t<1)throw new C("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,r==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){let t=e.length,n=e[0].length,r=new Ue(n,t);for(let i=0;i<t;i++){let o=e[i];for(let s=0;s<n;s++)o[s]&&r.set(s,i)}return r}static parseFromString(e,t,n){if(e===null)throw new C("stringRepresentation cannot be null");let r=new Array(e.length),i=0,o=0,s=-1,a=0,c=0;for(;c<e.length;)if(e.charAt(c)===`
`||e.charAt(c)==="\r"){if(i>o){if(s===-1)s=i-o;else if(i-o!==s)throw new C("row lengths do not match");o=i,a++}c++}else if(e.substring(c,c+t.length)===t)c+=t.length,r[i]=!0,i++;else if(e.substring(c,c+n.length)===n)c+=n.length,r[i]=!1,i++;else throw new C("illegal character encountered: "+e.substring(c));if(i>o){if(s===-1)s=i-o;else if(i-o!==s)throw new C("row lengths do not match");a++}let f=new Ue(s,a);for(let m=0;m<i;m++)r[m]&&f.set(Math.floor(m%s),Math.floor(m/s));return f}get(e,t){let n=t*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0}set(e,t){let n=t*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295}unset(e,t){let n=t*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)}flip(e,t){let n=t*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new C("input matrix dimensions do not match");let t=new le(Math.floor(this.width/32)+1),n=this.rowSize,r=this.bits;for(let i=0,o=this.height;i<o;i++){let s=i*n,a=e.getRow(i,t).getBitArray();for(let c=0;c<n;c++)r[s+c]^=a[c]}}clear(){let e=this.bits,t=e.length;for(let n=0;n<t;n++)e[n]=0}setRegion(e,t,n,r){if(t<0||e<0)throw new C("Left and top must be nonnegative");if(r<1||n<1)throw new C("Height and width must be at least 1");let i=e+n,o=t+r;if(o>this.height||i>this.width)throw new C("The region must fit inside the matrix");let s=this.rowSize,a=this.bits;for(let c=t;c<o;c++){let f=c*s;for(let m=e;m<i;m++)a[f+Math.floor(m/32)]|=1<<(m&31)&4294967295}}getRow(e,t){t==null||t.getSize()<this.width?t=new le(this.width):t.clear();let n=this.rowSize,r=this.bits,i=e*n;for(let o=0;o<n;o++)t.setBulk(o*32,r[i+o]);return t}setRow(e,t){Q.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){let e=this.getWidth(),t=this.getHeight(),n=new le(e),r=new le(e);for(let i=0,o=Math.floor((t+1)/2);i<o;i++)n=this.getRow(i,n),r=this.getRow(t-1-i,r),n.reverse(),r.reverse(),this.setRow(i,r),this.setRow(t-1-i,n)}getEnclosingRectangle(){let e=this.width,t=this.height,n=this.rowSize,r=this.bits,i=e,o=t,s=-1,a=-1;for(let c=0;c<t;c++)for(let f=0;f<n;f++){let m=r[c*n+f];if(m!==0){if(c<o&&(o=c),c>a&&(a=c),f*32<i){let w=0;for(;!(m<<31-w&4294967295);)w++;f*32+w<i&&(i=f*32+w)}if(f*32+31>s){let w=31;for(;!(m>>>w);)w--;f*32+w>s&&(s=f*32+w)}}}return s<i||a<o?null:Int32Array.from([i,o,s-i+1,a-o+1])}getTopLeftOnBit(){let e=this.rowSize,t=this.bits,n=0;for(;n<t.length&&t[n]===0;)n++;if(n===t.length)return null;let r=n/e,i=n%e*32,o=t[n],s=0;for(;!(o<<31-s&4294967295);)s++;return i+=s,Int32Array.from([i,r])}getBottomRightOnBit(){let e=this.rowSize,t=this.bits,n=t.length-1;for(;n>=0&&t[n]===0;)n--;if(n<0)return null;let r=Math.floor(n/e),i=Math.floor(n%e)*32,o=t[n],s=31;for(;!(o>>>s);)s--;return i+=s,Int32Array.from([i,r])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof Ue))return!1;let t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&ne.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+ne.hashCode(this.bits),e}toString(e="X ",t="  ",n=`
`){return this.buildToString(e,t,n)}buildToString(e,t,n){let r=new Ie;for(let i=0,o=this.height;i<o;i++){for(let s=0,a=this.width;s<a;s++)r.append(this.get(s,i)?e:t);r.append(n)}return r.toString()}clone(){return new Ue(this.width,this.height,this.rowSize,this.bits.slice())}}let v=(()=>{class l extends T{static getNotFoundInstance(){return new l}}return l.kind="NotFoundException",l})();class Ve extends xe{constructor(e){super(e),this.luminances=Ve.EMPTY,this.buckets=new Int32Array(Ve.LUMINANCE_BUCKETS)}getBlackRow(e,t){let n=this.getLuminanceSource(),r=n.getWidth();t==null||t.getSize()<r?t=new le(r):t.clear(),this.initArrays(r);let i=n.getRow(e,this.luminances),o=this.buckets;for(let a=0;a<r;a++)o[(i[a]&255)>>Ve.LUMINANCE_SHIFT]++;let s=Ve.estimateBlackPoint(o);if(r<3)for(let a=0;a<r;a++)(i[a]&255)<s&&t.set(a);else{let a=i[0]&255,c=i[1]&255;for(let f=1;f<r-1;f++){let m=i[f+1]&255;(c*4-a-m)/2<s&&t.set(f),a=c,c=m}}return t}getBlackMatrix(){let e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight(),r=new Ue(t,n);this.initArrays(t);let i=this.buckets;for(let a=1;a<5;a++){let c=Math.floor(n*a/5),f=e.getRow(c,this.luminances),m=Math.floor(t*4/5);for(let w=Math.floor(t/5);w<m;w++){let E=f[w]&255;i[E>>Ve.LUMINANCE_SHIFT]++}}let o=Ve.estimateBlackPoint(i),s=e.getMatrix();for(let a=0;a<n;a++){let c=a*t;for(let f=0;f<t;f++)(s[c+f]&255)<o&&r.set(f,a)}return r}createBinarizer(e){return new Ve(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));let t=this.buckets;for(let n=0;n<Ve.LUMINANCE_BUCKETS;n++)t[n]=0}static estimateBlackPoint(e){let t=e.length,n=0,r=0,i=0;for(let f=0;f<t;f++)e[f]>i&&(r=f,i=e[f]),e[f]>n&&(n=e[f]);let o=0,s=0;for(let f=0;f<t;f++){let m=f-r,w=e[f]*m*m;w>s&&(o=f,s=w)}if(r>o){let f=r;r=o,o=f}if(o-r<=t/16)throw new v;let a=o-1,c=-1;for(let f=o-1;f>r;f--){let m=f-r,w=m*m*(o-f)*(n-e[f]);w>c&&(a=f,c=w)}return a<<Ve.LUMINANCE_SHIFT}}Ve.LUMINANCE_BITS=5,Ve.LUMINANCE_SHIFT=8-Ve.LUMINANCE_BITS,Ve.LUMINANCE_BUCKETS=1<<Ve.LUMINANCE_BITS,Ve.EMPTY=Uint8ClampedArray.from([0]);class re extends Ve{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;let e=this.getLuminanceSource(),t=e.getWidth(),n=e.getHeight();if(t>=re.MINIMUM_DIMENSION&&n>=re.MINIMUM_DIMENSION){let r=e.getMatrix(),i=t>>re.BLOCK_SIZE_POWER;t&re.BLOCK_SIZE_MASK&&i++;let o=n>>re.BLOCK_SIZE_POWER;n&re.BLOCK_SIZE_MASK&&o++;let s=re.calculateBlackPoints(r,i,o,t,n),a=new Ue(t,n);re.calculateThresholdForBlock(r,i,o,t,n,s,a),this.matrix=a}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new re(e)}static calculateThresholdForBlock(e,t,n,r,i,o,s){let a=i-re.BLOCK_SIZE,c=r-re.BLOCK_SIZE;for(let f=0;f<n;f++){let m=f<<re.BLOCK_SIZE_POWER;m>a&&(m=a);let w=re.cap(f,2,n-3);for(let E=0;E<t;E++){let I=E<<re.BLOCK_SIZE_POWER;I>c&&(I=c);let S=re.cap(E,2,t-3),b=0;for(let B=-2;B<=2;B++){let V=o[w+B];b+=V[S-2]+V[S-1]+V[S]+V[S+1]+V[S+2]}let M=b/25;re.thresholdBlock(e,I,m,M,r,s)}}}static cap(e,t,n){return e<t?t:e>n?n:e}static thresholdBlock(e,t,n,r,i,o){for(let s=0,a=n*i+t;s<re.BLOCK_SIZE;s++,a+=i)for(let c=0;c<re.BLOCK_SIZE;c++)(e[a+c]&255)<=r&&o.set(t+c,n+s)}static calculateBlackPoints(e,t,n,r,i){let o=i-re.BLOCK_SIZE,s=r-re.BLOCK_SIZE,a=new Array(n);for(let c=0;c<n;c++){a[c]=new Int32Array(t);let f=c<<re.BLOCK_SIZE_POWER;f>o&&(f=o);for(let m=0;m<t;m++){let w=m<<re.BLOCK_SIZE_POWER;w>s&&(w=s);let E=0,I=255,S=0;for(let M=0,B=f*r+w;M<re.BLOCK_SIZE;M++,B+=r){for(let V=0;V<re.BLOCK_SIZE;V++){let R=e[B+V]&255;E+=R,R<I&&(I=R),R>S&&(S=R)}if(S-I>re.MIN_DYNAMIC_RANGE)for(M++,B+=r;M<re.BLOCK_SIZE;M++,B+=r)for(let V=0;V<re.BLOCK_SIZE;V++)E+=e[B+V]&255}let b=E>>re.BLOCK_SIZE_POWER*2;if(S-I<=re.MIN_DYNAMIC_RANGE&&(b=I/2,c>0&&m>0)){let M=(a[c-1][m]+2*a[c][m-1]+a[c-1][m-1])/4;I<M&&(b=M)}a[c][m]=b}}return a}}re.BLOCK_SIZE_POWER=3,re.BLOCK_SIZE=1<<re.BLOCK_SIZE_POWER,re.BLOCK_SIZE_MASK=re.BLOCK_SIZE-1,re.MINIMUM_DIMENSION=re.BLOCK_SIZE*5,re.MIN_DYNAMIC_RANGE=24;class dn{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,n,r){throw new fn("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new fn("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new fn("This luminance source does not support rotation by 45 degrees.")}toString(){let e=new Uint8ClampedArray(this.width),t=new Ie;for(let n=0;n<this.height;n++){let r=this.getRow(n,e);for(let i=0;i<this.width;i++){let o=r[i]&255,s;o<64?s="#":o<128?s="+":o<192?s=".":s=" ",t.append(s)}t.append(`
`)}return t.toString()}}class Bt extends dn{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){let n=this.delegate.getRow(e,t),r=this.getWidth();for(let i=0;i<r;i++)n[i]=255-(n[i]&255);return n}getMatrix(){let e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(t);for(let r=0;r<t;r++)n[r]=255-(e[r]&255);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,n,r){return new Bt(this.delegate.crop(e,t,n,r))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Bt(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Bt(this.delegate.rotateCounterClockwise45())}}class Pt extends dn{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=Pt.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){let t=e.getContext("2d").getImageData(0,0,e.width,e.height);return Pt.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,n){let r=new Uint8ClampedArray(t*n);for(let i=0,o=0,s=e.length;i<s;i+=4,o++){let a;if(e[i+3]===0)a=255;else{let f=e[i],m=e[i+1],w=e[i+2];a=306*f+601*m+117*w+512>>10}r[o]=a}return r}getRow(e,t){if(e<0||e>=this.getHeight())throw new C("Requested row is outside the image: "+e);let n=this.getWidth(),r=e*n;return t===null?t=this.buffer.slice(r,r+n):(t.length<n&&(t=new Uint8ClampedArray(n)),t.set(this.buffer.slice(r,r+n))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,n,r){return super.crop(e,t,n,r),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){let e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){let t=this.getTempCanvasElement(),n=t.getContext("2d"),r=e*Pt.DEGREE_TO_RADIANS,i=this.canvas.width,o=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(r))*i+Math.abs(Math.sin(r))*o),a=Math.ceil(Math.abs(Math.sin(r))*i+Math.abs(Math.cos(r))*o);return t.width=s,t.height=a,n.translate(s/2,a/2),n.rotate(r),n.drawImage(this.canvas,i/-2,o/-2),this.buffer=Pt.makeBufferFromCanvasImageData(t),this}invert(){return new Bt(this)}}Pt.DEGREE_TO_RADIANS=Math.PI/180;class Lr{constructor(e,t,n){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Je=(globalThis||global||self||window||void 0)&&(globalThis||global||self||window||void 0).__awaiter||function(l,e,t,n){function r(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function s(f){try{c(n.next(f))}catch(m){o(m)}}function a(f){try{c(n.throw(f))}catch(m){o(m)}}function c(f){f.done?i(f.value):r(f.value).then(s,a)}c((n=n.apply(l,e||[])).next())})};class Yt{constructor(e,t=500,n){this.reader=e,this.timeBetweenScansMillis=t,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return Je(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");let e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(let n of e){let r=n.kind==="video"?"videoinput":n.kind;if(r!=="videoinput")continue;let i=n.deviceId||n.id,o=n.label||`Video device ${t.length+1}`,s=n.groupId,a={deviceId:i,label:o,kind:r,groupId:s};t.push(a)}return t})}getVideoInputDevices(){return Je(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(t=>new Lr(t.deviceId,t.label))})}findDeviceById(e){return Je(this,void 0,void 0,function*(){let t=yield this.listVideoInputDevices();return t?t.find(n=>n.deviceId===e):null})}decodeFromInputVideoDevice(e,t){return Je(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,t)})}decodeOnceFromVideoDevice(e,t){return Je(this,void 0,void 0,function*(){this.reset();let n;e?n={deviceId:{exact:e}}:n={facingMode:"environment"};let r={video:n};return yield this.decodeOnceFromConstraints(r,t)})}decodeOnceFromConstraints(e,t){return Je(this,void 0,void 0,function*(){let n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(n,t)})}decodeOnceFromStream(e,t){return Je(this,void 0,void 0,function*(){this.reset();let n=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(n)})}decodeFromInputVideoDeviceContinuously(e,t,n){return Je(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,t,n)})}decodeFromVideoDevice(e,t,n){return Je(this,void 0,void 0,function*(){let r;e?r={deviceId:{exact:e}}:r={facingMode:"environment"};let i={video:r};return yield this.decodeFromConstraints(i,t,n)})}decodeFromConstraints(e,t,n){return Je(this,void 0,void 0,function*(){let r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(r,t,n)})}decodeFromStream(e,t,n){return Je(this,void 0,void 0,function*(){this.reset();let r=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(r,n)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return Je(this,void 0,void 0,function*(){let n=this.prepareVideoElement(t);return this.addVideoSource(n,e),this.videoElement=n,this.stream=e,yield this.playVideoOnLoadAsync(n),n})}playVideoOnLoadAsync(e){return new Promise((t,n)=>this.playVideoOnLoad(e,()=>t()))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return Je(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,t){let n=document.getElementById(e);if(!n)throw new N(`element with id '${e}' not found`);if(n.nodeName.toLowerCase()!==t.toLowerCase())throw new N(`element with id '${e}' must be an ${t} element`);return n}decodeFromImage(e,t){if(!e&&!t)throw new N("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new N("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,n){if(e===void 0&&t===void 0)throw new N("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,n):this.decodeFromVideoElementContinuously(e,n)}decodeFromImageElement(e){if(!e)throw new N("An image element must be provided.");this.reset();let t=this.prepareImageElement(e);this.imageElement=t;let n;return this.isImageLoaded(t)?n=this.decodeOnce(t,!1,!0):n=this._decodeOnLoadImage(t),n}decodeFromVideoElement(e){let t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){let n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,t)}_decodeFromVideoElementSetup(e){if(!e)throw new N("A video element must be provided.");this.reset();let t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new N("An URL must be provided.");this.reset();let t=this.prepareImageElement();this.imageElement=t;let n=this._decodeOnLoadImage(t);return t.src=e,n}decodeFromVideoUrl(e){if(!e)throw new N("An URL must be provided.");this.reset();let t=this.prepareVideoElement(),n=this.decodeFromVideoElement(t);return t.src=e,n}decodeFromVideoUrlContinuously(e,t){if(!e)throw new N("An URL must be provided.");this.reset();let n=this.prepareVideoElement(),r=this.decodeFromVideoElementContinuously(n,t);return n.src=e,r}_decodeOnLoadImage(e){return new Promise((t,n)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,n),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return Je(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,t){return Je(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e,t=!0,n=!0){this._stopAsyncDecode=!1;let r=(i,o)=>{if(this._stopAsyncDecode){o(new v("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{let s=this.decode(e);i(s)}catch(s){let a=t&&s instanceof v,f=(s instanceof P||s instanceof k)&&n;if(a||f)return setTimeout(r,this._timeBetweenDecodingAttempts,i,o);o(s)}};return new Promise((i,o)=>r(i,o))}decodeContinuously(e,t){this._stopContinuousDecode=!1;let n=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{let r=this.decode(e);t(r,null),setTimeout(n,this.timeBetweenScansMillis)}catch(r){t(null,r);let i=r instanceof P||r instanceof k,o=r instanceof v;(i||o)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(e){let t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,t,n){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t,n=this.captureCanvasContext){t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){let t=this.getCaptureCanvasContext(e);this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);let n=this.getCaptureCanvas(e),r=new Pt(n),i=new re(r);return new D(i)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){let n=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=n}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){let t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;let t=document.createElement("canvas"),n,r;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,r=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,r=e.naturalHeight||e.height)),t.style.width=n+"px",t.style.height=r+"px",t.width=n,t.height=r,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class $e{constructor(e,t,n=t==null?0:8*t.length,r,i,o=Q.currentTimeMillis()){this.text=e,this.rawBytes=t,this.numBits=n,this.resultPoints=r,this.format=i,this.timestamp=o,this.text=e,this.rawBytes=t,n==null?this.numBits=t==null?0:8*t.length:this.numBits=n,this.resultPoints=r,this.format=i,this.resultMetadata=null,o==null?this.timestamp=Q.currentTimeMillis():this.timestamp=o}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){let t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){let n=new Array(t.length+e.length);Q.arraycopy(t,0,n,0,t.length),Q.arraycopy(e,0,n,t.length,e.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Br=function(l){return l[l.AZTEC=0]="AZTEC",l[l.CODABAR=1]="CODABAR",l[l.CODE_39=2]="CODE_39",l[l.CODE_93=3]="CODE_93",l[l.CODE_128=4]="CODE_128",l[l.DATA_MATRIX=5]="DATA_MATRIX",l[l.EAN_8=6]="EAN_8",l[l.EAN_13=7]="EAN_13",l[l.ITF=8]="ITF",l[l.MAXICODE=9]="MAXICODE",l[l.PDF_417=10]="PDF_417",l[l.QR_CODE=11]="QR_CODE",l[l.RSS_14=12]="RSS_14",l[l.RSS_EXPANDED=13]="RSS_EXPANDED",l[l.UPC_A=14]="UPC_A",l[l.UPC_E=15]="UPC_E",l[l.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",l}(Br||{}),q=Br,Pr=function(l){return l[l.OTHER=0]="OTHER",l[l.ORIENTATION=1]="ORIENTATION",l[l.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",l[l.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",l[l.ISSUE_NUMBER=4]="ISSUE_NUMBER",l[l.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",l[l.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",l[l.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",l[l.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",l[l.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",l[l.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY",l}(Pr||{}),He=Pr;class gn{constructor(e,t,n,r,i=-1,o=-1){this.rawBytes=e,this.text=t,this.byteSegments=n,this.ecLevel=r,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class xn{exp(e){return this.expTable[e]}log(e){if(e===0)throw new C;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class it{constructor(e,t){if(t.length===0)throw new C;this.field=e;let n=t.length;if(n>1&&t[0]===0){let r=1;for(;r<n&&t[r]===0;)r++;r===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-r),Q.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);let t=this.coefficients,n;if(e===1){n=0;for(let o=0,s=t.length;o!==s;o++){let a=t[o];n=xn.addOrSubtract(n,a)}return n}n=t[0];let r=t.length,i=this.field;for(let o=1;o<r;o++)n=xn.addOrSubtract(i.multiply(e,n),t[o]);return n}addOrSubtract(e){if(!this.field.equals(e.field))throw new C("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let o=t;t=n,n=o}let r=new Int32Array(n.length),i=n.length-t.length;Q.arraycopy(n,0,r,0,i);for(let o=i;o<n.length;o++)r[o]=xn.addOrSubtract(t[o-i],n[o]);return new it(this.field,r)}multiply(e){if(!this.field.equals(e.field))throw new C("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();let t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,o=new Int32Array(n+i-1),s=this.field;for(let a=0;a<n;a++){let c=t[a];for(let f=0;f<i;f++)o[a+f]=xn.addOrSubtract(o[a+f],s.multiply(c,r[f]))}return new it(s,o)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;let t=this.coefficients.length,n=this.field,r=new Int32Array(t),i=this.coefficients;for(let o=0;o<t;o++)r[o]=n.multiply(i[o],e);return new it(n,r)}multiplyByMonomial(e,t){if(e<0)throw new C;if(t===0)return this.field.getZero();let n=this.coefficients,r=n.length,i=new Int32Array(r+e),o=this.field;for(let s=0;s<r;s++)i[s]=o.multiply(n[s],t);return new it(o,i)}divide(e){if(!this.field.equals(e.field))throw new C("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new C("Divide by 0");let t=this.field,n=t.getZero(),r=this,i=e.getCoefficient(e.getDegree()),o=t.inverse(i);for(;r.getDegree()>=e.getDegree()&&!r.isZero();){let s=r.getDegree()-e.getDegree(),a=t.multiply(r.getCoefficient(r.getDegree()),o),c=e.multiplyByMonomial(s,a),f=t.buildMonomial(s,a);n=n.addOrSubtract(f),r=r.addOrSubtract(c)}return[n,r]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),t===0||n!==1){let r=this.field.log(n);r===0?e+="1":r===1?e+="a":(e+="a^",e+=r)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e}}let nr=(()=>{class l extends T{}return l.kind="ArithmeticException",l})();class me extends xn{constructor(e,t,n){super(),this.primitive=e,this.size=t,this.generatorBase=n;let r=new Int32Array(t),i=1;for(let s=0;s<t;s++)r[s]=i,i*=2,i>=t&&(i^=e,i&=t-1);this.expTable=r;let o=new Int32Array(t);for(let s=0;s<t-1;s++)o[r[s]]=s;this.logTable=o,this.zero=new it(this,Int32Array.from([0])),this.one=new it(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new C;if(t===0)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new it(this,n)}inverse(e){if(e===0)throw new nr;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+W.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}me.AZTEC_DATA_12=new me(4201,4096,1),me.AZTEC_DATA_10=new me(1033,1024,1),me.AZTEC_DATA_6=new me(67,64,1),me.AZTEC_PARAM=new me(19,16,1),me.QR_CODE_FIELD_256=new me(285,256,0),me.DATA_MATRIX_FIELD_256=new me(301,256,1),me.AZTEC_DATA_8=me.DATA_MATRIX_FIELD_256,me.MAXICODE_FIELD_64=me.AZTEC_DATA_6;let mn=(()=>{class l extends T{}return l.kind="ReedSolomonException",l})(),Dt=(()=>{class l extends T{}return l.kind="IllegalStateException",l})();class pn{constructor(e){this.field=e}decode(e,t){let n=this.field,r=new it(n,e),i=new Int32Array(t),o=!0;for(let E=0;E<t;E++){let I=r.evaluateAt(n.exp(E+n.getGeneratorBase()));i[i.length-1-E]=I,I!==0&&(o=!1)}if(o)return;let s=new it(n,i),a=this.runEuclideanAlgorithm(n.buildMonomial(t,1),s,t),c=a[0],f=a[1],m=this.findErrorLocations(c),w=this.findErrorMagnitudes(f,m);for(let E=0;E<m.length;E++){let I=e.length-1-n.log(m[E]);if(I<0)throw new mn("Bad error location");e[I]=me.addOrSubtract(e[I],w[E])}}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let E=e;e=t,t=E}let r=this.field,i=e,o=t,s=r.getZero(),a=r.getOne();for(;o.getDegree()>=(n/2|0);){let E=i,I=s;if(i=o,s=a,i.isZero())throw new mn("r_{i-1} was zero");o=E;let S=r.getZero(),b=i.getCoefficient(i.getDegree()),M=r.inverse(b);for(;o.getDegree()>=i.getDegree()&&!o.isZero();){let B=o.getDegree()-i.getDegree(),V=r.multiply(o.getCoefficient(o.getDegree()),M);S=S.addOrSubtract(r.buildMonomial(B,V)),o=o.addOrSubtract(i.multiplyByMonomial(B,V))}if(a=S.multiply(s).addOrSubtract(I),o.getDegree()>=i.getDegree())throw new Dt("Division algorithm failed to reduce polynomial?")}let c=a.getCoefficient(0);if(c===0)throw new mn("sigmaTilde(0) was zero");let f=r.inverse(c),m=a.multiplyScalar(f),w=o.multiplyScalar(f);return[m,w]}findErrorLocations(e){let t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);let n=new Int32Array(t),r=0,i=this.field;for(let o=1;o<i.getSize()&&r<t;o++)e.evaluateAt(o)===0&&(n[r]=i.inverse(o),r++);if(r!==t)throw new mn("Error locator degree does not match number of roots");return n}findErrorMagnitudes(e,t){let n=t.length,r=new Int32Array(n),i=this.field;for(let o=0;o<n;o++){let s=i.inverse(t[o]),a=1;for(let c=0;c<n;c++)if(o!==c){let f=i.multiply(t[c],s),m=f&1?f&-2:f|1;a=i.multiply(a,m)}r[o]=i.multiply(e.evaluateAt(s),i.inverse(a)),i.getGeneratorBase()!==0&&(r[o]=i.multiply(r[o],s))}return r}}var Ze=function(l){return l[l.UPPER=0]="UPPER",l[l.LOWER=1]="LOWER",l[l.MIXED=2]="MIXED",l[l.DIGIT=3]="DIGIT",l[l.PUNCT=4]="PUNCT",l[l.BINARY=5]="BINARY",l}(Ze||{});let rr=(()=>{class l{decode(t){this.ddata=t;let n=t.getBits(),r=this.extractBits(n),i=this.correctBits(r),o=l.convertBoolArrayToByteArray(i),s=l.getEncodedData(i),a=new gn(o,s,null,null);return a.setNumBits(i.length),a}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let n=t.length,r=Ze.UPPER,i=Ze.UPPER,o="",s=0;for(;s<n;)if(i===Ze.BINARY){if(n-s<5)break;let a=l.readCode(t,s,5);if(s+=5,a===0){if(n-s<11)break;a=l.readCode(t,s,11)+31,s+=11}for(let c=0;c<a;c++){if(n-s<8){s=n;break}let f=l.readCode(t,s,8);o+=ee.castAsNonUtf8Char(f),s+=8}i=r}else{let a=i===Ze.DIGIT?4:5;if(n-s<a)break;let c=l.readCode(t,s,a);s+=a;let f=l.getCharacter(i,c);f.startsWith("CTRL_")?(r=i,i=l.getTable(f.charAt(5)),f.charAt(6)==="L"&&(r=i)):(o+=f,i=r)}return o}static getTable(t){switch(t){case"L":return Ze.LOWER;case"P":return Ze.PUNCT;case"M":return Ze.MIXED;case"D":return Ze.DIGIT;case"B":return Ze.BINARY;case"U":default:return Ze.UPPER}}static getCharacter(t,n){switch(t){case Ze.UPPER:return l.UPPER_TABLE[n];case Ze.LOWER:return l.LOWER_TABLE[n];case Ze.MIXED:return l.MIXED_TABLE[n];case Ze.PUNCT:return l.PUNCT_TABLE[n];case Ze.DIGIT:return l.DIGIT_TABLE[n];default:throw new Dt("Bad table")}}correctBits(t){let n,r;this.ddata.getNbLayers()<=2?(r=6,n=me.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,n=me.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,n=me.AZTEC_DATA_10):(r=12,n=me.AZTEC_DATA_12);let i=this.ddata.getNbDatablocks(),o=t.length/r;if(o<i)throw new k;let s=t.length%r,a=new Int32Array(o);for(let E=0;E<o;E++,s+=r)a[E]=l.readCode(t,s,r);try{new pn(n).decode(a,o-i)}catch(E){throw new k(E)}let c=(1<<r)-1,f=0;for(let E=0;E<i;E++){let I=a[E];if(I===0||I===c)throw new k;(I===1||I===c-1)&&f++}let m=new Array(i*r-f),w=0;for(let E=0;E<i;E++){let I=a[E];if(I===1||I===c-1)m.fill(I>1,w,w+r-1),w+=r-1;else for(let S=r-1;S>=0;--S)m[w++]=(I&1<<S)!==0}return m}extractBits(t){let n=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(n?11:14)+r*4,o=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,n));if(n)for(let a=0;a<o.length;a++)o[a]=a;else{let a=i+1+2*W.truncDivision(W.truncDivision(i,2)-1,15),c=i/2,f=W.truncDivision(a,2);for(let m=0;m<c;m++){let w=m+W.truncDivision(m,15);o[c-m-1]=f-w-1,o[c+m]=f+w+1}}for(let a=0,c=0;a<r;a++){let f=(r-a)*4+(n?9:12),m=a*2,w=i-1-m;for(let E=0;E<f;E++){let I=E*2;for(let S=0;S<2;S++)s[c+I+S]=t.get(o[m+S],o[m+E]),s[c+2*f+I+S]=t.get(o[m+E],o[w-S]),s[c+4*f+I+S]=t.get(o[w-S],o[w-E]),s[c+6*f+I+S]=t.get(o[w-E],o[m+S])}c+=f*8}return s}static readCode(t,n,r){let i=0;for(let o=n;o<n+r;o++)i<<=1,t[o]&&(i|=1);return i}static readByte(t,n){let r=t.length-n;return r>=8?l.readCode(t,n,8):l.readCode(t,n,r)<<8-r}static convertBoolArrayToByteArray(t){let n=new Uint8Array((t.length+7)/8);for(let r=0;r<n.length;r++)n[r]=l.readByte(t,8*r);return n}totalBitsInLayer(t,n){return((n?88:112)+16*t)*t}}return l.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],l.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],l.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],l.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],l.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],l})();class fe{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,n,r){let i=e-n,o=t-r;return Math.sqrt(i*i+o*o)}static sum(e){let t=0;for(let n=0,r=e.length;n!==r;n++){let i=e[n];t+=i}return t}}class Mn{static floatToIntBits(e){return e}}Mn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class j{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof j){let t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*Mn.floatToIntBits(this.x)+Mn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){let t=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),r=this.distance(e[0],e[2]),i,o,s;if(n>=t&&n>=r?(o=e[0],i=e[1],s=e[2]):r>=n&&r>=t?(o=e[1],i=e[0],s=e[2]):(o=e[2],i=e[0],s=e[1]),this.crossProductZ(i,o,s)<0){let a=i;i=s,s=a}e[0]=i,e[1]=o,e[2]=s}static distance(e,t){return fe.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,n){let r=t.x,i=t.y;return(n.x-r)*(e.y-i)-(n.y-i)*(e.x-r)}}class On{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class kr extends On{constructor(e,t,n,r,i){super(e,t),this.compact=n,this.nbDatablocks=r,this.nbLayers=i}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}let Nn=(()=>{class l{constructor(t,n,r,i){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),n==null&&(n=l.INIT_SIZE),r==null&&(r=t.getWidth()/2|0),i==null&&(i=t.getHeight()/2|0);let o=n/2|0;if(this.leftInit=r-o,this.rightInit=r+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new v}detect(){let t=this.leftInit,n=this.rightInit,r=this.upInit,i=this.downInit,o=!1,s=!0,a=!1,c=!1,f=!1,m=!1,w=!1,E=this.width,I=this.height;for(;s;){s=!1;let S=!0;for(;(S||!c)&&n<E;)S=this.containsBlackPoint(r,i,n,!1),S?(n++,s=!0,c=!0):c||n++;if(n>=E){o=!0;break}let b=!0;for(;(b||!f)&&i<I;)b=this.containsBlackPoint(t,n,i,!0),b?(i++,s=!0,f=!0):f||i++;if(i>=I){o=!0;break}let M=!0;for(;(M||!m)&&t>=0;)M=this.containsBlackPoint(r,i,t,!1),M?(t--,s=!0,m=!0):m||t--;if(t<0){o=!0;break}let B=!0;for(;(B||!w)&&r>=0;)B=this.containsBlackPoint(t,n,r,!0),B?(r--,s=!0,w=!0):w||r--;if(r<0){o=!0;break}s&&(a=!0)}if(!o&&a){let S=n-t,b=null;for(let R=1;b===null&&R<S;R++)b=this.getBlackPointOnSegment(t,i-R,t+R,i);if(b==null)throw new v;let M=null;for(let R=1;M===null&&R<S;R++)M=this.getBlackPointOnSegment(t,r+R,t+R,r);if(M==null)throw new v;let B=null;for(let R=1;B===null&&R<S;R++)B=this.getBlackPointOnSegment(n,r+R,n-R,r);if(B==null)throw new v;let V=null;for(let R=1;V===null&&R<S;R++)V=this.getBlackPointOnSegment(n,i-R,n-R,i);if(V==null)throw new v;return this.centerEdges(V,b,B,M)}else throw new v}getBlackPointOnSegment(t,n,r,i){let o=fe.round(fe.distance(t,n,r,i)),s=(r-t)/o,a=(i-n)/o,c=this.image;for(let f=0;f<o;f++){let m=fe.round(t+f*s),w=fe.round(n+f*a);if(c.get(m,w))return new j(m,w)}return null}centerEdges(t,n,r,i){let o=t.getX(),s=t.getY(),a=n.getX(),c=n.getY(),f=r.getX(),m=r.getY(),w=i.getX(),E=i.getY(),I=l.CORR;return o<this.width/2?[new j(w-I,E+I),new j(a+I,c+I),new j(f-I,m-I),new j(o+I,s-I)]:[new j(w+I,E+I),new j(a+I,c-I),new j(f-I,m+I),new j(o-I,s-I)]}containsBlackPoint(t,n,r,i){let o=this.image;if(i){for(let s=t;s<=n;s++)if(o.get(s,r))return!0}else for(let s=t;s<=n;s++)if(o.get(r,s))return!0;return!1}}return l.INIT_SIZE=10,l.CORR=1,l})();class ir{static checkAndNudgePoints(e,t){let n=e.getWidth(),r=e.getHeight(),i=!0;for(let o=0;o<t.length&&i;o+=2){let s=Math.floor(t[o]),a=Math.floor(t[o+1]);if(s<-1||s>n||a<-1||a>r)throw new v;i=!1,s===-1?(t[o]=0,i=!0):s===n&&(t[o]=n-1,i=!0),a===-1?(t[o+1]=0,i=!0):a===r&&(t[o+1]=r-1,i=!0)}i=!0;for(let o=t.length-2;o>=0&&i;o-=2){let s=Math.floor(t[o]),a=Math.floor(t[o+1]);if(s<-1||s>n||a<-1||a>r)throw new v;i=!1,s===-1?(t[o]=0,i=!0):s===n&&(t[o]=n-1,i=!0),a===-1?(t[o+1]=0,i=!0):a===r&&(t[o+1]=r-1,i=!0)}}}class wt{constructor(e,t,n,r,i,o,s,a,c){this.a11=e,this.a21=t,this.a31=n,this.a12=r,this.a22=i,this.a32=o,this.a13=s,this.a23=a,this.a33=c}static quadrilateralToQuadrilateral(e,t,n,r,i,o,s,a,c,f,m,w,E,I,S,b){let M=wt.quadrilateralToSquare(e,t,n,r,i,o,s,a);return wt.squareToQuadrilateral(c,f,m,w,E,I,S,b).times(M)}transformPoints(e){let t=e.length,n=this.a11,r=this.a12,i=this.a13,o=this.a21,s=this.a22,a=this.a23,c=this.a31,f=this.a32,m=this.a33;for(let w=0;w<t;w+=2){let E=e[w],I=e[w+1],S=i*E+a*I+m;e[w]=(n*E+o*I+c)/S,e[w+1]=(r*E+s*I+f)/S}}transformPointsWithValues(e,t){let n=this.a11,r=this.a12,i=this.a13,o=this.a21,s=this.a22,a=this.a23,c=this.a31,f=this.a32,m=this.a33,w=e.length;for(let E=0;E<w;E++){let I=e[E],S=t[E],b=i*I+a*S+m;e[E]=(n*I+o*S+c)/b,t[E]=(r*I+s*S+f)/b}}static squareToQuadrilateral(e,t,n,r,i,o,s,a){let c=e-n+i-s,f=t-r+o-a;if(c===0&&f===0)return new wt(n-e,i-n,e,r-t,o-r,t,0,0,1);{let m=n-i,w=s-i,E=r-o,I=a-o,S=m*I-w*E,b=(c*I-w*f)/S,M=(m*f-c*E)/S;return new wt(n-e+b*n,s-e+M*s,e,r-t+b*r,a-t+M*a,t,b,M,1)}}static quadrilateralToSquare(e,t,n,r,i,o,s,a){return wt.squareToQuadrilateral(e,t,n,r,i,o,s,a).buildAdjoint()}buildAdjoint(){return new wt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new wt(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class Fr extends ir{sampleGrid(e,t,n,r,i,o,s,a,c,f,m,w,E,I,S,b,M,B,V){let R=wt.quadrilateralToQuadrilateral(r,i,o,s,a,c,f,m,w,E,I,S,b,M,B,V);return this.sampleGridWithTransform(e,t,n,R)}sampleGridWithTransform(e,t,n,r){if(t<=0||n<=0)throw new v;let i=new Ue(t,n),o=new Float32Array(2*t);for(let s=0;s<n;s++){let a=o.length,c=s+.5;for(let f=0;f<a;f+=2)o[f]=f/2+.5,o[f+1]=c;r.transformPoints(o),ir.checkAndNudgePoints(e,o);try{for(let f=0;f<a;f+=2)e.get(Math.floor(o[f]),Math.floor(o[f+1]))&&i.set(f/2,s)}catch{throw new v}}return i}}class kt{static setGridSampler(e){kt.gridSampler=e}static getInstance(){return kt.gridSampler}}kt.gridSampler=new Fr;class et{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new j(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ur{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),n=this.getBullsEyeCorners(t);if(e){let o=n[0];n[0]=n[2],n[2]=o}this.extractParameters(n);let r=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),i=this.getMatrixCornerPoints(n);return new kr(r,i,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new v;let t=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(n,t);let r=0;for(let o=0;o<4;o++){let s=n[(this.shift+o)%4];this.compact?(r<<=7,r+=s>>1&127):(r<<=10,r+=(s>>2&992)+(s>>1&31))}let i=this.getCorrectedParameterData(r,this.compact);this.compact?(this.nbLayers=(i>>6)+1,this.nbDataBlocks=(i&63)+1):(this.nbLayers=(i>>11)+1,this.nbDataBlocks=(i&2047)+1)}getRotation(e,t){let n=0;e.forEach((r,i,o)=>{let s=(r>>t-2<<1)+(r&1);n=(n<<3)+s}),n=((n&1)<<11)+(n>>1);for(let r=0;r<4;r++)if(W.bitCount(n^this.EXPECTED_CORNER_BITS[r])<=2)return r;throw new v}getCorrectedParameterData(e,t){let n,r;t?(n=7,r=2):(n=10,r=4);let i=n-r,o=new Int32Array(n);for(let a=n-1;a>=0;--a)o[a]=e&15,e>>=4;try{new pn(me.AZTEC_PARAM).decode(o,i)}catch{throw new v}let s=0;for(let a=0;a<r;a++)s=(s<<4)+o[a];return s}getBullsEyeCorners(e){let t=e,n=e,r=e,i=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let m=this.getFirstDifferent(t,o,1,-1),w=this.getFirstDifferent(n,o,1,1),E=this.getFirstDifferent(r,o,-1,1),I=this.getFirstDifferent(i,o,-1,-1);if(this.nbCenterLayers>2){let S=this.distancePoint(I,m)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(S<.75||S>1.25||!this.isWhiteOrBlackRectangle(m,w,E,I))break}t=m,n=w,r=E,i=I,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new v;this.compact=this.nbCenterLayers===5;let s=new j(t.getX()+.5,t.getY()-.5),a=new j(n.getX()+.5,n.getY()+.5),c=new j(r.getX()-.5,r.getY()+.5),f=new j(i.getX()-.5,i.getY()-.5);return this.expandSquare([s,a,c,f],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,n,r;try{let s=new Nn(this.image).detect();e=s[0],t=s[1],n=s[2],r=s[3]}catch{let a=this.image.getWidth()/2,c=this.image.getHeight()/2;e=this.getFirstDifferent(new et(a+7,c-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new et(a+7,c+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new et(a-7,c+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new et(a-7,c-7),!1,-1,-1).toResultPoint()}let i=fe.round((e.getX()+r.getX()+t.getX()+n.getX())/4),o=fe.round((e.getY()+r.getY()+t.getY()+n.getY())/4);try{let s=new Nn(this.image,15,i,o).detect();e=s[0],t=s[1],n=s[2],r=s[3]}catch{e=this.getFirstDifferent(new et(i+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new et(i+7,o+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new et(i-7,o+7),!1,-1,1).toResultPoint(),r=this.getFirstDifferent(new et(i-7,o-7),!1,-1,-1).toResultPoint()}return i=fe.round((e.getX()+r.getX()+t.getX()+n.getX())/4),o=fe.round((e.getY()+r.getY()+t.getY()+n.getY())/4),new et(i,o)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,n,r,i){let o=kt.getInstance(),s=this.getDimension(),a=s/2-this.nbCenterLayers,c=s/2+this.nbCenterLayers;return o.sampleGrid(e,s,s,a,a,c,a,c,c,a,c,t.getX(),t.getY(),n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY())}sampleLine(e,t,n){let r=0,i=this.distanceResultPoint(e,t),o=i/n,s=e.getX(),a=e.getY(),c=o*(t.getX()-e.getX())/i,f=o*(t.getY()-e.getY())/i;for(let m=0;m<n;m++)this.image.get(fe.round(s+m*c),fe.round(a+m*f))&&(r|=1<<n-m-1);return r}isWhiteOrBlackRectangle(e,t,n,r){let i=3;e=new et(e.getX()-i,e.getY()+i),t=new et(t.getX()-i,t.getY()-i),n=new et(n.getX()+i,n.getY()-i),r=new et(r.getX()+i,r.getY()+i);let o=this.getColor(r,e);if(o===0)return!1;let s=this.getColor(e,t);return s!==o||(s=this.getColor(t,n),s!==o)?!1:(s=this.getColor(n,r),s===o)}getColor(e,t){let n=this.distancePoint(e,t),r=(t.getX()-e.getX())/n,i=(t.getY()-e.getY())/n,o=0,s=e.getX(),a=e.getY(),c=this.image.get(e.getX(),e.getY()),f=Math.ceil(n);for(let w=0;w<f;w++)s+=r,a+=i,this.image.get(fe.round(s),fe.round(a))!==c&&o++;let m=o/n;return m>.1&&m<.9?0:m<=.1===c?1:-1}getFirstDifferent(e,t,n,r){let i=e.getX()+n,o=e.getY()+r;for(;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=n,o+=r;for(i-=n,o-=r;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=n;for(i-=n;this.isValid(i,o)&&this.image.get(i,o)===t;)o+=r;return o-=r,new et(i,o)}expandSquare(e,t,n){let r=n/(2*t),i=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,a=(e[0].getY()+e[2].getY())/2,c=new j(s+r*i,a+r*o),f=new j(s-r*i,a-r*o);i=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,a=(e[1].getY()+e[3].getY())/2;let m=new j(s+r*i,a+r*o),w=new j(s-r*i,a-r*o);return[c,m,f,w]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=fe.round(e.getX()),n=fe.round(e.getY());return this.isValid(t,n)}distancePoint(e,t){return fe.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return fe.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(W.truncDivision(this.nbLayers-4,8)+1)+15}}class Dn{decode(e,t=null){let n=null,r=new Ur(e.getBlackMatrix()),i=null,o=null;try{let f=r.detectMirror(!1);i=f.getPoints(),this.reportFoundResultPoints(t,i),o=new rr().decode(f)}catch(f){n=f}if(o==null)try{let f=r.detectMirror(!0);i=f.getPoints(),this.reportFoundResultPoints(t,i),o=new rr().decode(f)}catch(f){throw n??f}let s=new $e(o.getText(),o.getRawBytes(),o.getNumBits(),i,q.AZTEC,Q.currentTimeMillis()),a=o.getByteSegments();a!=null&&s.putMetadata(He.BYTE_SEGMENTS,a);let c=o.getECLevel();return c!=null&&s.putMetadata(He.ERROR_CORRECTION_LEVEL,c),s}reportFoundResultPoints(e,t){if(e!=null){let n=e.get(ue.NEED_RESULT_POINT_CALLBACK);n!=null&&t.forEach((r,i,o)=>{n.foundPossibleResultPoint(r)})}}reset(){}}class eo extends Yt{constructor(e=500){super(new Dn,e)}}class Pe{decode(e,t){try{return this.doDecode(e,t)}catch{if(t&&t.get(ue.TRY_HARDER)===!0&&e.isRotateSupported()){let i=e.rotateCounterClockwise(),o=this.doDecode(i,t),s=o.getResultMetadata(),a=270;s!==null&&s.get(He.ORIENTATION)===!0&&(a=a+s.get(He.ORIENTATION)%360),o.putMetadata(He.ORIENTATION,a);let c=o.getResultPoints();if(c!==null){let f=i.getHeight();for(let m=0;m<c.length;m++)c[m]=new j(f-c[m].getY()-1,c[m].getX())}return o}else throw new v}}reset(){}doDecode(e,t){let n=e.getWidth(),r=e.getHeight(),i=new le(n),o=t&&t.get(ue.TRY_HARDER)===!0,s=Math.max(1,r>>(o?8:5)),a;o?a=r:a=15;let c=Math.trunc(r/2);for(let f=0;f<a;f++){let m=Math.trunc((f+1)/2),w=(f&1)===0,E=c+s*(w?m:-m);if(E<0||E>=r)break;try{i=e.getBlackRow(E,i)}catch{continue}for(let I=0;I<2;I++){if(I===1&&(i.reverse(),t&&t.get(ue.NEED_RESULT_POINT_CALLBACK)===!0)){let S=new Map;t.forEach((b,M)=>S.set(M,b)),S.delete(ue.NEED_RESULT_POINT_CALLBACK),t=S}try{let S=this.decodeRow(E,i,t);if(I===1){S.putMetadata(He.ORIENTATION,180);let b=S.getResultPoints();b!==null&&(b[0]=new j(n-b[0].getX()-1,b[0].getY()),b[1]=new j(n-b[1].getX()-1,b[1].getY()))}return S}catch{}}}throw new v}static recordPattern(e,t,n){let r=n.length;for(let c=0;c<r;c++)n[c]=0;let i=e.getSize();if(t>=i)throw new v;let o=!e.get(t),s=0,a=t;for(;a<i;){if(e.get(a)!==o)n[s]++;else{if(++s===r)break;n[s]=1,o=!o}a++}if(!(s===r||s===r-1&&a===i))throw new v}static recordPatternInReverse(e,t,n){let r=n.length,i=e.get(t);for(;t>0&&r>=0;)e.get(--t)!==i&&(r--,i=!i);if(r>=0)throw new v;Pe.recordPattern(e,t+1,n)}static patternMatchVariance(e,t,n){let r=e.length,i=0,o=0;for(let c=0;c<r;c++)i+=e[c],o+=t[c];if(i<o)return Number.POSITIVE_INFINITY;let s=i/o;n*=s;let a=0;for(let c=0;c<r;c++){let f=e[c],m=t[c]*s,w=f>m?f-m:m-f;if(w>n)return Number.POSITIVE_INFINITY;a+=w}return a/i}}class U extends Pe{static findStartPattern(e){let t=e.getSize(),n=e.getNextSet(0),r=0,i=Int32Array.from([0,0,0,0,0,0]),o=n,s=!1,a=6;for(let c=n;c<t;c++)if(e.get(c)!==s)i[r]++;else{if(r===a-1){let f=U.MAX_AVG_VARIANCE,m=-1;for(let w=U.CODE_START_A;w<=U.CODE_START_C;w++){let E=Pe.patternMatchVariance(i,U.CODE_PATTERNS[w],U.MAX_INDIVIDUAL_VARIANCE);E<f&&(f=E,m=w)}if(m>=0&&e.isRange(Math.max(0,o-(c-o)/2),o,!1))return Int32Array.from([o,c,m]);o+=i[0]+i[1],i=i.slice(2,i.length-1),i[r-1]=0,i[r]=0,r--}else r++;i[r]=1,s=!s}throw new v}static decodeCode(e,t,n){Pe.recordPattern(e,n,t);let r=U.MAX_AVG_VARIANCE,i=-1;for(let o=0;o<U.CODE_PATTERNS.length;o++){let s=U.CODE_PATTERNS[o],a=this.patternMatchVariance(t,s,U.MAX_INDIVIDUAL_VARIANCE);a<r&&(r=a,i=o)}if(i>=0)return i;throw new v}decodeRow(e,t,n){let r=n&&n.get(ue.ASSUME_GS1)===!0,i=U.findStartPattern(t),o=i[2],s=0,a=new Uint8Array(20);a[s++]=o;let c;switch(o){case U.CODE_START_A:c=U.CODE_CODE_A;break;case U.CODE_START_B:c=U.CODE_CODE_B;break;case U.CODE_START_C:c=U.CODE_CODE_C;break;default:throw new k}let f=!1,m=!1,w="",E=i[0],I=i[1],S=Int32Array.from([0,0,0,0,0,0]),b=0,M=0,B=o,V=0,R=!0,se=!1,te=!1;for(;!f;){let an=m;switch(m=!1,b=M,M=U.decodeCode(t,S,I),a[s++]=M,M!==U.CODE_STOP&&(R=!0),M!==U.CODE_STOP&&(V++,B+=V*M),E=I,I+=S.reduce((Uo,Vo)=>Uo+Vo,0),M){case U.CODE_START_A:case U.CODE_START_B:case U.CODE_START_C:throw new k}switch(c){case U.CODE_CODE_A:if(M<64)te===se?w+=String.fromCharCode(32+M):w+=String.fromCharCode(32+M+128),te=!1;else if(M<96)te===se?w+=String.fromCharCode(M-64):w+=String.fromCharCode(M+64),te=!1;else switch(M!==U.CODE_STOP&&(R=!1),M){case U.CODE_FNC_1:r&&(w.length===0?w+="]C1":w+="");break;case U.CODE_FNC_2:case U.CODE_FNC_3:break;case U.CODE_FNC_4_A:!se&&te?(se=!0,te=!1):se&&te?(se=!1,te=!1):te=!0;break;case U.CODE_SHIFT:m=!0,c=U.CODE_CODE_B;break;case U.CODE_CODE_B:c=U.CODE_CODE_B;break;case U.CODE_CODE_C:c=U.CODE_CODE_C;break;case U.CODE_STOP:f=!0;break}break;case U.CODE_CODE_B:if(M<96)te===se?w+=String.fromCharCode(32+M):w+=String.fromCharCode(32+M+128),te=!1;else switch(M!==U.CODE_STOP&&(R=!1),M){case U.CODE_FNC_1:r&&(w.length===0?w+="]C1":w+="");break;case U.CODE_FNC_2:case U.CODE_FNC_3:break;case U.CODE_FNC_4_B:!se&&te?(se=!0,te=!1):se&&te?(se=!1,te=!1):te=!0;break;case U.CODE_SHIFT:m=!0,c=U.CODE_CODE_A;break;case U.CODE_CODE_A:c=U.CODE_CODE_A;break;case U.CODE_CODE_C:c=U.CODE_CODE_C;break;case U.CODE_STOP:f=!0;break}break;case U.CODE_CODE_C:if(M<100)M<10&&(w+="0"),w+=M;else switch(M!==U.CODE_STOP&&(R=!1),M){case U.CODE_FNC_1:r&&(w.length===0?w+="]C1":w+="");break;case U.CODE_CODE_A:c=U.CODE_CODE_A;break;case U.CODE_CODE_B:c=U.CODE_CODE_B;break;case U.CODE_STOP:f=!0;break}break}an&&(c=c===U.CODE_CODE_A?U.CODE_CODE_B:U.CODE_CODE_A)}let st=I-E;if(I=t.getNextUnset(I),!t.isRange(I,Math.min(t.getSize(),I+(I-E)/2),!1))throw new v;if(B-=V*b,B%103!==b)throw new P;let St=w.length;if(St===0)throw new v;St>0&&R&&(c===U.CODE_CODE_C?w=w.substring(0,St-2):w=w.substring(0,St-1));let at=(i[1]+i[0])/2,be=E+st/2,Ye=a.length,ft=new Uint8Array(Ye);for(let an=0;an<Ye;an++)ft[an]=a[an];let sn=[new j(at,e),new j(be,e)];return new $e(w,ft,0,sn,q.CODE_128,new Date().getTime())}}U.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],U.MAX_AVG_VARIANCE=.25,U.MAX_INDIVIDUAL_VARIANCE=.7,U.CODE_SHIFT=98,U.CODE_CODE_C=99,U.CODE_CODE_B=100,U.CODE_CODE_A=101,U.CODE_FNC_1=102,U.CODE_FNC_2=97,U.CODE_FNC_3=96,U.CODE_FNC_4_A=101,U.CODE_FNC_4_B=100,U.CODE_START_A=103,U.CODE_START_B=104,U.CODE_START_C=105,U.CODE_STOP=106;let or=(()=>{class l extends Pe{constructor(t=!1,n=!1){super(),this.usingCheckDigit=t,this.extendedMode=n,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,n,r){let i=this.counters;i.fill(0),this.decodeRowResult="";let o=l.findAsteriskPattern(n,i),s=n.getNextSet(o[1]),a=n.getSize(),c,f;do{l.recordPattern(n,s,i);let b=l.toNarrowWidePattern(i);if(b<0)throw new v;c=l.patternToChar(b),this.decodeRowResult+=c,f=s;for(let M of i)s+=M;s=n.getNextSet(s)}while(c!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let m=0;for(let b of i)m+=b;let w=s-f-m;if(s!==a&&w*2<m)throw new v;if(this.usingCheckDigit){let b=this.decodeRowResult.length-1,M=0;for(let B=0;B<b;B++)M+=l.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(B));if(this.decodeRowResult.charAt(b)!==l.ALPHABET_STRING.charAt(M%43))throw new P;this.decodeRowResult=this.decodeRowResult.substring(0,b)}if(this.decodeRowResult.length===0)throw new v;let E;this.extendedMode?E=l.decodeExtended(this.decodeRowResult):E=this.decodeRowResult;let I=(o[1]+o[0])/2,S=f+m/2;return new $e(E,null,0,[new j(I,t),new j(S,t)],q.CODE_39,new Date().getTime())}static findAsteriskPattern(t,n){let r=t.getSize(),i=t.getNextSet(0),o=0,s=i,a=!1,c=n.length;for(let f=i;f<r;f++)if(t.get(f)!==a)n[o]++;else{if(o===c-1){if(this.toNarrowWidePattern(n)===l.ASTERISK_ENCODING&&t.isRange(Math.max(0,s-Math.floor((f-s)/2)),s,!1))return[s,f];s+=n[0]+n[1],n.copyWithin(0,2,2+o-1),n[o-1]=0,n[o]=0,o--}else o++;n[o]=1,a=!a}throw new v}static toNarrowWidePattern(t){let n=t.length,r=0,i;do{let o=2147483647;for(let c of t)c<o&&c>r&&(o=c);r=o,i=0;let s=0,a=0;for(let c=0;c<n;c++){let f=t[c];f>r&&(a|=1<<n-1-c,i++,s+=f)}if(i===3){for(let c=0;c<n&&i>0;c++){let f=t[c];if(f>r&&(i--,f*2>=s))return-1}return a}}while(i>3);return-1}static patternToChar(t){for(let n=0;n<l.CHARACTER_ENCODINGS.length;n++)if(l.CHARACTER_ENCODINGS[n]===t)return l.ALPHABET_STRING.charAt(n);if(t===l.ASTERISK_ENCODING)return"*";throw new v}static decodeExtended(t){let n=t.length,r="";for(let i=0;i<n;i++){let o=t.charAt(i);if(o==="+"||o==="$"||o==="%"||o==="/"){let s=t.charAt(i+1),a="\0";switch(o){case"+":if(s>="A"&&s<="Z")a=String.fromCharCode(s.charCodeAt(0)+32);else throw new k;break;case"$":if(s>="A"&&s<="Z")a=String.fromCharCode(s.charCodeAt(0)-64);else throw new k;break;case"%":if(s>="A"&&s<="E")a=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")a=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")a=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")a=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")a="\0";else if(s==="V")a="@";else if(s==="W")a="`";else if(s==="X"||s==="Y"||s==="Z")a="\x7F";else throw new k;break;case"/":if(s>="A"&&s<="O")a=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")a=":";else throw new k;break}r+=a,i++}else r+=o}return r}}return l.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",l.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],l.ASTERISK_ENCODING=148,l})();class ye extends Pe{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,n){let r=this.decodeStart(t),i=this.decodeEnd(t),o=new Ie;ye.decodeMiddle(t,r[1],i[0],o);let s=o.toString(),a=null;n!=null&&(a=n.get(ue.ALLOWED_LENGTHS)),a==null&&(a=ye.DEFAULT_ALLOWED_LENGTHS);let c=s.length,f=!1,m=0;for(let I of a){if(c===I){f=!0;break}I>m&&(m=I)}if(!f&&c>m&&(f=!0),!f)throw new k;let w=[new j(r[1],e),new j(i[0],e)];return new $e(s,null,0,w,q.ITF,new Date().getTime())}static decodeMiddle(e,t,n,r){let i=new Int32Array(10),o=new Int32Array(5),s=new Int32Array(5);for(i.fill(0),o.fill(0),s.fill(0);t<n;){Pe.recordPattern(e,t,i);for(let c=0;c<5;c++){let f=2*c;o[c]=i[f],s[c]=i[f+1]}let a=ye.decodeDigit(o);r.append(a.toString()),a=this.decodeDigit(s),r.append(a.toString()),i.forEach(function(c){t+=c})}}decodeStart(e){let t=ye.skipWhiteSpace(e),n=ye.findGuardPattern(e,t,ye.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(e,n[0]),n}validateQuietZone(e,t){let n=this.narrowLineWidth*10;n=n<t?n:t;for(let r=t-1;n>0&&r>=0&&!e.get(r);r--)n--;if(n!==0)throw new v}static skipWhiteSpace(e){let t=e.getSize(),n=e.getNextSet(0);if(n===t)throw new v;return n}decodeEnd(e){e.reverse();try{let t=ye.skipWhiteSpace(e),n;try{n=ye.findGuardPattern(e,t,ye.END_PATTERN_REVERSED[0])}catch(i){i instanceof v&&(n=ye.findGuardPattern(e,t,ye.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,n[0]);let r=n[0];return n[0]=e.getSize()-n[1],n[1]=e.getSize()-r,n}finally{e.reverse()}}static findGuardPattern(e,t,n){let r=n.length,i=new Int32Array(r),o=e.getSize(),s=!1,a=0,c=t;i.fill(0);for(let f=t;f<o;f++)if(e.get(f)!==s)i[a]++;else{if(a===r-1){if(Pe.patternMatchVariance(i,n,ye.MAX_INDIVIDUAL_VARIANCE)<ye.MAX_AVG_VARIANCE)return[c,f];c+=i[0]+i[1],Q.arraycopy(i,2,i,0,a-1),i[a-1]=0,i[a]=0,a--}else a++;i[a]=1,s=!s}throw new v}static decodeDigit(e){let t=ye.MAX_AVG_VARIANCE,n=-1,r=ye.PATTERNS.length;for(let i=0;i<r;i++){let o=ye.PATTERNS[i],s=Pe.patternMatchVariance(e,o,ye.MAX_INDIVIDUAL_VARIANCE);s<t?(t=s,n=i):s===t&&(n=-1)}if(n>=0)return n%10;throw new v}}ye.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ye.MAX_AVG_VARIANCE=.38,ye.MAX_INDIVIDUAL_VARIANCE=.5,ye.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ye.START_PATTERN=Int32Array.from([1,1,1,1]),ye.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Re extends Pe{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t=!1,n,r=0,i=Int32Array.from([0,0,0]);for(;!t;){i=Int32Array.from([0,0,0]),n=Re.findGuardPattern(e,r,!1,this.START_END_PATTERN,i);let o=n[0];r=n[1];let s=o-(r-o);s>=0&&(t=e.isRange(s,o,!1))}return n}static checkChecksum(e){return Re.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let n=parseInt(e.charAt(t-1),10);return Re.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new k;n+=i}n*=3;for(let r=t-2;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new k;n+=i}return(1e3-n)%10}static decodeEnd(e,t){return Re.findGuardPattern(e,t,!1,Re.START_END_PATTERN,new Int32Array(Re.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,n,r){return this.findGuardPattern(e,t,n,r,new Int32Array(r.length))}static findGuardPattern(e,t,n,r,i){let o=e.getSize();t=n?e.getNextUnset(t):e.getNextSet(t);let s=0,a=t,c=r.length,f=n;for(let m=t;m<o;m++)if(e.get(m)!==f)i[s]++;else{if(s===c-1){if(Pe.patternMatchVariance(i,r,Re.MAX_INDIVIDUAL_VARIANCE)<Re.MAX_AVG_VARIANCE)return Int32Array.from([a,m]);a+=i[0]+i[1];let w=i.slice(2,i.length-1);for(let E=0;E<s-1;E++)i[E]=w[E];i[s-1]=0,i[s]=0,s--}else s++;i[s]=1,f=!f}throw new v}static decodeDigit(e,t,n,r){this.recordPattern(e,n,t);let i=this.MAX_AVG_VARIANCE,o=-1,s=r.length;for(let a=0;a<s;a++){let c=r[a],f=Pe.patternMatchVariance(t,c,Re.MAX_INDIVIDUAL_VARIANCE);f<i&&(i=f,o=a)}if(o>=0)return o;throw new v}}Re.MAX_AVG_VARIANCE=.48,Re.MAX_INDIVIDUAL_VARIANCE=.7,Re.START_END_PATTERN=Int32Array.from([1,1,1]),Re.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Re.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Re.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Cn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),o=r.toString(),s=Cn.parseExtensionString(o),a=[new j((n[0]+n[1])/2,e),new j(i,e)],c=new $e(o,null,0,a,q.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&c.putAllMetadata(s),c}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1],s=0;for(let c=0;c<5&&o<i;c++){let f=Re.decodeDigit(e,r,o,Re.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);for(let m of r)o+=m;f>=10&&(s|=1<<4-c),c!==4&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(n.length!==5)throw new v;let a=this.determineCheckDigit(s);if(Cn.extensionChecksum(n.toString())!==a)throw new v;return o}static extensionChecksum(e){let t=e.length,n=0;for(let r=t-2;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-48;n*=3;for(let r=t-1;r>=0;r-=2)n+=e.charAt(r).charCodeAt(0)-48;return n*=3,n%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new v}static parseExtensionString(e){if(e.length!==5)return null;let t=Cn.parseExtension5String(e);return t==null?null:new Map([[He.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="\xA3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}let n=parseInt(e.substring(1)),r=(n/100).toString(),i=n%100,o=i<10?"0"+i:i.toString();return t+r+"."+o}}class sr{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,n){let r=this.decodeRowStringBuffer,i=this.decodeMiddle(t,n,r),o=r.toString(),s=sr.parseExtensionString(o),a=[new j((n[0]+n[1])/2,e),new j(i,e)],c=new $e(o,null,0,a,q.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&c.putAllMetadata(s),c}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1],s=0;for(let a=0;a<2&&o<i;a++){let c=Re.decodeDigit(e,r,o,Re.L_AND_G_PATTERNS);n+=String.fromCharCode(48+c%10);for(let f of r)o+=f;c>=10&&(s|=1<<1-a),a!==1&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(n.length!==2)throw new v;if(parseInt(n.toString())%4!==s)throw new v;return o}static parseExtensionString(e){return e.length!==2?null:new Map([[He.ISSUE_NUMBER,parseInt(e)]])}}class Vr{static decodeRow(e,t,n){let r=Re.findGuardPattern(t,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Cn().decodeRow(e,t,r)}catch{return new sr().decodeRow(e,t,r)}}}Vr.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class pe extends Re{constructor(){super(),this.decodeRowStringBuffer="",pe.L_AND_G_PATTERNS=pe.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let t=pe.L_PATTERNS[e-10],n=new Int32Array(t.length);for(let r=0;r<t.length;r++)n[r]=t[t.length-r-1];pe.L_AND_G_PATTERNS[e]=n}}decodeRow(e,t,n){let r=pe.findStartGuardPattern(t),i=n==null?null:n.get(ue.NEED_RESULT_POINT_CALLBACK);if(i!=null){let R=new j((r[0]+r[1])/2,e);i.foundPossibleResultPoint(R)}let o=this.decodeMiddle(t,r,this.decodeRowStringBuffer),s=o.rowOffset,a=o.resultString;if(i!=null){let R=new j(s,e);i.foundPossibleResultPoint(R)}let c=this.decodeEnd(t,s);if(i!=null){let R=new j((c[0]+c[1])/2,e);i.foundPossibleResultPoint(R)}let f=c[1],m=f+(f-c[0]);if(m>=t.getSize()||!t.isRange(f,m,!1))throw new v;let w=a.toString();if(w.length<8)throw new k;if(!pe.checkChecksum(w))throw new P;let E=(r[1]+r[0])/2,I=(c[1]+c[0])/2,S=this.getBarcodeFormat(),b=[new j(E,e),new j(I,e)],M=new $e(w,null,0,b,S,new Date().getTime()),B=0;try{let R=Vr.decodeRow(e,t,c[1]);M.putMetadata(He.UPC_EAN_EXTENSION,R.getText()),M.putAllMetadata(R.getResultMetadata()),M.addResultPoints(R.getResultPoints()),B=R.getText().length}catch{}let V=n==null?null:n.get(ue.ALLOWED_EAN_EXTENSIONS);if(V!=null){let R=!1;for(let se in V)if(B.toString()===se){R=!0;break}if(!R)throw new v}return M}decodeEnd(e,t){return pe.findGuardPattern(e,t,!1,pe.START_END_PATTERN,new Int32Array(pe.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return pe.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(t===0)return!1;let n=parseInt(e.charAt(t-1),10);return pe.getStandardUPCEANChecksum(e.substring(0,t-1))===n}static getStandardUPCEANChecksum(e){let t=e.length,n=0;for(let r=t-1;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new k;n+=i}n*=3;for(let r=t-2;r>=0;r-=2){let i=e.charAt(r).charCodeAt(0)-48;if(i<0||i>9)throw new k;n+=i}return(1e3-n)%10}}let Rn=(()=>{class l extends pe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,n,r){let i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let o=t.getSize(),s=n[1],a=0;for(let f=0;f<6&&s<o;f++){let m=pe.decodeDigit(t,i,s,pe.L_AND_G_PATTERNS);r+=String.fromCharCode(48+m%10);for(let w of i)s+=w;m>=10&&(a|=1<<5-f)}r=l.determineFirstDigit(r,a),s=pe.findGuardPattern(t,s,!0,pe.MIDDLE_PATTERN,new Int32Array(pe.MIDDLE_PATTERN.length).fill(0))[1];for(let f=0;f<6&&s<o;f++){let m=pe.decodeDigit(t,i,s,pe.L_PATTERNS);r+=String.fromCharCode(48+m);for(let w of i)s+=w}return{rowOffset:s,resultString:r}}getBarcodeFormat(){return q.EAN_13}static determineFirstDigit(t,n){for(let r=0;r<10;r++)if(n===this.FIRST_DIGIT_ENCODINGS[r])return t=String.fromCharCode(48+r)+t,t;throw new v}}return l.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],l})();class Hr extends pe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters;r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1];for(let a=0;a<4&&o<i;a++){let c=pe.decodeDigit(e,r,o,pe.L_PATTERNS);n+=String.fromCharCode(48+c);for(let f of r)o+=f}o=pe.findGuardPattern(e,o,!0,pe.MIDDLE_PATTERN,new Int32Array(pe.MIDDLE_PATTERN.length).fill(0))[1];for(let a=0;a<4&&o<i;a++){let c=pe.decodeDigit(e,r,o,pe.L_PATTERNS);n+=String.fromCharCode(48+c);for(let f of r)o+=f}return{rowOffset:o,resultString:n}}getBarcodeFormat(){return q.EAN_8}}class zr extends pe{constructor(){super(...arguments),this.ean13Reader=new Rn}getBarcodeFormat(){return q.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,n))}decodeMiddle(e,t,n){return this.ean13Reader.decodeMiddle(e,t,n)}maybeReturnResult(e){let t=e.getText();if(t.charAt(0)==="0"){let n=new $e(t.substring(1),null,null,e.getResultPoints(),q.UPC_A);return e.getResultMetadata()!=null&&n.putAllMetadata(e.getResultMetadata()),n}else throw new v}reset(){this.ean13Reader.reset()}}class At extends pe{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,n){let r=this.decodeMiddleCounters.map(c=>c);r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o=t[1],s=0;for(let c=0;c<6&&o<i;c++){let f=At.decodeDigit(e,r,o,At.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);for(let m of r)o+=m;f>=10&&(s|=1<<5-c)}let a=At.determineNumSysAndCheckDigit(n,s);return{rowOffset:o,resultString:a}}decodeEnd(e,t){return At.findGuardPatternWithoutCounters(e,t,!0,At.MIDDLE_END_PATTERN)}checkChecksum(e){return pe.checkChecksum(At.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let n=0;n<=1;n++)for(let r=0;r<10;r++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][r]){let i=String.fromCharCode(48+n),o=String.fromCharCode(48+r);return i+e+o}throw v.getNotFoundInstance()}getBarcodeFormat(){return q.UPC_E}static convertUPCEtoUPCA(e){let t=e.slice(1,7).split("").map(i=>i.charCodeAt(0)),n=new Ie;n.append(e.charAt(0));let r=t[5];switch(r){case 0:case 1:case 2:n.appendChars(t,0,2),n.append(r),n.append("0000"),n.appendChars(t,2,3);break;case 3:n.appendChars(t,0,3),n.append("00000"),n.appendChars(t,3,2);break;case 4:n.appendChars(t,0,4),n.append("00000"),n.append(t[4]);break;default:n.appendChars(t,0,5),n.append("0000"),n.append(r);break}return e.length>=8&&n.append(e.charAt(7)),n.toString()}}At.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),At.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ar extends Pe{constructor(e){super();let t=e==null?null:e.get(ue.POSSIBLE_FORMATS),n=[];h(t)?(n.push(new Rn),n.push(new zr),n.push(new Hr),n.push(new At)):(t.indexOf(q.EAN_13)>-1&&n.push(new Rn),t.indexOf(q.UPC_A)>-1&&n.push(new zr),t.indexOf(q.EAN_8)>-1&&n.push(new Hr),t.indexOf(q.UPC_E)>-1&&n.push(new At)),this.readers=n}decodeRow(e,t,n){for(let r of this.readers)try{let i=r.decodeRow(e,t,n),o=i.getBarcodeFormat()===q.EAN_13&&i.getText().charAt(0)==="0",s=n==null?null:n.get(ue.POSSIBLE_FORMATS),a=s==null||s.includes(q.UPC_A);if(o&&a){let c=i.getRawBytes(),f=new $e(i.getText().substring(1),c,c?c.length:null,i.getResultPoints(),q.UPC_A);return f.putAllMetadata(i.getResultMetadata()),f}return i}catch{}throw new v}reset(){for(let e of this.readers)e.reset()}}let Zt=(()=>{class l extends Pe{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,n){for(let r=0;r<n.length;r++)if(Pe.patternMatchVariance(t,n[r],l.MAX_INDIVIDUAL_VARIANCE)<l.MAX_AVG_VARIANCE)return r;throw new v}static count(t){return fe.sum(new Int32Array(t))}static increment(t,n){let r=0,i=n[0];for(let o=1;o<t.length;o++)n[o]>i&&(i=n[o],r=o);t[r]++}static decrement(t,n){let r=0,i=n[0];for(let o=1;o<t.length;o++)n[o]<i&&(i=n[o],r=o);t[r]--}static isFinderPattern(t){let n=t[0]+t[1],r=n+t[2]+t[3],i=n/r;if(i>=l.MIN_FINDER_PATTERN_RATIO&&i<=l.MAX_FINDER_PATTERN_RATIO){let o=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;for(let a of t)a>s&&(s=a),a<o&&(o=a);return s<10*o}return!1}}return l.MAX_AVG_VARIANCE=.2,l.MAX_INDIVIDUAL_VARIANCE=.45,l.MIN_FINDER_PATTERN_RATIO=9.5/12,l.MAX_FINDER_PATTERN_RATIO=12.5/14,l})();class $t{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof $t))return!1;let t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class vn{constructor(e,t,n,r,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new j(n,i)),this.resultPoints.push(new j(r,i))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof vn))return!1;let t=e;return this.value===t.value}hashCode(){return this.value}}class _t{constructor(){}static getRSSvalue(e,t,n){let r=0;for(let a of e)r+=a;let i=0,o=0,s=e.length;for(let a=0;a<s-1;a++){let c;for(c=1,o|=1<<a;c<e[a];c++,o&=~(1<<a)){let f=_t.combins(r-c-1,s-a-2);if(n&&o===0&&r-c-(s-a-1)>=s-a-1&&(f-=_t.combins(r-c-(s-a),s-a-2)),s-a-1>1){let m=0;for(let w=r-c-(s-a-2);w>t;w--)m+=_t.combins(r-c-w-1,s-a-3);f-=m*(s-1-a)}else r-c>t&&f--;i+=f}r-=c}return i}static combins(e,t){let n,r;e-t>t?(r=t,n=e-t):(r=e-t,n=t);let i=1,o=1;for(let s=e;s>n;s--)i*=s,o<=r&&(i/=o,o++);for(;o<=r;)i/=o,o++;return i}}class to{static buildBitArray(e){let t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);let n=12*t,r=new le(n),i=0,s=e[0].getRightChar().getValue();for(let a=11;a>=0;--a)s&1<<a&&r.set(i),i++;for(let a=1;a<e.length;++a){let c=e[a],f=c.getLeftChar().getValue();for(let m=11;m>=0;--m)f&1<<m&&r.set(i),i++;if(c.getRightChar()!=null){let m=c.getRightChar().getValue();for(let w=11;w>=0;--w)m&1<<w&&r.set(i),i++}}return r}}class Qt{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class cr{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}let Et=(()=>{class l extends cr{constructor(t,n){super(t),this.value=n}getValue(){return this.value}isFNC1(){return this.value===l.FNC1}}return l.FNC1="$",l})();class qt extends cr{constructor(e,t,n){super(e),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}let en=(()=>{class l extends cr{constructor(t,n,r){if(super(t),n<0||n>10||r<0||r>10)throw new k;this.firstDigit=n,this.secondDigit=r}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===l.FNC1}isSecondDigitFNC1(){return this.secondDigit===l.FNC1}isAnyFNC1(){return this.firstDigit===l.FNC1||this.secondDigit===l.FNC1}}return l.FNC1=10,l})();class z{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new v;let t=e.substring(0,2);for(let i of z.TWO_DIGIT_DATA_LENGTH)if(i[0]===t)return i[1]===z.VARIABLE_LENGTH?z.processVariableAI(2,i[2],e):z.processFixedAI(2,i[1],e);if(e.length<3)throw new v;let n=e.substring(0,3);for(let i of z.THREE_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===z.VARIABLE_LENGTH?z.processVariableAI(3,i[2],e):z.processFixedAI(3,i[1],e);for(let i of z.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===z.VARIABLE_LENGTH?z.processVariableAI(4,i[2],e):z.processFixedAI(4,i[1],e);if(e.length<4)throw new v;let r=e.substring(0,4);for(let i of z.FOUR_DIGIT_DATA_LENGTH)if(i[0]===r)return i[1]===z.VARIABLE_LENGTH?z.processVariableAI(4,i[2],e):z.processFixedAI(4,i[1],e);throw new v}static processFixedAI(e,t,n){if(n.length<e)throw new v;let r=n.substring(0,e);if(n.length<e+t)throw new v;let i=n.substring(e,e+t),o=n.substring(e+t),s="("+r+")"+i,a=z.parseFieldsInGeneralPurpose(o);return a==null?s:s+a}static processVariableAI(e,t,n){let r=n.substring(0,e),i;n.length<e+t?i=n.length:i=e+t;let o=n.substring(e,i),s=n.substring(i),a="("+r+")"+o,c=z.parseFieldsInGeneralPurpose(s);return c==null?a:a+c}}z.VARIABLE_LENGTH=[],z.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",z.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",z.VARIABLE_LENGTH,20],["22",z.VARIABLE_LENGTH,29],["30",z.VARIABLE_LENGTH,8],["37",z.VARIABLE_LENGTH,8],["90",z.VARIABLE_LENGTH,30],["91",z.VARIABLE_LENGTH,30],["92",z.VARIABLE_LENGTH,30],["93",z.VARIABLE_LENGTH,30],["94",z.VARIABLE_LENGTH,30],["95",z.VARIABLE_LENGTH,30],["96",z.VARIABLE_LENGTH,30],["97",z.VARIABLE_LENGTH,3],["98",z.VARIABLE_LENGTH,30],["99",z.VARIABLE_LENGTH,30]],z.THREE_DIGIT_DATA_LENGTH=[["240",z.VARIABLE_LENGTH,30],["241",z.VARIABLE_LENGTH,30],["242",z.VARIABLE_LENGTH,6],["250",z.VARIABLE_LENGTH,30],["251",z.VARIABLE_LENGTH,30],["253",z.VARIABLE_LENGTH,17],["254",z.VARIABLE_LENGTH,20],["400",z.VARIABLE_LENGTH,30],["401",z.VARIABLE_LENGTH,30],["402",17],["403",z.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",z.VARIABLE_LENGTH,20],["421",z.VARIABLE_LENGTH,15],["422",3],["423",z.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],z.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",z.VARIABLE_LENGTH,15],["391",z.VARIABLE_LENGTH,18],["392",z.VARIABLE_LENGTH,15],["393",z.VARIABLE_LENGTH,18],["703",z.VARIABLE_LENGTH,30]],z.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",z.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",z.VARIABLE_LENGTH,20],["8003",z.VARIABLE_LENGTH,30],["8004",z.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",z.VARIABLE_LENGTH,30],["8008",z.VARIABLE_LENGTH,12],["8018",18],["8020",z.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",z.VARIABLE_LENGTH,70],["8200",z.VARIABLE_LENGTH,70]];class tn{constructor(e){this.buffer=new Ie,this.information=e}decodeAllCodes(e,t){let n=t,r=null;do{let i=this.decodeGeneralPurposeField(n,r),o=z.parseFieldsInGeneralPurpose(i.getNewString());if(o!=null&&e.append(o),i.isRemaining()?r=""+i.getRemainingValue():r=null,n===i.getNewPosition())break;n=i.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let i=this.extractNumericValueFromBitArray(e,4);return i===0?new en(this.information.getSize(),en.FNC1,en.FNC1):new en(this.information.getSize(),i-1,en.FNC1)}let t=this.extractNumericValueFromBitArray(e,7),n=(t-8)/11,r=(t-8)%11;return new en(e+7,n,r)}extractNumericValueFromBitArray(e,t){return tn.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,n){let r=0;for(let i=0;i<n;++i)e.get(t+i)&&(r|=1<<n-i-1);return r}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);let n=this.parseBlocks();return n!=null&&n.isRemaining()?new qt(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new qt(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let n=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),!(n!==this.current.getPosition())&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return e.isSecondDigitFNC1()?t=new qt(this.current.getPosition(),this.buffer.toString()):t=new qt(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Qt(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let t=new qt(this.current.getPosition(),this.buffer.toString());return new Qt(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Qt(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new qt(this.current.getPosition(),this.buffer.toString());return new Qt(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Qt(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let t=new qt(this.current.getPosition(),this.buffer.toString());return new Qt(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Qt(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,8);return r>=232&&r<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Et(e+5,Et.FNC1);if(t>=5&&t<15)return new Et(e+5,"0"+(t-5));let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new Et(e+7,""+(n+1));if(n>=90&&n<116)return new Et(e+7,""+(n+7));let r=this.extractNumericValueFromBitArray(e,8),i;switch(r){case 232:i="!";break;case 233:i='"';break;case 234:i="%";break;case 235:i="&";break;case 236:i="'";break;case 237:i="(";break;case 238:i=")";break;case 239:i="*";break;case 240:i="+";break;case 241:i=",";break;case 242:i="-";break;case 243:i=".";break;case 244:i="/";break;case 245:i=":";break;case 246:i=";";break;case 247:i="<";break;case 248:i="=";break;case 249:i=">";break;case 250:i="?";break;case 251:i="_";break;case 252:i=" ";break;default:throw new k}return new Et(e+8,i)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Et(e+5,Et.FNC1);if(t>=5&&t<15)return new Et(e+5,"0"+(t-5));let n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new Et(e+6,""+(n+33));let r;switch(n){case 58:r="*";break;case 59:r=",";break;case 60:r="-";break;case 61:r=".";break;case 62:r="/";break;default:throw new Dt("Decoding invalid alphanumeric value: "+n)}return new Et(e+6,r)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class lr{constructor(e){this.information=e,this.generalDecoder=new tn(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}let It=(()=>{class l extends lr{constructor(t){super(t)}encodeCompressedGtin(t,n){t.append("(01)");let r=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,n,r)}encodeCompressedGtinWithoutAI(t,n,r){for(let i=0;i<4;++i){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*i,10);o/100===0&&t.append("0"),o/10===0&&t.append("0"),t.append(o)}l.appendCheckDigit(t,r)}static appendCheckDigit(t,n){let r=0;for(let i=0;i<13;i++){let o=t.charAt(i+n).charCodeAt(0)-48;r+=i&1?o:3*o}r=10-r%10,r===10&&(r=0),t.append(r)}}return l.GTIN_SIZE=40,l})(),no=(()=>{class l extends It{constructor(t){super(t)}parseInformation(){let t=new Ie;t.append("(01)");let n=t.length(),r=this.getGeneralDecoder().extractNumericValueFromBitArray(l.HEADER_SIZE,4);return t.append(r),this.encodeCompressedGtinWithoutAI(t,l.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(t,l.HEADER_SIZE+44)}}return l.HEADER_SIZE=4,l})(),ro=(()=>{class l extends lr{constructor(t){super(t)}parseInformation(){let t=new Ie;return this.getGeneralDecoder().decodeAllCodes(t,l.HEADER_SIZE)}}return l.HEADER_SIZE=5,l})();class Ln extends It{constructor(e){super(e)}encodeCompressedWeight(e,t,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,n);this.addWeightCode(e,r);let i=this.checkWeight(r),o=1e5;for(let s=0;s<5;++s)i/o===0&&e.append("0"),o/=10;e.append(i)}}let jr=(()=>{class l extends Ln{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=l.HEADER_SIZE+Ln.GTIN_SIZE+l.WEIGHT_SIZE)throw new v;let t=new Ie;return this.encodeCompressedGtin(t,l.HEADER_SIZE),this.encodeCompressedWeight(t,l.HEADER_SIZE+Ln.GTIN_SIZE,l.WEIGHT_SIZE),t.toString()}}return l.HEADER_SIZE=5,l.WEIGHT_SIZE=15,l})();class io extends jr{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class oo extends jr{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}let so=(()=>{class l extends It{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<l.HEADER_SIZE+It.GTIN_SIZE)throw new v;let t=new Ie;this.encodeCompressedGtin(t,l.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(l.HEADER_SIZE+It.GTIN_SIZE,l.LAST_DIGIT_SIZE);t.append("(392"),t.append(n),t.append(")");let r=this.getGeneralDecoder().decodeGeneralPurposeField(l.HEADER_SIZE+It.GTIN_SIZE+l.LAST_DIGIT_SIZE,null);return t.append(r.getNewString()),t.toString()}}return l.HEADER_SIZE=8,l.LAST_DIGIT_SIZE=2,l})(),ao=(()=>{class l extends It{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<l.HEADER_SIZE+It.GTIN_SIZE)throw new v;let t=new Ie;this.encodeCompressedGtin(t,l.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(l.HEADER_SIZE+It.GTIN_SIZE,l.LAST_DIGIT_SIZE);t.append("(393"),t.append(n),t.append(")");let r=this.getGeneralDecoder().extractNumericValueFromBitArray(l.HEADER_SIZE+It.GTIN_SIZE+l.LAST_DIGIT_SIZE,l.FIRST_THREE_DIGITS_SIZE);r/100==0&&t.append("0"),r/10==0&&t.append("0"),t.append(r);let i=this.getGeneralDecoder().decodeGeneralPurposeField(l.HEADER_SIZE+It.GTIN_SIZE+l.LAST_DIGIT_SIZE+l.FIRST_THREE_DIGITS_SIZE,null);return t.append(i.getNewString()),t.toString()}}return l.HEADER_SIZE=8,l.LAST_DIGIT_SIZE=2,l.FIRST_THREE_DIGITS_SIZE=10,l})(),Ft=(()=>{class l extends Ln{constructor(t,n,r){super(t),this.dateCode=r,this.firstAIdigits=n}parseInformation(){if(this.getInformation().getSize()!=l.HEADER_SIZE+l.GTIN_SIZE+l.WEIGHT_SIZE+l.DATE_SIZE)throw new v;let t=new Ie;return this.encodeCompressedGtin(t,l.HEADER_SIZE),this.encodeCompressedWeight(t,l.HEADER_SIZE+l.GTIN_SIZE,l.WEIGHT_SIZE),this.encodeCompressedDate(t,l.HEADER_SIZE+l.GTIN_SIZE+l.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(n,l.DATE_SIZE);if(r==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let i=r%32;r/=32;let o=r%12+1;r/=12;let s=r;s/10==0&&t.append("0"),t.append(s),o/10==0&&t.append("0"),t.append(o),i/10==0&&t.append("0"),t.append(i)}addWeightCode(t,n){t.append("("),t.append(this.firstAIdigits),t.append(n/1e5),t.append(")")}checkWeight(t){return t%1e5}}return l.HEADER_SIZE=8,l.WEIGHT_SIZE=20,l.DATE_SIZE=16,l})();function Gr(l){try{if(l.get(1))return new no(l);if(!l.get(2))return new ro(l);switch(tn.extractNumericValueFromBitArray(l,1,4)){case 4:return new io(l);case 5:return new oo(l)}switch(tn.extractNumericValueFromBitArray(l,1,5)){case 12:return new so(l);case 13:return new ao(l)}switch(tn.extractNumericValueFromBitArray(l,1,7)){case 56:return new Ft(l,"310","11");case 57:return new Ft(l,"320","11");case 58:return new Ft(l,"310","13");case 59:return new Ft(l,"320","13");case 60:return new Ft(l,"310","15");case 61:return new Ft(l,"320","15");case 62:return new Ft(l,"310","17");case 63:return new Ft(l,"320","17")}}catch(e){throw console.log(e),new Dt("unknown decoder: "+l)}}class Ut{constructor(e,t,n,r){this.leftchar=e,this.rightchar=t,this.finderpattern=n,this.maybeLast=r}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof Ut?Ut.equalsOrNull(e.leftchar,t.leftchar)&&Ut.equalsOrNull(e.rightchar,t.rightchar)&&Ut.equalsOrNull(e.finderpattern,t.finderpattern):!1}static equalsOrNull(e,t){return e===null?t===null:Ut.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class ur{constructor(e,t,n){this.pairs=e,this.rowNumber=t,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof ur?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1}checkEqualitity(e,t){if(!e||!t)return;let n;return e.forEach((r,i)=>{t.forEach(o=>{r.getLeftChar().getValue()===o.getLeftChar().getValue()&&r.getRightChar().getValue()===o.getRightChar().getValue()&&r.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}}class L extends Zt{constructor(e){super(...arguments),this.pairs=new Array(L.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,t,n){this.pairs.length=0,this.startFromEven=!1;try{return L.constructResult(this.decodeRow2pairs(e,t))}catch(r){this.verbose&&console.log(r)}return this.pairs.length=0,this.startFromEven=!0,L.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let n=!1;for(;!n;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(i){if(i instanceof v){if(!this.pairs.length)throw new v;n=!0}}if(this.checkChecksum())return this.pairs;let r;if(this.rows.length?r=!0:r=!1,this.storeRow(e,!1),r){let i=this.checkRowsBoolean(!1);if(i!=null||(i=this.checkRowsBoolean(!0),i!=null))return i}throw new v}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let n=t;n<this.rows.length;n++){let r=this.rows[n];this.pairs.length=0;for(let o of e)this.pairs.push(o.getPairs());if(this.pairs.push(r.getPairs()),!L.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let i=new Array(e);i.push(r);try{return this.checkRows(i,n+1)}catch(o){this.verbose&&console.log(o)}}throw new v}static isValidSequence(e){for(let t of L.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let n=!0;for(let r=0;r<e.length;r++)if(e[r].getFinderPattern().getValue()!=t[r]){n=!1;break}if(n)return!0}return!1}storeRow(e,t){let n=0,r=!1,i=!1;for(;n<this.rows.length;){let o=this.rows[n];if(o.getRowNumber()>e){i=o.isEquivalent(this.pairs);break}r=o.isEquivalent(this.pairs),n++}i||r||L.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new ur(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let n of t)if(n.getPairs().length!==e.length){for(let r of n.getPairs())for(let i of e)if(Ut.equals(r,i))break}}static isPartialRow(e,t){for(let n of t){let r=!0;for(let i of e){let o=!1;for(let s of n.getPairs())if(i.equals(s)){o=!0;break}if(!o){r=!1;break}}if(r)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=to.buildBitArray(e),r=Gr(t).parseInformation(),i=e[0].getFinderPattern().getResultPoints(),o=e[e.length-1].getFinderPattern().getResultPoints(),s=[i[0],i[1],o[0],o[1]];return new $e(r,null,null,s,q.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),n=e.getRightChar();if(n==null)return!1;let r=n.getChecksumPortion(),i=2;for(let s=1;s<this.pairs.size();++s){let a=this.pairs.get(s);r+=a.getLeftChar().getChecksumPortion(),i++;let c=a.getRightChar();c!=null&&(r+=c.getChecksumPortion(),i++)}return r%=211,211*(i-4)+r==t.getValue()}static getNextSecondBar(e,t){let n;return e.get(t)?(n=e.getNextUnset(t),n=e.getNextSet(n)):(n=e.getNextSet(t),n=e.getNextUnset(n)),n}retrieveNextPair(e,t,n){let r=t.length%2==0;this.startFromEven&&(r=!r);let i,o=!0,s=-1;do this.findNextPair(e,t,s),i=this.parseFoundFinderPattern(e,n,r),i==null?s=L.getNextSecondBar(e,this.startEnd[0]):o=!1;while(o);let a=this.decodeDataCharacter(e,i,r,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new v;let c;try{c=this.decodeDataCharacter(e,i,r,!1)}catch(f){c=null,this.verbose&&console.log(f)}return new Ut(a,c,i,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,t,n){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),o;n>=0?o=n:this.isEmptyPair(t)?o=0:o=t[t.length-1].getFinderPattern().getStartEnd()[1];let s=t.length%2!=0;this.startFromEven&&(s=!s);let a=!1;for(;o<i&&(a=!e.get(o),!!a);)o++;let c=0,f=o;for(let m=o;m<i;m++)if(e.get(m)!=a)r[c]++;else{if(c==3){if(s&&L.reverseCounters(r),L.isFinderPattern(r)){this.startEnd[0]=f,this.startEnd[1]=m;return}s&&L.reverseCounters(r),f+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,c--}else c++;r[c]=1,a=!a}throw new v}static reverseCounters(e){let t=e.length;for(let n=0;n<t/2;++n){let r=e[n];e[n]=e[t-n-1],e[t-n-1]=r}}parseFoundFinderPattern(e,t,n){let r,i,o;if(n){let c=this.startEnd[0]-1;for(;c>=0&&!e.get(c);)c--;c++,r=this.startEnd[0]-c,i=c,o=this.startEnd[1]}else i=this.startEnd[0],o=e.getNextUnset(this.startEnd[1]+1),r=o-this.startEnd[1];let s=this.getDecodeFinderCounters();Q.arraycopy(s,0,s,1,s.length-1),s[0]=r;let a;try{a=this.parseFinderValue(s,L.FINDER_PATTERNS)}catch{return null}return new vn(a,[i,o],i,o,t)}decodeDataCharacter(e,t,n,r){let i=this.getDataCharacterCounters();for(let be=0;be<i.length;be++)i[be]=0;if(r)L.recordPatternInReverse(e,t.getStartEnd()[0],i);else{L.recordPattern(e,t.getStartEnd()[1],i);for(let be=0,Ye=i.length-1;be<Ye;be++,Ye--){let ft=i[be];i[be]=i[Ye],i[Ye]=ft}}let o=17,s=fe.sum(new Int32Array(i))/o,a=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(s-a)/a>.3)throw new v;let c=this.getOddCounts(),f=this.getEvenCounts(),m=this.getOddRoundingErrors(),w=this.getEvenRoundingErrors();for(let be=0;be<i.length;be++){let Ye=1*i[be]/s,ft=Ye+.5;if(ft<1){if(Ye<.3)throw new v;ft=1}else if(ft>8){if(Ye>8.7)throw new v;ft=8}let sn=be/2;be&1?(f[sn]=ft,w[sn]=Ye-ft):(c[sn]=ft,m[sn]=Ye-ft)}this.adjustOddEvenCounts(o);let E=4*t.getValue()+(n?0:2)+(r?0:1)-1,I=0,S=0;for(let be=c.length-1;be>=0;be--){if(L.isNotA1left(t,n,r)){let Ye=L.WEIGHTS[E][2*be];S+=c[be]*Ye}I+=c[be]}let b=0;for(let be=f.length-1;be>=0;be--)if(L.isNotA1left(t,n,r)){let Ye=L.WEIGHTS[E][2*be+1];b+=f[be]*Ye}let M=S+b;if(I&1||I>13||I<4)throw new v;let B=(13-I)/2,V=L.SYMBOL_WIDEST[B],R=9-V,se=_t.getRSSvalue(c,V,!0),te=_t.getRSSvalue(f,R,!1),st=L.EVEN_TOTAL_SUBSET[B],St=L.GSUM[B],at=se*st+te+St;return new $t(at,M)}static isNotA1left(e,t,n){return!(e.getValue()==0&&t&&n)}adjustOddEvenCounts(e){let t=fe.sum(new Int32Array(this.getOddCounts())),n=fe.sum(new Int32Array(this.getEvenCounts())),r=!1,i=!1;t>13?i=!0:t<4&&(r=!0);let o=!1,s=!1;n>13?s=!0:n<4&&(o=!0);let a=t+n-e,c=(t&1)==1,f=(n&1)==0;if(a==1)if(c){if(f)throw new v;i=!0}else{if(!f)throw new v;s=!0}else if(a==-1)if(c){if(f)throw new v;r=!0}else{if(!f)throw new v;o=!0}else if(a==0){if(c){if(!f)throw new v;t<n?(r=!0,s=!0):(i=!0,o=!0)}else if(f)throw new v}else throw new v;if(r){if(i)throw new v;L.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&L.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(s)throw new v;L.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&L.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}L.SYMBOL_WIDEST=[7,5,4,3,1],L.EVEN_TOTAL_SUBSET=[4,20,52,104,204],L.GSUM=[0,348,1388,2948,3988],L.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],L.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],L.FINDER_PAT_A=0,L.FINDER_PAT_B=1,L.FINDER_PAT_C=2,L.FINDER_PAT_D=3,L.FINDER_PAT_E=4,L.FINDER_PAT_F=5,L.FINDER_PATTERN_SEQUENCES=[[L.FINDER_PAT_A,L.FINDER_PAT_A],[L.FINDER_PAT_A,L.FINDER_PAT_B,L.FINDER_PAT_B],[L.FINDER_PAT_A,L.FINDER_PAT_C,L.FINDER_PAT_B,L.FINDER_PAT_D],[L.FINDER_PAT_A,L.FINDER_PAT_E,L.FINDER_PAT_B,L.FINDER_PAT_D,L.FINDER_PAT_C],[L.FINDER_PAT_A,L.FINDER_PAT_E,L.FINDER_PAT_B,L.FINDER_PAT_D,L.FINDER_PAT_D,L.FINDER_PAT_F],[L.FINDER_PAT_A,L.FINDER_PAT_E,L.FINDER_PAT_B,L.FINDER_PAT_D,L.FINDER_PAT_E,L.FINDER_PAT_F,L.FINDER_PAT_F],[L.FINDER_PAT_A,L.FINDER_PAT_A,L.FINDER_PAT_B,L.FINDER_PAT_B,L.FINDER_PAT_C,L.FINDER_PAT_C,L.FINDER_PAT_D,L.FINDER_PAT_D],[L.FINDER_PAT_A,L.FINDER_PAT_A,L.FINDER_PAT_B,L.FINDER_PAT_B,L.FINDER_PAT_C,L.FINDER_PAT_C,L.FINDER_PAT_D,L.FINDER_PAT_E,L.FINDER_PAT_E],[L.FINDER_PAT_A,L.FINDER_PAT_A,L.FINDER_PAT_B,L.FINDER_PAT_B,L.FINDER_PAT_C,L.FINDER_PAT_C,L.FINDER_PAT_D,L.FINDER_PAT_E,L.FINDER_PAT_F,L.FINDER_PAT_F],[L.FINDER_PAT_A,L.FINDER_PAT_A,L.FINDER_PAT_B,L.FINDER_PAT_B,L.FINDER_PAT_C,L.FINDER_PAT_D,L.FINDER_PAT_D,L.FINDER_PAT_E,L.FINDER_PAT_E,L.FINDER_PAT_F,L.FINDER_PAT_F]],L.MAX_PAIRS=11;class co extends $t{constructor(e,t,n){super(e,t),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class ve extends Zt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,n){let r=this.decodePair(t,!1,e,n);ve.addOrTally(this.possibleLeftPairs,r),t.reverse();let i=this.decodePair(t,!0,e,n);ve.addOrTally(this.possibleRightPairs,i),t.reverse();for(let o of this.possibleLeftPairs)if(o.getCount()>1){for(let s of this.possibleRightPairs)if(s.getCount()>1&&ve.checkChecksum(o,s))return ve.constructResult(o,s)}throw new v}static addOrTally(e,t){if(t==null)return;let n=!1;for(let r of e)if(r.getValue()===t.getValue()){r.incrementCount(),n=!0;break}n||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let n=4537077*e.getValue()+t.getValue(),r=new String(n).toString(),i=new Ie;for(let c=13-r.length;c>0;c--)i.append("0");i.append(r);let o=0;for(let c=0;c<13;c++){let f=i.charAt(c).charCodeAt(0)-48;o+=c&1?f:3*f}o=10-o%10,o===10&&(o=0),i.append(o.toString());let s=e.getFinderPattern().getResultPoints(),a=t.getFinderPattern().getResultPoints();return new $e(i.toString(),null,0,[s[0],s[1],a[0],a[1]],q.RSS_14,new Date().getTime())}static checkChecksum(e,t){let n=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,r=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return r>72&&r--,r>8&&r--,n===r}decodePair(e,t,n,r){try{let i=this.findFinderPattern(e,t),o=this.parseFoundFinderPattern(e,n,t,i),s=r==null?null:r.get(ue.NEED_RESULT_POINT_CALLBACK);if(s!=null){let f=(i[0]+i[1])/2;t&&(f=e.getSize()-1-f),s.foundPossibleResultPoint(new j(f,n))}let a=this.decodeDataCharacter(e,o,!0),c=this.decodeDataCharacter(e,o,!1);return new co(1597*a.getValue()+c.getValue(),a.getChecksumPortion()+4*c.getChecksumPortion(),o)}catch{return null}}decodeDataCharacter(e,t,n){let r=this.getDataCharacterCounters();for(let b=0;b<r.length;b++)r[b]=0;if(n)Pe.recordPatternInReverse(e,t.getStartEnd()[0],r);else{Pe.recordPattern(e,t.getStartEnd()[1]+1,r);for(let b=0,M=r.length-1;b<M;b++,M--){let B=r[b];r[b]=r[M],r[M]=B}}let i=n?16:15,o=fe.sum(new Int32Array(r))/i,s=this.getOddCounts(),a=this.getEvenCounts(),c=this.getOddRoundingErrors(),f=this.getEvenRoundingErrors();for(let b=0;b<r.length;b++){let M=r[b]/o,B=Math.floor(M+.5);B<1?B=1:B>8&&(B=8);let V=Math.floor(b/2);b&1?(a[V]=B,f[V]=M-B):(s[V]=B,c[V]=M-B)}this.adjustOddEvenCounts(n,i);let m=0,w=0;for(let b=s.length-1;b>=0;b--)w*=9,w+=s[b],m+=s[b];let E=0,I=0;for(let b=a.length-1;b>=0;b--)E*=9,E+=a[b],I+=a[b];let S=w+3*E;if(n){if(m&1||m>12||m<4)throw new v;let b=(12-m)/2,M=ve.OUTSIDE_ODD_WIDEST[b],B=9-M,V=_t.getRSSvalue(s,M,!1),R=_t.getRSSvalue(a,B,!0),se=ve.OUTSIDE_EVEN_TOTAL_SUBSET[b],te=ve.OUTSIDE_GSUM[b];return new $t(V*se+R+te,S)}else{if(I&1||I>10||I<4)throw new v;let b=(10-I)/2,M=ve.INSIDE_ODD_WIDEST[b],B=9-M,V=_t.getRSSvalue(s,M,!0),R=_t.getRSSvalue(a,B,!1),se=ve.INSIDE_ODD_TOTAL_SUBSET[b],te=ve.INSIDE_GSUM[b];return new $t(R*se+V+te,S)}}findFinderPattern(e,t){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let r=e.getSize(),i=!1,o=0;for(;o<r&&(i=!e.get(o),t!==i);)o++;let s=0,a=o;for(let c=o;c<r;c++)if(e.get(c)!==i)n[s]++;else{if(s===3){if(Zt.isFinderPattern(n))return[a,c];a+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,s--}else s++;n[s]=1,i=!i}throw new v}parseFoundFinderPattern(e,t,n,r){let i=e.get(r[0]),o=r[0]-1;for(;o>=0&&i!==e.get(o);)o--;o++;let s=r[0]-o,a=this.getDecodeFinderCounters(),c=new Int32Array(a.length);Q.arraycopy(a,0,c,1,a.length-1),c[0]=s;let f=this.parseFinderValue(c,ve.FINDER_PATTERNS),m=o,w=r[1];return n&&(m=e.getSize()-1-m,w=e.getSize()-1-w),new vn(f,[o,r[1]],m,w,t)}adjustOddEvenCounts(e,t){let n=fe.sum(new Int32Array(this.getOddCounts())),r=fe.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1,s=!1,a=!1;e?(n>12?o=!0:n<4&&(i=!0),r>12?a=!0:r<4&&(s=!0)):(n>11?o=!0:n<5&&(i=!0),r>10?a=!0:r<4&&(s=!0));let c=n+r-t,f=(n&1)===(e?1:0),m=(r&1)===1;if(c===1)if(f){if(m)throw new v;o=!0}else{if(!m)throw new v;a=!0}else if(c===-1)if(f){if(m)throw new v;i=!0}else{if(!m)throw new v;s=!0}else if(c===0){if(f){if(!m)throw new v;n<r?(i=!0,a=!0):(o=!0,s=!0)}else if(m)throw new v}else throw new v;if(i){if(o)throw new v;Zt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&Zt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(a)throw new v;Zt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&Zt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ve.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],ve.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],ve.OUTSIDE_GSUM=[0,161,961,2015,2715],ve.INSIDE_GSUM=[0,336,1036,1516],ve.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],ve.INSIDE_ODD_WIDEST=[2,4,6,8],ve.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class nn extends Pe{constructor(e,t){super(),this.readers=[],this.verbose=t===!0;let n=e?e.get(ue.POSSIBLE_FORMATS):null,r=e&&e.get(ue.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;n?((n.includes(q.EAN_13)||n.includes(q.UPC_A)||n.includes(q.EAN_8)||n.includes(q.UPC_E))&&this.readers.push(new ar(e)),n.includes(q.CODE_39)&&this.readers.push(new or(r)),n.includes(q.CODE_128)&&this.readers.push(new U),n.includes(q.ITF)&&this.readers.push(new ye),n.includes(q.RSS_14)&&this.readers.push(new ve),n.includes(q.RSS_EXPANDED)&&this.readers.push(new L(this.verbose))):(this.readers.push(new ar(e)),this.readers.push(new or),this.readers.push(new ar(e)),this.readers.push(new U),this.readers.push(new ye),this.readers.push(new ve),this.readers.push(new L(this.verbose)))}decodeRow(e,t,n){for(let r=0;r<this.readers.length;r++)try{return this.readers[r].decodeRow(e,t,n)}catch{}throw new v}reset(){this.readers.forEach(e=>e.reset())}}class lo extends Yt{constructor(e=500,t){super(new nn(t),e,t)}}class Ae{constructor(e,t,n){this.ecCodewords=e,this.ecBlocks=[t],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ce{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ce{constructor(e,t,n,r,i,o){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=n,this.dataRegionSizeRows=r,this.dataRegionSizeColumns=i,this.ecBlocks=o;let s=0,a=o.getECCodewords(),c=o.getECBlocks();for(let f of c)s+=f.getCount()*(f.getDataCodewords()+a);this.totalCodewords=s}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if(e&1||t&1)throw new k;for(let n of ce.VERSIONS)if(n.symbolSizeRows===e&&n.symbolSizeColumns===t)return n;throw new k}toString(){return""+this.versionNumber}static buildVersions(){return[new ce(1,10,10,8,8,new Ae(5,new Ce(1,3))),new ce(2,12,12,10,10,new Ae(7,new Ce(1,5))),new ce(3,14,14,12,12,new Ae(10,new Ce(1,8))),new ce(4,16,16,14,14,new Ae(12,new Ce(1,12))),new ce(5,18,18,16,16,new Ae(14,new Ce(1,18))),new ce(6,20,20,18,18,new Ae(18,new Ce(1,22))),new ce(7,22,22,20,20,new Ae(20,new Ce(1,30))),new ce(8,24,24,22,22,new Ae(24,new Ce(1,36))),new ce(9,26,26,24,24,new Ae(28,new Ce(1,44))),new ce(10,32,32,14,14,new Ae(36,new Ce(1,62))),new ce(11,36,36,16,16,new Ae(42,new Ce(1,86))),new ce(12,40,40,18,18,new Ae(48,new Ce(1,114))),new ce(13,44,44,20,20,new Ae(56,new Ce(1,144))),new ce(14,48,48,22,22,new Ae(68,new Ce(1,174))),new ce(15,52,52,24,24,new Ae(42,new Ce(2,102))),new ce(16,64,64,14,14,new Ae(56,new Ce(2,140))),new ce(17,72,72,16,16,new Ae(36,new Ce(4,92))),new ce(18,80,80,18,18,new Ae(48,new Ce(4,114))),new ce(19,88,88,20,20,new Ae(56,new Ce(4,144))),new ce(20,96,96,22,22,new Ae(68,new Ce(4,174))),new ce(21,104,104,24,24,new Ae(56,new Ce(6,136))),new ce(22,120,120,18,18,new Ae(68,new Ce(6,175))),new ce(23,132,132,20,20,new Ae(62,new Ce(8,163))),new ce(24,144,144,22,22,new Ae(62,new Ce(8,156),new Ce(2,155))),new ce(25,8,18,6,16,new Ae(7,new Ce(1,5))),new ce(26,8,32,6,14,new Ae(11,new Ce(1,10))),new ce(27,12,26,10,24,new Ae(14,new Ce(1,16))),new ce(28,12,36,10,16,new Ae(18,new Ce(1,22))),new ce(29,16,36,14,16,new Ae(24,new Ce(1,32))),new ce(30,16,48,14,22,new Ae(28,new Ce(1,49)))]}}ce.VERSIONS=ce.buildVersions();class hr{constructor(e){let t=e.getHeight();if(t<8||t>144||t&1)throw new k;this.version=hr.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Ue(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){let t=e.getHeight(),n=e.getWidth();return ce.getVersionForDimensions(t,n)}readCodewords(){let e=new Int8Array(this.version.getTotalCodewords()),t=0,n=4,r=0,i=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth(),s=!1,a=!1,c=!1,f=!1;do if(n===i&&r===0&&!s)e[t++]=this.readCorner1(i,o)&255,n-=2,r+=2,s=!0;else if(n===i-2&&r===0&&o&3&&!a)e[t++]=this.readCorner2(i,o)&255,n-=2,r+=2,a=!0;else if(n===i+4&&r===2&&!(o&7)&&!c)e[t++]=this.readCorner3(i,o)&255,n-=2,r+=2,c=!0;else if(n===i-2&&r===0&&(o&7)===4&&!f)e[t++]=this.readCorner4(i,o)&255,n-=2,r+=2,f=!0;else{do n<i&&r>=0&&!this.readMappingMatrix.get(r,n)&&(e[t++]=this.readUtah(n,r,i,o)&255),n-=2,r+=2;while(n>=0&&r<o);n+=1,r+=3;do n>=0&&r<o&&!this.readMappingMatrix.get(r,n)&&(e[t++]=this.readUtah(n,r,i,o)&255),n+=2,r-=2;while(n<i&&r>=0);n+=3,r+=1}while(n<i||r<o);if(t!==this.version.getTotalCodewords())throw new k;return e}readModule(e,t,n,r){return e<0&&(e+=n,t+=4-(n+4&7)),t<0&&(t+=r,e+=4-(r+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,n,r){let i=0;return this.readModule(e-2,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-2,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e-1,t,n,r)&&(i|=1),i<<=1,this.readModule(e,t-2,n,r)&&(i|=1),i<<=1,this.readModule(e,t-1,n,r)&&(i|=1),i<<=1,this.readModule(e,t,n,r)&&(i|=1),i}readCorner1(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,1,e,t)&&(n|=1),n<<=1,this.readModule(e-1,2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}readCorner2(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-4,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner3(e,t){let n=0;return this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(0,t-3,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-3,e,t)&&(n|=1),n<<=1,this.readModule(1,t-2,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n}readCorner4(e,t){let n=0;return this.readModule(e-3,0,e,t)&&(n|=1),n<<=1,this.readModule(e-2,0,e,t)&&(n|=1),n<<=1,this.readModule(e-1,0,e,t)&&(n|=1),n<<=1,this.readModule(0,t-2,e,t)&&(n|=1),n<<=1,this.readModule(0,t-1,e,t)&&(n|=1),n<<=1,this.readModule(1,t-1,e,t)&&(n|=1),n<<=1,this.readModule(2,t-1,e,t)&&(n|=1),n<<=1,this.readModule(3,t-1,e,t)&&(n|=1),n}extractDataRegion(e){let t=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new C("Dimension of bitMatrix must match the version size");let r=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),o=t/r|0,s=n/i|0,a=o*r,c=s*i,f=new Ue(c,a);for(let m=0;m<o;++m){let w=m*r;for(let E=0;E<s;++E){let I=E*i;for(let S=0;S<r;++S){let b=m*(r+2)+1+S,M=w+S;for(let B=0;B<i;++B){let V=E*(i+2)+1+B;if(e.get(V,b)){let R=I+B;f.set(R,M)}}}}}return f}}class fr{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){let n=t.getECBlocks(),r=0,i=n.getECBlocks();for(let S of i)r+=S.getCount();let o=new Array(r),s=0;for(let S of i)for(let b=0;b<S.getCount();b++){let M=S.getDataCodewords(),B=n.getECCodewords()+M;o[s++]=new fr(M,new Uint8Array(B))}let c=o[0].codewords.length-n.getECCodewords(),f=c-1,m=0;for(let S=0;S<f;S++)for(let b=0;b<s;b++)o[b].codewords[S]=e[m++];let w=t.getVersionNumber()===24,E=w?8:s;for(let S=0;S<E;S++)o[S].codewords[c-1]=e[m++];let I=o[0].codewords.length;for(let S=c;S<I;S++)for(let b=0;b<s;b++){let M=w?(b+8)%s:b,B=w&&M>7?S-1:S;o[M].codewords[B]=e[m++]}if(m!==e.length)throw new C;return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class dr{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new C(""+e);let t=0,n=this.bitOffset,r=this.byteOffset,i=this.bytes;if(n>0){let o=8-n,s=e<o?e:o,a=o-s,c=255>>8-s<<a;t=(i[r]&c)>>a,e-=s,n+=s,n===8&&(n=0,r++)}if(e>0){for(;e>=8;)t=t<<8|i[r]&255,r++,e-=8;if(e>0){let o=8-e,s=255>>o<<o;t=t<<e|(i[r]&s)>>o,n+=e}}return this.bitOffset=n,this.byteOffset=r,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var ze=function(l){return l[l.PAD_ENCODE=0]="PAD_ENCODE",l[l.ASCII_ENCODE=1]="ASCII_ENCODE",l[l.C40_ENCODE=2]="C40_ENCODE",l[l.TEXT_ENCODE=3]="TEXT_ENCODE",l[l.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",l[l.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",l[l.BASE256_ENCODE=6]="BASE256_ENCODE",l}(ze||{});class Vt{static decode(e){let t=new dr(e),n=new Ie,r=new Ie,i=new Array,o=ze.ASCII_ENCODE;do if(o===ze.ASCII_ENCODE)o=this.decodeAsciiSegment(t,n,r);else{switch(o){case ze.C40_ENCODE:this.decodeC40Segment(t,n);break;case ze.TEXT_ENCODE:this.decodeTextSegment(t,n);break;case ze.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,n);break;case ze.EDIFACT_ENCODE:this.decodeEdifactSegment(t,n);break;case ze.BASE256_ENCODE:this.decodeBase256Segment(t,n,i);break;default:throw new k}o=ze.ASCII_ENCODE}while(o!==ze.PAD_ENCODE&&t.available()>0);return r.length()>0&&n.append(r.toString()),new gn(e,n.toString(),i.length===0?null:i,null)}static decodeAsciiSegment(e,t,n){let r=!1;do{let i=e.readBits(8);if(i===0)throw new k;if(i<=128)return r&&(i+=128),t.append(String.fromCharCode(i-1)),ze.ASCII_ENCODE;if(i===129)return ze.PAD_ENCODE;if(i<=229){let o=i-130;o<10&&t.append("0"),t.append(""+o)}else switch(i){case 230:return ze.C40_ENCODE;case 231:return ze.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:r=!0;break;case 236:t.append("[)>05"),n.insert(0,"");break;case 237:t.append("[)>06"),n.insert(0,"");break;case 238:return ze.ANSIX12_ENCODE;case 239:return ze.TEXT_ENCODE;case 240:return ze.EDIFACT_ENCODE;case 241:break;default:if(i!==254||e.available()!==0)throw new k;break}}while(e.available()>0);return ze.ASCII_ENCODE}static decodeC40Segment(e,t){let n=!1,r=[],i=0;do{if(e.available()===8)return;let o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),r);for(let s=0;s<3;s++){let a=r[s];switch(i){case 0:if(a<3)i=a+1;else if(a<this.C40_BASIC_SET_CHARS.length){let c=this.C40_BASIC_SET_CHARS[a];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else throw new k;break;case 1:n?(t.append(String.fromCharCode(a+128)),n=!1):t.append(String.fromCharCode(a)),i=0;break;case 2:if(a<this.C40_SHIFT2_SET_CHARS.length){let c=this.C40_SHIFT2_SET_CHARS[a];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else switch(a){case 27:t.append("");break;case 30:n=!0;break;default:throw new k}i=0;break;case 3:n?(t.append(String.fromCharCode(a+224)),n=!1):t.append(String.fromCharCode(a+96)),i=0;break;default:throw new k}}}while(e.available()>0)}static decodeTextSegment(e,t){let n=!1,r=[],i=0;do{if(e.available()===8)return;let o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),r);for(let s=0;s<3;s++){let a=r[s];switch(i){case 0:if(a<3)i=a+1;else if(a<this.TEXT_BASIC_SET_CHARS.length){let c=this.TEXT_BASIC_SET_CHARS[a];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else throw new k;break;case 1:n?(t.append(String.fromCharCode(a+128)),n=!1):t.append(String.fromCharCode(a)),i=0;break;case 2:if(a<this.TEXT_SHIFT2_SET_CHARS.length){let c=this.TEXT_SHIFT2_SET_CHARS[a];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c)}else switch(a){case 27:t.append("");break;case 30:n=!0;break;default:throw new k}i=0;break;case 3:if(a<this.TEXT_SHIFT3_SET_CHARS.length){let c=this.TEXT_SHIFT3_SET_CHARS[a];n?(t.append(String.fromCharCode(c.charCodeAt(0)+128)),n=!1):t.append(c),i=0}else throw new k;break;default:throw new k}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){let n=[];do{if(e.available()===8)return;let r=e.readBits(8);if(r===254)return;this.parseTwoBytes(r,e.readBits(8),n);for(let i=0;i<3;i++){let o=n[i];switch(o){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(o<14)t.append(String.fromCharCode(o+44));else if(o<40)t.append(String.fromCharCode(o+51));else throw new k;break}}}while(e.available()>0)}static parseTwoBytes(e,t,n){let r=(e<<8)+t-1,i=Math.floor(r/1600);n[0]=i,r-=i*1600,i=Math.floor(r/40),n[1]=i,n[2]=r-i*40}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let n=0;n<4;n++){let r=e.readBits(6);if(r===31){let i=8-e.getBitOffset();i!==8&&e.readBits(i);return}r&32||(r|=64),t.append(String.fromCharCode(r))}}while(e.available()>0)}static decodeBase256Segment(e,t,n){let r=1+e.getByteOffset(),i=this.unrandomize255State(e.readBits(8),r++),o;if(i===0?o=e.available()/8|0:i<250?o=i:o=250*(i-249)+this.unrandomize255State(e.readBits(8),r++),o<0)throw new k;let s=new Uint8Array(o);for(let a=0;a<o;a++){if(e.available()<8)throw new k;s[a]=this.unrandomize255State(e.readBits(8),r++)}n.push(s);try{t.append(rt.decode(s,ee.ISO88591))}catch(a){throw new Dt("Platform does not support required encoding: "+a.message)}}static unrandomize255State(e,t){let n=149*t%255+1,r=e-n;return r>=0?r:r+256}}Vt.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Vt.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Vt.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Vt.TEXT_SHIFT2_SET_CHARS=Vt.C40_SHIFT2_SET_CHARS,Vt.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~","\x7F"];class uo{constructor(){this.rsDecoder=new pn(me.DATA_MATRIX_FIELD_256)}decode(e){let t=new hr(e),n=t.getVersion(),r=t.readCodewords(),i=fr.getDataBlocks(r,n),o=0;for(let c of i)o+=c.getNumDataCodewords();let s=new Uint8Array(o),a=i.length;for(let c=0;c<a;c++){let f=i[c],m=f.getCodewords(),w=f.getNumDataCodewords();this.correctErrors(m,w);for(let E=0;E<w;E++)s[E*a+c]=m[E]}return Vt.decode(s)}correctErrors(e,t){let n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new P}for(let r=0;r<t;r++)e[r]=n[r]}}class Le{constructor(e){this.image=e,this.rectangleDetector=new Nn(this.image)}detect(){let e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new v;t=this.shiftToModuleCenter(t);let n=t[0],r=t[1],i=t[2],o=t[3],s=this.transitionsBetween(n,o)+1,a=this.transitionsBetween(i,o)+1;(s&1)===1&&(s+=1),(a&1)===1&&(a+=1),4*s<7*a&&4*a<7*s&&(s=a=Math.max(s,a));let c=Le.sampleGrid(this.image,n,r,i,o,s,a);return new On(c,[n,r,i,o])}static shiftPoint(e,t,n){let r=(t.getX()-e.getX())/(n+1),i=(t.getY()-e.getY())/(n+1);return new j(e.getX()+r,e.getY()+i)}static moveAway(e,t,n){let r=e.getX(),i=e.getY();return r<t?r-=1:r+=1,i<n?i-=1:i+=1,new j(r,i)}detectSolid1(e){let t=e[0],n=e[1],r=e[3],i=e[2],o=this.transitionsBetween(t,n),s=this.transitionsBetween(n,r),a=this.transitionsBetween(r,i),c=this.transitionsBetween(i,t),f=o,m=[i,t,n,r];return f>s&&(f=s,m[0]=t,m[1]=n,m[2]=r,m[3]=i),f>a&&(f=a,m[0]=n,m[1]=r,m[2]=i,m[3]=t),f>c&&(m[0]=r,m[1]=i,m[2]=t,m[3]=n),m}detectSolid2(e){let t=e[0],n=e[1],r=e[2],i=e[3],o=this.transitionsBetween(t,i),s=Le.shiftPoint(n,r,(o+1)*4),a=Le.shiftPoint(r,n,(o+1)*4),c=this.transitionsBetween(s,t),f=this.transitionsBetween(a,i);return c<f?(e[0]=t,e[1]=n,e[2]=r,e[3]=i):(e[0]=n,e[1]=r,e[2]=i,e[3]=t),e}correctTopRight(e){let t=e[0],n=e[1],r=e[2],i=e[3],o=this.transitionsBetween(t,i),s=this.transitionsBetween(n,i),a=Le.shiftPoint(t,n,(s+1)*4),c=Le.shiftPoint(r,n,(o+1)*4);o=this.transitionsBetween(a,i),s=this.transitionsBetween(c,i);let f=new j(i.getX()+(r.getX()-n.getX())/(o+1),i.getY()+(r.getY()-n.getY())/(o+1)),m=new j(i.getX()+(t.getX()-n.getX())/(s+1),i.getY()+(t.getY()-n.getY())/(s+1));if(!this.isValid(f))return this.isValid(m)?m:null;if(!this.isValid(m))return f;let w=this.transitionsBetween(a,f)+this.transitionsBetween(c,f),E=this.transitionsBetween(a,m)+this.transitionsBetween(c,m);return w>E?f:m}shiftToModuleCenter(e){let t=e[0],n=e[1],r=e[2],i=e[3],o=this.transitionsBetween(t,i)+1,s=this.transitionsBetween(r,i)+1,a=Le.shiftPoint(t,n,s*4),c=Le.shiftPoint(r,n,o*4);o=this.transitionsBetween(a,i)+1,s=this.transitionsBetween(c,i)+1,(o&1)===1&&(o+=1),(s&1)===1&&(s+=1);let f=(t.getX()+n.getX()+r.getX()+i.getX())/4,m=(t.getY()+n.getY()+r.getY()+i.getY())/4;t=Le.moveAway(t,f,m),n=Le.moveAway(n,f,m),r=Le.moveAway(r,f,m),i=Le.moveAway(i,f,m);let w,E;return a=Le.shiftPoint(t,n,s*4),a=Le.shiftPoint(a,i,o*4),w=Le.shiftPoint(n,t,s*4),w=Le.shiftPoint(w,r,o*4),c=Le.shiftPoint(r,i,s*4),c=Le.shiftPoint(c,n,o*4),E=Le.shiftPoint(i,r,s*4),E=Le.shiftPoint(E,t,o*4),[a,w,c,E]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,n,r,i,o,s){return kt.getInstance().sampleGrid(e,o,s,.5,.5,o-.5,.5,o-.5,s-.5,.5,s-.5,t.getX(),t.getY(),i.getX(),i.getY(),r.getX(),r.getY(),n.getX(),n.getY())}transitionsBetween(e,t){let n=Math.trunc(e.getX()),r=Math.trunc(e.getY()),i=Math.trunc(t.getX()),o=Math.trunc(t.getY()),s=Math.abs(o-r)>Math.abs(i-n);if(s){let S=n;n=r,r=S,S=i,i=o,o=S}let a=Math.abs(i-n),c=Math.abs(o-r),f=-a/2,m=r<o?1:-1,w=n<i?1:-1,E=0,I=this.image.get(s?r:n,s?n:r);for(let S=n,b=r;S!==i;S+=w){let M=this.image.get(s?b:S,s?S:b);if(M!==I&&(E++,I=M),f+=c,f>0){if(b===o)break;b+=m,f-=a}}return E}}let Bn=(()=>{class l{constructor(){this.decoder=new uo}decode(t,n=null){let r,i;if(n!=null&&n.has(ue.PURE_BARCODE)){let f=l.extractPureBits(t.getBlackMatrix());r=this.decoder.decode(f),i=l.NO_POINTS}else{let f=new Le(t.getBlackMatrix()).detect();r=this.decoder.decode(f.getBits()),i=f.getPoints()}let o=r.getRawBytes(),s=new $e(r.getText(),o,8*o.length,i,q.DATA_MATRIX,Q.currentTimeMillis()),a=r.getByteSegments();a!=null&&s.putMetadata(He.BYTE_SEGMENTS,a);let c=r.getECLevel();return c!=null&&s.putMetadata(He.ERROR_CORRECTION_LEVEL,c),s}reset(){}static extractPureBits(t){let n=t.getTopLeftOnBit(),r=t.getBottomRightOnBit();if(n==null||r==null)throw new v;let i=this.moduleSize(n,t),o=n[1],s=r[1],a=n[0],f=(r[0]-a+1)/i,m=(s-o+1)/i;if(f<=0||m<=0)throw new v;let w=i/2;o+=w,a+=w;let E=new Ue(f,m);for(let I=0;I<m;I++){let S=o+I*i;for(let b=0;b<f;b++)t.get(a+b*i,S)&&E.set(b,I)}return E}static moduleSize(t,n){let r=n.getWidth(),i=t[0],o=t[1];for(;i<r&&n.get(i,o);)i++;if(i===r)throw new v;let s=i-t[0];if(s===0)throw new v;return s}}return l.NO_POINTS=[],l})();class ho extends Yt{constructor(e=500){super(new Bn,e)}}var wn=function(l){return l[l.L=0]="L",l[l.M=1]="M",l[l.Q=2]="Q",l[l.H=3]="H",l}(wn||{});class Te{constructor(e,t,n){this.value=e,this.stringValue=t,this.bits=n,Te.FOR_BITS.set(n,this),Te.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Te.L;case"M":return Te.M;case"Q":return Te.Q;case"H":return Te.H;default:throw new N(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Te))return!1;let t=e;return this.value===t.value}static forBits(e){if(e<0||e>=Te.FOR_BITS.size)throw new C;return Te.FOR_BITS.get(e)}}Te.FOR_BITS=new Map,Te.FOR_VALUE=new Map,Te.L=new Te(wn.L,"L",1),Te.M=new Te(wn.M,"M",0),Te.Q=new Te(wn.Q,"Q",3),Te.H=new Te(wn.H,"H",2);class Qe{constructor(e){this.errorCorrectionLevel=Te.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,t){return W.bitCount(e^t)}static decodeFormatInformation(e,t){let n=Qe.doDecodeFormatInformation(e,t);return n!==null?n:Qe.doDecodeFormatInformation(e^Qe.FORMAT_INFO_MASK_QR,t^Qe.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let n=Number.MAX_SAFE_INTEGER,r=0;for(let i of Qe.FORMAT_INFO_DECODE_LOOKUP){let o=i[0];if(o===e||o===t)return new Qe(i[1]);let s=Qe.numBitsDiffering(e,o);s<n&&(r=i[1],n=s),e!==t&&(s=Qe.numBitsDiffering(t,o),s<n&&(r=i[1],n=s))}return n<=3?new Qe(r):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof Qe))return!1;let t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}Qe.FORMAT_INFO_MASK_QR=21522,Qe.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class _{constructor(e,...t){this.ecCodewordsPerBlock=e,this.ecBlocks=t}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0,t=this.ecBlocks;for(let n of t)e+=n.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class A{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class X{constructor(e,t,...n){this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=n;let r=0,i=n[0].getECCodewordsPerBlock(),o=n[0].getECBlocks();for(let s of o)r+=s.getCount()*(s.getDataCodewords()+i);this.totalCodewords=r}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new k;try{return this.getVersionForNumber((e-17)/4)}catch{throw new k}}static getVersionForNumber(e){if(e<1||e>40)throw new C;return X.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,n=0;for(let r=0;r<X.VERSION_DECODE_INFO.length;r++){let i=X.VERSION_DECODE_INFO[r];if(i===e)return X.getVersionForNumber(r+7);let o=Qe.numBitsDiffering(e,i);o<t&&(n=r+7,t=o)}return t<=3?X.getVersionForNumber(n):null}buildFunctionPattern(){let e=this.getDimensionForVersion(),t=new Ue(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);let n=this.alignmentPatternCenters.length;for(let r=0;r<n;r++){let i=this.alignmentPatternCenters[r]-2;for(let o=0;o<n;o++)r===0&&(o===0||o===n-1)||r===n-1&&o===0||t.setRegion(this.alignmentPatternCenters[o]-2,i,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}X.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),X.VERSIONS=[new X(1,new Int32Array(0),new _(7,new A(1,19)),new _(10,new A(1,16)),new _(13,new A(1,13)),new _(17,new A(1,9))),new X(2,Int32Array.from([6,18]),new _(10,new A(1,34)),new _(16,new A(1,28)),new _(22,new A(1,22)),new _(28,new A(1,16))),new X(3,Int32Array.from([6,22]),new _(15,new A(1,55)),new _(26,new A(1,44)),new _(18,new A(2,17)),new _(22,new A(2,13))),new X(4,Int32Array.from([6,26]),new _(20,new A(1,80)),new _(18,new A(2,32)),new _(26,new A(2,24)),new _(16,new A(4,9))),new X(5,Int32Array.from([6,30]),new _(26,new A(1,108)),new _(24,new A(2,43)),new _(18,new A(2,15),new A(2,16)),new _(22,new A(2,11),new A(2,12))),new X(6,Int32Array.from([6,34]),new _(18,new A(2,68)),new _(16,new A(4,27)),new _(24,new A(4,19)),new _(28,new A(4,15))),new X(7,Int32Array.from([6,22,38]),new _(20,new A(2,78)),new _(18,new A(4,31)),new _(18,new A(2,14),new A(4,15)),new _(26,new A(4,13),new A(1,14))),new X(8,Int32Array.from([6,24,42]),new _(24,new A(2,97)),new _(22,new A(2,38),new A(2,39)),new _(22,new A(4,18),new A(2,19)),new _(26,new A(4,14),new A(2,15))),new X(9,Int32Array.from([6,26,46]),new _(30,new A(2,116)),new _(22,new A(3,36),new A(2,37)),new _(20,new A(4,16),new A(4,17)),new _(24,new A(4,12),new A(4,13))),new X(10,Int32Array.from([6,28,50]),new _(18,new A(2,68),new A(2,69)),new _(26,new A(4,43),new A(1,44)),new _(24,new A(6,19),new A(2,20)),new _(28,new A(6,15),new A(2,16))),new X(11,Int32Array.from([6,30,54]),new _(20,new A(4,81)),new _(30,new A(1,50),new A(4,51)),new _(28,new A(4,22),new A(4,23)),new _(24,new A(3,12),new A(8,13))),new X(12,Int32Array.from([6,32,58]),new _(24,new A(2,92),new A(2,93)),new _(22,new A(6,36),new A(2,37)),new _(26,new A(4,20),new A(6,21)),new _(28,new A(7,14),new A(4,15))),new X(13,Int32Array.from([6,34,62]),new _(26,new A(4,107)),new _(22,new A(8,37),new A(1,38)),new _(24,new A(8,20),new A(4,21)),new _(22,new A(12,11),new A(4,12))),new X(14,Int32Array.from([6,26,46,66]),new _(30,new A(3,115),new A(1,116)),new _(24,new A(4,40),new A(5,41)),new _(20,new A(11,16),new A(5,17)),new _(24,new A(11,12),new A(5,13))),new X(15,Int32Array.from([6,26,48,70]),new _(22,new A(5,87),new A(1,88)),new _(24,new A(5,41),new A(5,42)),new _(30,new A(5,24),new A(7,25)),new _(24,new A(11,12),new A(7,13))),new X(16,Int32Array.from([6,26,50,74]),new _(24,new A(5,98),new A(1,99)),new _(28,new A(7,45),new A(3,46)),new _(24,new A(15,19),new A(2,20)),new _(30,new A(3,15),new A(13,16))),new X(17,Int32Array.from([6,30,54,78]),new _(28,new A(1,107),new A(5,108)),new _(28,new A(10,46),new A(1,47)),new _(28,new A(1,22),new A(15,23)),new _(28,new A(2,14),new A(17,15))),new X(18,Int32Array.from([6,30,56,82]),new _(30,new A(5,120),new A(1,121)),new _(26,new A(9,43),new A(4,44)),new _(28,new A(17,22),new A(1,23)),new _(28,new A(2,14),new A(19,15))),new X(19,Int32Array.from([6,30,58,86]),new _(28,new A(3,113),new A(4,114)),new _(26,new A(3,44),new A(11,45)),new _(26,new A(17,21),new A(4,22)),new _(26,new A(9,13),new A(16,14))),new X(20,Int32Array.from([6,34,62,90]),new _(28,new A(3,107),new A(5,108)),new _(26,new A(3,41),new A(13,42)),new _(30,new A(15,24),new A(5,25)),new _(28,new A(15,15),new A(10,16))),new X(21,Int32Array.from([6,28,50,72,94]),new _(28,new A(4,116),new A(4,117)),new _(26,new A(17,42)),new _(28,new A(17,22),new A(6,23)),new _(30,new A(19,16),new A(6,17))),new X(22,Int32Array.from([6,26,50,74,98]),new _(28,new A(2,111),new A(7,112)),new _(28,new A(17,46)),new _(30,new A(7,24),new A(16,25)),new _(24,new A(34,13))),new X(23,Int32Array.from([6,30,54,78,102]),new _(30,new A(4,121),new A(5,122)),new _(28,new A(4,47),new A(14,48)),new _(30,new A(11,24),new A(14,25)),new _(30,new A(16,15),new A(14,16))),new X(24,Int32Array.from([6,28,54,80,106]),new _(30,new A(6,117),new A(4,118)),new _(28,new A(6,45),new A(14,46)),new _(30,new A(11,24),new A(16,25)),new _(30,new A(30,16),new A(2,17))),new X(25,Int32Array.from([6,32,58,84,110]),new _(26,new A(8,106),new A(4,107)),new _(28,new A(8,47),new A(13,48)),new _(30,new A(7,24),new A(22,25)),new _(30,new A(22,15),new A(13,16))),new X(26,Int32Array.from([6,30,58,86,114]),new _(28,new A(10,114),new A(2,115)),new _(28,new A(19,46),new A(4,47)),new _(28,new A(28,22),new A(6,23)),new _(30,new A(33,16),new A(4,17))),new X(27,Int32Array.from([6,34,62,90,118]),new _(30,new A(8,122),new A(4,123)),new _(28,new A(22,45),new A(3,46)),new _(30,new A(8,23),new A(26,24)),new _(30,new A(12,15),new A(28,16))),new X(28,Int32Array.from([6,26,50,74,98,122]),new _(30,new A(3,117),new A(10,118)),new _(28,new A(3,45),new A(23,46)),new _(30,new A(4,24),new A(31,25)),new _(30,new A(11,15),new A(31,16))),new X(29,Int32Array.from([6,30,54,78,102,126]),new _(30,new A(7,116),new A(7,117)),new _(28,new A(21,45),new A(7,46)),new _(30,new A(1,23),new A(37,24)),new _(30,new A(19,15),new A(26,16))),new X(30,Int32Array.from([6,26,52,78,104,130]),new _(30,new A(5,115),new A(10,116)),new _(28,new A(19,47),new A(10,48)),new _(30,new A(15,24),new A(25,25)),new _(30,new A(23,15),new A(25,16))),new X(31,Int32Array.from([6,30,56,82,108,134]),new _(30,new A(13,115),new A(3,116)),new _(28,new A(2,46),new A(29,47)),new _(30,new A(42,24),new A(1,25)),new _(30,new A(23,15),new A(28,16))),new X(32,Int32Array.from([6,34,60,86,112,138]),new _(30,new A(17,115)),new _(28,new A(10,46),new A(23,47)),new _(30,new A(10,24),new A(35,25)),new _(30,new A(19,15),new A(35,16))),new X(33,Int32Array.from([6,30,58,86,114,142]),new _(30,new A(17,115),new A(1,116)),new _(28,new A(14,46),new A(21,47)),new _(30,new A(29,24),new A(19,25)),new _(30,new A(11,15),new A(46,16))),new X(34,Int32Array.from([6,34,62,90,118,146]),new _(30,new A(13,115),new A(6,116)),new _(28,new A(14,46),new A(23,47)),new _(30,new A(44,24),new A(7,25)),new _(30,new A(59,16),new A(1,17))),new X(35,Int32Array.from([6,30,54,78,102,126,150]),new _(30,new A(12,121),new A(7,122)),new _(28,new A(12,47),new A(26,48)),new _(30,new A(39,24),new A(14,25)),new _(30,new A(22,15),new A(41,16))),new X(36,Int32Array.from([6,24,50,76,102,128,154]),new _(30,new A(6,121),new A(14,122)),new _(28,new A(6,47),new A(34,48)),new _(30,new A(46,24),new A(10,25)),new _(30,new A(2,15),new A(64,16))),new X(37,Int32Array.from([6,28,54,80,106,132,158]),new _(30,new A(17,122),new A(4,123)),new _(28,new A(29,46),new A(14,47)),new _(30,new A(49,24),new A(10,25)),new _(30,new A(24,15),new A(46,16))),new X(38,Int32Array.from([6,32,58,84,110,136,162]),new _(30,new A(4,122),new A(18,123)),new _(28,new A(13,46),new A(32,47)),new _(30,new A(48,24),new A(14,25)),new _(30,new A(42,15),new A(32,16))),new X(39,Int32Array.from([6,26,54,82,110,138,166]),new _(30,new A(20,117),new A(4,118)),new _(28,new A(40,47),new A(7,48)),new _(30,new A(43,24),new A(22,25)),new _(30,new A(10,15),new A(67,16))),new X(40,Int32Array.from([6,30,58,86,114,142,170]),new _(30,new A(19,118),new A(6,119)),new _(28,new A(18,47),new A(31,48)),new _(30,new A(34,24),new A(34,25)),new _(30,new A(20,15),new A(61,16)))];var Ge=function(l){return l[l.DATA_MASK_000=0]="DATA_MASK_000",l[l.DATA_MASK_001=1]="DATA_MASK_001",l[l.DATA_MASK_010=2]="DATA_MASK_010",l[l.DATA_MASK_011=3]="DATA_MASK_011",l[l.DATA_MASK_100=4]="DATA_MASK_100",l[l.DATA_MASK_101=5]="DATA_MASK_101",l[l.DATA_MASK_110=6]="DATA_MASK_110",l[l.DATA_MASK_111=7]="DATA_MASK_111",l}(Ge||{});class xt{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let n=0;n<t;n++)for(let r=0;r<t;r++)this.isMasked(n,r)&&e.flip(r,n)}}xt.values=new Map([[Ge.DATA_MASK_000,new xt(Ge.DATA_MASK_000,(l,e)=>(l+e&1)===0)],[Ge.DATA_MASK_001,new xt(Ge.DATA_MASK_001,(l,e)=>(l&1)===0)],[Ge.DATA_MASK_010,new xt(Ge.DATA_MASK_010,(l,e)=>e%3===0)],[Ge.DATA_MASK_011,new xt(Ge.DATA_MASK_011,(l,e)=>(l+e)%3===0)],[Ge.DATA_MASK_100,new xt(Ge.DATA_MASK_100,(l,e)=>(Math.floor(l/2)+Math.floor(e/3)&1)===0)],[Ge.DATA_MASK_101,new xt(Ge.DATA_MASK_101,(l,e)=>l*e%6===0)],[Ge.DATA_MASK_110,new xt(Ge.DATA_MASK_110,(l,e)=>l*e%6<3)],[Ge.DATA_MASK_111,new xt(Ge.DATA_MASK_111,(l,e)=>(l+e+l*e%3&1)===0)]]);class fo{constructor(e){let t=e.getHeight();if(t<21||(t&3)!==1)throw new k;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let i=0;i<6;i++)e=this.copyBit(i,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let i=5;i>=0;i--)e=this.copyBit(8,i,e);let t=this.bitMatrix.getHeight(),n=0,r=t-7;for(let i=t-1;i>=r;i--)n=this.copyBit(8,i,n);for(let i=t-8;i<t;i++)n=this.copyBit(i,8,n);if(this.parsedFormatInfo=Qe.decodeFormatInformation(e,n),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new k}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;let e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return X.getVersionForNumber(t);let n=0,r=e-11;for(let o=5;o>=0;o--)for(let s=e-9;s>=r;s--)n=this.copyBit(s,o,n);let i=X.decodeVersionInformation(n);if(i!==null&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;n=0;for(let o=5;o>=0;o--)for(let s=e-9;s>=r;s--)n=this.copyBit(o,s,n);if(i=X.decodeVersionInformation(n),i!==null&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;throw new k}copyBit(e,t,n){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?n<<1|1:n<<1}readCodewords(){let e=this.readFormatInformation(),t=this.readVersion(),n=xt.values.get(e.getDataMask()),r=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,r);let i=t.buildFunctionPattern(),o=!0,s=new Uint8Array(t.getTotalCodewords()),a=0,c=0,f=0;for(let m=r-1;m>0;m-=2){m===6&&m--;for(let w=0;w<r;w++){let E=o?r-1-w:w;for(let I=0;I<2;I++)i.get(m-I,E)||(f++,c<<=1,this.bitMatrix.get(m-I,E)&&(c|=1),f===8&&(s[a++]=c,f=0,c=0))}o=!o}if(a!==t.getTotalCodewords())throw new k;return s}remask(){if(this.parsedFormatInfo===null)return;let e=xt.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){let e=this.bitMatrix;for(let t=0,n=e.getWidth();t<n;t++)for(let r=t+1,i=e.getHeight();r<i;r++)e.get(t,r)!==e.get(r,t)&&(e.flip(r,t),e.flip(t,r))}}class gr{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,n){if(e.length!==t.getTotalCodewords())throw new C;let r=t.getECBlocksForLevel(n),i=0,o=r.getECBlocks();for(let I of o)i+=I.getCount();let s=new Array(i),a=0;for(let I of o)for(let S=0;S<I.getCount();S++){let b=I.getDataCodewords(),M=r.getECCodewordsPerBlock()+b;s[a++]=new gr(b,new Uint8Array(M))}let c=s[0].codewords.length,f=s.length-1;for(;f>=0&&s[f].codewords.length!==c;)f--;f++;let m=c-r.getECCodewordsPerBlock(),w=0;for(let I=0;I<m;I++)for(let S=0;S<a;S++)s[S].codewords[I]=e[w++];for(let I=f;I<a;I++)s[I].codewords[m]=e[w++];let E=s[0].codewords.length;for(let I=m;I<E;I++)for(let S=0;S<a;S++){let b=S<f?I:I+1;s[S].codewords[b]=e[w++]}return s}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var yt=function(l){return l[l.TERMINATOR=0]="TERMINATOR",l[l.NUMERIC=1]="NUMERIC",l[l.ALPHANUMERIC=2]="ALPHANUMERIC",l[l.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",l[l.BYTE=4]="BYTE",l[l.ECI=5]="ECI",l[l.KANJI=6]="KANJI",l[l.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",l[l.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",l[l.HANZI=9]="HANZI",l}(yt||{});class Y{constructor(e,t,n,r){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=n,this.bits=r,Y.FOR_BITS.set(r,this),Y.FOR_VALUE.set(e,this)}static forBits(e){let t=Y.FOR_BITS.get(e);if(t===void 0)throw new C;return t}getCharacterCountBits(e){let t=e.getVersionNumber(),n;return t<=9?n=0:t<=26?n=1:n=2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof Y))return!1;let t=e;return this.value===t.value}toString(){return this.stringValue}}Y.FOR_BITS=new Map,Y.FOR_VALUE=new Map,Y.TERMINATOR=new Y(yt.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Y.NUMERIC=new Y(yt.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Y.ALPHANUMERIC=new Y(yt.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Y.STRUCTURED_APPEND=new Y(yt.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Y.BYTE=new Y(yt.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Y.ECI=new Y(yt.ECI,"ECI",Int32Array.from([0,0,0]),7),Y.KANJI=new Y(yt.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Y.FNC1_FIRST_POSITION=new Y(yt.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Y.FNC1_SECOND_POSITION=new Y(yt.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Y.HANZI=new Y(yt.HANZI,"HANZI",Int32Array.from([8,10,12]),13);let Xr=(()=>{class l{static decode(t,n,r,i){let o=new dr(t),s=new Ie,a=new Array,c=-1,f=-1;try{let m=null,w=!1,E;do{if(o.available()<4)E=Y.TERMINATOR;else{let I=o.readBits(4);E=Y.forBits(I)}switch(E){case Y.TERMINATOR:break;case Y.FNC1_FIRST_POSITION:case Y.FNC1_SECOND_POSITION:w=!0;break;case Y.STRUCTURED_APPEND:if(o.available()<16)throw new k;c=o.readBits(8),f=o.readBits(8);break;case Y.ECI:let I=l.parseECIValue(o);if(m=F.getCharacterSetECIByValue(I),m===null)throw new k;break;case Y.HANZI:let S=o.readBits(4),b=o.readBits(E.getCharacterCountBits(n));S===l.GB2312_SUBSET&&l.decodeHanziSegment(o,s,b);break;default:let M=o.readBits(E.getCharacterCountBits(n));switch(E){case Y.NUMERIC:l.decodeNumericSegment(o,s,M);break;case Y.ALPHANUMERIC:l.decodeAlphanumericSegment(o,s,M,w);break;case Y.BYTE:l.decodeByteSegment(o,s,M,m,a,i);break;case Y.KANJI:l.decodeKanjiSegment(o,s,M);break;default:throw new k}break}}while(E!==Y.TERMINATOR)}catch{throw new k}return new gn(t,s.toString(),a.length===0?null:a,r===null?null:r.toString(),c,f)}static decodeHanziSegment(t,n,r){if(r*13>t.available())throw new k;let i=new Uint8Array(2*r),o=0;for(;r>0;){let s=t.readBits(13),a=s/96<<8&4294967295|s%96;a<959?a+=41377:a+=42657,i[o]=a>>8&255,i[o+1]=a&255,o+=2,r--}try{n.append(rt.decode(i,ee.GB2312))}catch(s){throw new k(s)}}static decodeKanjiSegment(t,n,r){if(r*13>t.available())throw new k;let i=new Uint8Array(2*r),o=0;for(;r>0;){let s=t.readBits(13),a=s/192<<8&4294967295|s%192;a<7936?a+=33088:a+=49472,i[o]=a>>8,i[o+1]=a,o+=2,r--}try{n.append(rt.decode(i,ee.SHIFT_JIS))}catch(s){throw new k(s)}}static decodeByteSegment(t,n,r,i,o,s){if(8*r>t.available())throw new k;let a=new Uint8Array(r);for(let f=0;f<r;f++)a[f]=t.readBits(8);let c;i===null?c=ee.guessEncoding(a,s):c=i.getName();try{n.append(rt.decode(a,c))}catch(f){throw new k(f)}o.push(a)}static toAlphaNumericChar(t){if(t>=l.ALPHANUMERIC_CHARS.length)throw new k;return l.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,n,r,i){let o=n.length();for(;r>1;){if(t.available()<11)throw new k;let s=t.readBits(11);n.append(l.toAlphaNumericChar(Math.floor(s/45))),n.append(l.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(t.available()<6)throw new k;n.append(l.toAlphaNumericChar(t.readBits(6)))}if(i)for(let s=o;s<n.length();s++)n.charAt(s)==="%"&&(s<n.length()-1&&n.charAt(s+1)==="%"?n.deleteCharAt(s+1):n.setCharAt(s,""))}static decodeNumericSegment(t,n,r){for(;r>=3;){if(t.available()<10)throw new k;let i=t.readBits(10);if(i>=1e3)throw new k;n.append(l.toAlphaNumericChar(Math.floor(i/100))),n.append(l.toAlphaNumericChar(Math.floor(i/10)%10)),n.append(l.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(t.available()<7)throw new k;let i=t.readBits(7);if(i>=100)throw new k;n.append(l.toAlphaNumericChar(Math.floor(i/10))),n.append(l.toAlphaNumericChar(i%10))}else if(r===1){if(t.available()<4)throw new k;let i=t.readBits(4);if(i>=10)throw new k;n.append(l.toAlphaNumericChar(i))}}static parseECIValue(t){let n=t.readBits(8);if(!(n&128))return n&127;if((n&192)===128){let r=t.readBits(8);return(n&63)<<8&4294967295|r}if((n&224)===192){let r=t.readBits(16);return(n&31)<<16&4294967295|r}throw new k}}return l.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",l.GB2312_SUBSET=1,l})();class Wr{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;let t=e[0];e[0]=e[2],e[2]=t}}class go{constructor(){this.rsDecoder=new pn(me.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(Ue.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){let n=new fo(e),r=null;try{return this.decodeBitMatrixParser(n,t)}catch(i){r=i}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();let i=this.decodeBitMatrixParser(n,t);return i.setOther(new Wr(!0)),i}catch(i){throw r!==null?r:i}}decodeBitMatrixParser(e,t){let n=e.readVersion(),r=e.readFormatInformation().getErrorCorrectionLevel(),i=e.readCodewords(),o=gr.getDataBlocks(i,n,r),s=0;for(let f of o)s+=f.getNumDataCodewords();let a=new Uint8Array(s),c=0;for(let f of o){let m=f.getCodewords(),w=f.getNumDataCodewords();this.correctErrors(m,w);for(let E=0;E<w;E++)a[c++]=m[E]}return Xr.decode(a,n,r,t)}correctErrors(e,t){let n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-t)}catch{throw new P}for(let r=0;r<t;r++)e[r]=n[r]}}class xr extends j{constructor(e,t,n){super(e,t),this.estimatedModuleSize=n}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){let r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){let r=(this.getX()+t)/2,i=(this.getY()+e)/2,o=(this.estimatedModuleSize+n)/2;return new xr(r,i,o)}}class Pn{constructor(e,t,n,r,i,o,s){this.image=e,this.startX=t,this.startY=n,this.width=r,this.height=i,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){let e=this.startX,t=this.height,n=this.width,r=e+n,i=this.startY+t/2,o=new Int32Array(3),s=this.image;for(let a=0;a<t;a++){let c=i+(a&1?-Math.floor((a+1)/2):Math.floor((a+1)/2));o[0]=0,o[1]=0,o[2]=0;let f=e;for(;f<r&&!s.get(f,c);)f++;let m=0;for(;f<r;){if(s.get(f,c))if(m===1)o[1]++;else if(m===2){if(this.foundPatternCross(o)){let w=this.handlePossibleCenter(o,c,f);if(w!==null)return w}o[0]=o[2],o[1]=1,o[2]=0,m=1}else o[++m]++;else m===1&&m++,o[m]++;f++}if(this.foundPatternCross(o)){let w=this.handlePossibleCenter(o,c,r);if(w!==null)return w}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new v}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){let t=this.moduleSize,n=t/2;for(let r=0;r<3;r++)if(Math.abs(t-e[r])>=n)return!1;return!0}crossCheckVertical(e,t,n,r){let i=this.image,o=i.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;let a=e;for(;a>=0&&i.get(t,a)&&s[1]<=n;)s[1]++,a--;if(a<0||s[1]>n)return NaN;for(;a>=0&&!i.get(t,a)&&s[0]<=n;)s[0]++,a--;if(s[0]>n)return NaN;for(a=e+1;a<o&&i.get(t,a)&&s[1]<=n;)s[1]++,a++;if(a===o||s[1]>n)return NaN;for(;a<o&&!i.get(t,a)&&s[2]<=n;)s[2]++,a++;if(s[2]>n)return NaN;let c=s[0]+s[1]+s[2];return 5*Math.abs(c-r)>=2*r?NaN:this.foundPatternCross(s)?Pn.centerFromEnd(s,a):NaN}handlePossibleCenter(e,t,n){let r=e[0]+e[1]+e[2],i=Pn.centerFromEnd(e,n),o=this.crossCheckVertical(t,i,2*e[1],r);if(!isNaN(o)){let s=(e[0]+e[1]+e[2])/3;for(let c of this.possibleCenters)if(c.aboutEquals(s,o,i))return c.combineEstimate(o,i,s);let a=new xr(i,o,s);this.possibleCenters.push(a),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(a)}return null}}class mr extends j{constructor(e,t,n,r){super(e,t),this.estimatedModuleSize=n,this.count=r,r===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,n){if(Math.abs(t-this.getY())<=e&&Math.abs(n-this.getX())<=e){let r=Math.abs(e-this.estimatedModuleSize);return r<=1||r<=this.estimatedModuleSize}return!1}combineEstimate(e,t,n){let r=this.count+1,i=(this.count*this.getX()+t)/r,o=(this.count*this.getY()+e)/r,s=(this.count*this.estimatedModuleSize+n)/r;return new mr(i,o,s,r)}}class xo{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}let mo=(()=>{class l{constructor(t,n){this.image=t,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){let n=t!=null&&t.get(ue.TRY_HARDER)!==void 0,r=t!=null&&t.get(ue.PURE_BARCODE)!==void 0,i=this.image,o=i.getHeight(),s=i.getWidth(),a=Math.floor(3*o/(4*l.MAX_MODULES));(a<l.MIN_SKIP||n)&&(a=l.MIN_SKIP);let c=!1,f=new Int32Array(5);for(let w=a-1;w<o&&!c;w+=a){f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0;let E=0;for(let I=0;I<s;I++)if(i.get(I,w))(E&1)===1&&E++,f[E]++;else if(E&1)f[E]++;else if(E===4)if(l.foundPatternCross(f)){if(this.handlePossibleCenter(f,w,I,r)===!0)if(a=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{let b=this.findRowSkip();b>f[2]&&(w+=b-f[2]-a,I=s-1)}else{f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,E=3;continue}E=0,f[0]=0,f[1]=0,f[2]=0,f[3]=0,f[4]=0}else f[0]=f[2],f[1]=f[3],f[2]=f[4],f[3]=1,f[4]=0,E=3;else f[++E]++;l.foundPatternCross(f)&&this.handlePossibleCenter(f,w,s,r)===!0&&(a=f[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}let m=this.selectBestPatterns();return j.orderBestPatterns(m),new xo(m)}static centerFromEnd(t,n){return n-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let n=0;for(let o=0;o<5;o++){let s=t[o];if(s===0)return!1;n+=s}if(n<7)return!1;let r=n/7,i=r/2;return Math.abs(r-t[0])<i&&Math.abs(r-t[1])<i&&Math.abs(3*r-t[2])<3*i&&Math.abs(r-t[3])<i&&Math.abs(r-t[4])<i}getCrossCheckStateCount(){let t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,n,r,i){let o=this.getCrossCheckStateCount(),s=0,a=this.image;for(;t>=s&&n>=s&&a.get(n-s,t-s);)o[2]++,s++;if(t<s||n<s)return!1;for(;t>=s&&n>=s&&!a.get(n-s,t-s)&&o[1]<=r;)o[1]++,s++;if(t<s||n<s||o[1]>r)return!1;for(;t>=s&&n>=s&&a.get(n-s,t-s)&&o[0]<=r;)o[0]++,s++;if(o[0]>r)return!1;let c=a.getHeight(),f=a.getWidth();for(s=1;t+s<c&&n+s<f&&a.get(n+s,t+s);)o[2]++,s++;if(t+s>=c||n+s>=f)return!1;for(;t+s<c&&n+s<f&&!a.get(n+s,t+s)&&o[3]<r;)o[3]++,s++;if(t+s>=c||n+s>=f||o[3]>=r)return!1;for(;t+s<c&&n+s<f&&a.get(n+s,t+s)&&o[4]<r;)o[4]++,s++;if(o[4]>=r)return!1;let m=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(m-i)<2*i&&l.foundPatternCross(o)}crossCheckVertical(t,n,r,i){let o=this.image,s=o.getHeight(),a=this.getCrossCheckStateCount(),c=t;for(;c>=0&&o.get(n,c);)a[2]++,c--;if(c<0)return NaN;for(;c>=0&&!o.get(n,c)&&a[1]<=r;)a[1]++,c--;if(c<0||a[1]>r)return NaN;for(;c>=0&&o.get(n,c)&&a[0]<=r;)a[0]++,c--;if(a[0]>r)return NaN;for(c=t+1;c<s&&o.get(n,c);)a[2]++,c++;if(c===s)return NaN;for(;c<s&&!o.get(n,c)&&a[3]<r;)a[3]++,c++;if(c===s||a[3]>=r)return NaN;for(;c<s&&o.get(n,c)&&a[4]<r;)a[4]++,c++;if(a[4]>=r)return NaN;let f=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(f-i)>=2*i?NaN:l.foundPatternCross(a)?l.centerFromEnd(a,c):NaN}crossCheckHorizontal(t,n,r,i){let o=this.image,s=o.getWidth(),a=this.getCrossCheckStateCount(),c=t;for(;c>=0&&o.get(c,n);)a[2]++,c--;if(c<0)return NaN;for(;c>=0&&!o.get(c,n)&&a[1]<=r;)a[1]++,c--;if(c<0||a[1]>r)return NaN;for(;c>=0&&o.get(c,n)&&a[0]<=r;)a[0]++,c--;if(a[0]>r)return NaN;for(c=t+1;c<s&&o.get(c,n);)a[2]++,c++;if(c===s)return NaN;for(;c<s&&!o.get(c,n)&&a[3]<r;)a[3]++,c++;if(c===s||a[3]>=r)return NaN;for(;c<s&&o.get(c,n)&&a[4]<r;)a[4]++,c++;if(a[4]>=r)return NaN;let f=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(f-i)>=i?NaN:l.foundPatternCross(a)?l.centerFromEnd(a,c):NaN}handlePossibleCenter(t,n,r,i){let o=t[0]+t[1]+t[2]+t[3]+t[4],s=l.centerFromEnd(t,r),a=this.crossCheckVertical(n,Math.floor(s),t[2],o);if(!isNaN(a)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(a),t[2],o),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(a),Math.floor(s),t[2],o)))){let c=o/7,f=!1,m=this.possibleCenters;for(let w=0,E=m.length;w<E;w++){let I=m[w];if(I.aboutEquals(c,a,s)){m[w]=I.combineEstimate(a,s,c),f=!0;break}}if(!f){let w=new mr(s,a,c);m.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let n=null;for(let r of this.possibleCenters)if(r.getCount()>=l.CENTER_QUORUM)if(n==null)n=r;else return this.hasSkipped=!0,Math.floor((Math.abs(n.getX()-r.getX())-Math.abs(n.getY()-r.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,n=0,r=this.possibleCenters.length;for(let s of this.possibleCenters)s.getCount()>=l.CENTER_QUORUM&&(t++,n+=s.getEstimatedModuleSize());if(t<3)return!1;let i=n/r,o=0;for(let s of this.possibleCenters)o+=Math.abs(s.getEstimatedModuleSize()-i);return o<=.05*n}selectBestPatterns(){let t=this.possibleCenters.length;if(t<3)throw new v;let n=this.possibleCenters,r;if(t>3){let i=0,o=0;for(let c of this.possibleCenters){let f=c.getEstimatedModuleSize();i+=f,o+=f*f}r=i/t;let s=Math.sqrt(o/t-r*r);n.sort((c,f)=>{let m=Math.abs(f.getEstimatedModuleSize()-r),w=Math.abs(c.getEstimatedModuleSize()-r);return m<w?-1:m>w?1:0});let a=Math.max(.2*r,s);for(let c=0;c<n.length&&n.length>3;c++){let f=n[c];Math.abs(f.getEstimatedModuleSize()-r)>a&&(n.splice(c,1),c--)}}if(n.length>3){let i=0;for(let o of n)i+=o.getEstimatedModuleSize();r=i/n.length,n.sort((o,s)=>{if(s.getCount()===o.getCount()){let a=Math.abs(s.getEstimatedModuleSize()-r),c=Math.abs(o.getEstimatedModuleSize()-r);return a<c?1:a>c?-1:0}else return s.getCount()-o.getCount()}),n.splice(3)}return[n[0],n[1],n[2]]}}return l.CENTER_QUORUM=2,l.MIN_SKIP=3,l.MAX_MODULES=57,l})();class An{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(ue.NEED_RESULT_POINT_CALLBACK);let n=new mo(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(n)}processFinderPatternInfo(e){let t=e.getTopLeft(),n=e.getTopRight(),r=e.getBottomLeft(),i=this.calculateModuleSize(t,n,r);if(i<1)throw new v("No pattern found in proccess finder.");let o=An.computeDimension(t,n,r,i),s=X.getProvisionalVersionForDimension(o),a=s.getDimensionForVersion()-7,c=null;if(s.getAlignmentPatternCenters().length>0){let E=n.getX()-t.getX()+r.getX(),I=n.getY()-t.getY()+r.getY(),S=1-3/a,b=Math.floor(t.getX()+S*(E-t.getX())),M=Math.floor(t.getY()+S*(I-t.getY()));for(let B=4;B<=16;B<<=1)try{c=this.findAlignmentInRegion(i,b,M,B);break}catch(V){if(!(V instanceof v))throw V}}let f=An.createTransform(t,n,r,c,o),m=An.sampleGrid(this.image,f,o),w;return c===null?w=[r,t,n]:w=[r,t,n,c],new On(m,w)}static createTransform(e,t,n,r,i){let o=i-3.5,s,a,c,f;return r!==null?(s=r.getX(),a=r.getY(),c=o-3,f=c):(s=t.getX()-e.getX()+n.getX(),a=t.getY()-e.getY()+n.getY(),c=o,f=o),wt.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,c,f,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),s,a,n.getX(),n.getY())}static sampleGrid(e,t,n){return kt.getInstance().sampleGridWithTransform(e,n,n,t)}static computeDimension(e,t,n,r){let i=fe.round(j.distance(e,t)/r),o=fe.round(j.distance(e,n)/r),s=Math.floor((i+o)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new v("Dimensions could be not found.")}return s}calculateModuleSize(e,t,n){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,n))/2}calculateModuleSizeOneWay(e,t){let n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?r/7:isNaN(r)?n/7:(n+r)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,n,r){let i=this.sizeOfBlackWhiteBlackRun(e,t,n,r),o=1,s=e-(n-e);s<0?(o=e/(e-s),s=0):s>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);let a=Math.floor(t-(r-t)*o);return o=1,a<0?(o=t/(t-a),a=0):a>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(a-t),a=this.image.getHeight()-1),s=Math.floor(e+(s-e)*o),i+=this.sizeOfBlackWhiteBlackRun(e,t,s,a),i-1}sizeOfBlackWhiteBlackRun(e,t,n,r){let i=Math.abs(r-t)>Math.abs(n-e);if(i){let E=e;e=t,t=E,E=n,n=r,r=E}let o=Math.abs(n-e),s=Math.abs(r-t),a=-o/2,c=e<n?1:-1,f=t<r?1:-1,m=0,w=n+c;for(let E=e,I=t;E!==w;E+=c){let S=i?I:E,b=i?E:I;if(m===1===this.image.get(S,b)){if(m===2)return fe.distance(E,I,e,t);m++}if(a+=s,a>0){if(I===r)break;I+=f,a-=o}}return m===2?fe.distance(n+c,r,e,t):NaN}findAlignmentInRegion(e,t,n,r){let i=Math.floor(r*e),o=Math.max(0,t-i),s=Math.min(this.image.getWidth()-1,t+i);if(s-o<e*3)throw new v("Alignment top exceeds estimated module size.");let a=Math.max(0,n-i),c=Math.min(this.image.getHeight()-1,n+i);if(c-a<e*3)throw new v("Alignment bottom exceeds estimated module size.");return new Pn(this.image,o,a,s-o,c-a,e,this.resultPointCallback).find()}}class Ht{constructor(){this.decoder=new go}getDecoder(){return this.decoder}decode(e,t){let n,r;if(t!=null&&t.get(ue.PURE_BARCODE)!==void 0){let a=Ht.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(a,t),r=Ht.NO_POINTS}else{let a=new An(e.getBlackMatrix()).detect(t);n=this.decoder.decodeBitMatrix(a.getBits(),t),r=a.getPoints()}n.getOther()instanceof Wr&&n.getOther().applyMirroredCorrection(r);let i=new $e(n.getText(),n.getRawBytes(),void 0,r,q.QR_CODE,void 0),o=n.getByteSegments();o!==null&&i.putMetadata(He.BYTE_SEGMENTS,o);let s=n.getECLevel();return s!==null&&i.putMetadata(He.ERROR_CORRECTION_LEVEL,s),n.hasStructuredAppend()&&(i.putMetadata(He.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),i.putMetadata(He.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),i}reset(){}static extractPureBits(e){let t=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(t===null||n===null)throw new v;let r=this.moduleSize(t,e),i=t[1],o=n[1],s=t[0],a=n[0];if(s>=a||i>=o)throw new v;if(o-i!==a-s&&(a=s+(o-i),a>=e.getWidth()))throw new v;let c=Math.round((a-s+1)/r),f=Math.round((o-i+1)/r);if(c<=0||f<=0)throw new v;if(f!==c)throw new v;let m=Math.floor(r/2);i+=m,s+=m;let w=s+Math.floor((c-1)*r)-a;if(w>0){if(w>m)throw new v;s-=w}let E=i+Math.floor((f-1)*r)-o;if(E>0){if(E>m)throw new v;i-=E}let I=new Ue(c,f);for(let S=0;S<f;S++){let b=i+Math.floor(S*r);for(let M=0;M<c;M++)e.get(s+Math.floor(M*r),b)&&I.set(M,S)}return I}static moduleSize(e,t){let n=t.getHeight(),r=t.getWidth(),i=e[0],o=e[1],s=!0,a=0;for(;i<r&&o<n;){if(s!==t.get(i,o)){if(++a===5)break;s=!s}i++,o++}if(i===r||o===n)throw new v;return(i-e[0])/7}}Ht.NO_POINTS=new Array;class ${PDF417Common(){}static getBitCountSum(e){return fe.sum(e)}static toIntArray(e){if(e==null||!e.length)return $.EMPTY_INT_ARRAY;let t=new Int32Array(e.length),n=0;for(let r of e)t[n++]=r;return t}static getCodeword(e){let t=ne.binarySearch($.SYMBOL_TABLE,e&262143);return t<0?-1:($.CODEWORD_TABLE[t]-1)%$.NUMBER_OF_CODEWORDS}}$.NUMBER_OF_CODEWORDS=929,$.MAX_CODEWORDS_IN_BARCODE=$.NUMBER_OF_CODEWORDS-1,$.MIN_ROWS_IN_BARCODE=3,$.MAX_ROWS_IN_BARCODE=90,$.MODULES_IN_CODEWORD=17,$.MODULES_IN_STOP_PATTERN=18,$.BARS_IN_MODULE=8,$.EMPTY_INT_ARRAY=new Int32Array([]),$.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),$.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class po{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class ie{static detectMultiple(e,t,n){let r=e.getBlackMatrix(),i=ie.detect(n,r);return i.length||(r=r.clone(),r.rotate180(),i=ie.detect(n,r)),new po(r,i)}static detect(e,t){let n=new Array,r=0,i=0,o=!1;for(;r<t.getHeight();){let s=ie.findVertices(t,r,i);if(s[0]==null&&s[3]==null){if(!o)break;o=!1,i=0;for(let a of n)a[1]!=null&&(r=Math.trunc(Math.max(r,a[1].getY()))),a[3]!=null&&(r=Math.max(r,Math.trunc(a[3].getY())));r+=ie.ROW_STEP;continue}if(o=!0,n.push(s),!e)break;s[2]!=null?(i=Math.trunc(s[2].getX()),r=Math.trunc(s[2].getY())):(i=Math.trunc(s[4].getX()),r=Math.trunc(s[4].getY()))}return n}static findVertices(e,t,n){let r=e.getHeight(),i=e.getWidth(),o=new Array(8);return ie.copyToResult(o,ie.findRowsWithPattern(e,r,i,t,n,ie.START_PATTERN),ie.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),ie.copyToResult(o,ie.findRowsWithPattern(e,r,i,t,n,ie.STOP_PATTERN),ie.INDEXES_STOP_PATTERN),o}static copyToResult(e,t,n){for(let r=0;r<n.length;r++)e[n[r]]=t[r]}static findRowsWithPattern(e,t,n,r,i,o){let s=new Array(4),a=!1,c=new Int32Array(o.length);for(;r<t;r+=ie.ROW_STEP){let m=ie.findGuardPattern(e,i,r,n,!1,o,c);if(m!=null){for(;r>0;){let w=ie.findGuardPattern(e,i,--r,n,!1,o,c);if(w!=null)m=w;else{r++;break}}s[0]=new j(m[0],r),s[1]=new j(m[1],r),a=!0;break}}let f=r+1;if(a){let m=0,w=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);for(;f<t;f++){let E=ie.findGuardPattern(e,w[0],f,n,!1,o,c);if(E!=null&&Math.abs(w[0]-E[0])<ie.MAX_PATTERN_DRIFT&&Math.abs(w[1]-E[1])<ie.MAX_PATTERN_DRIFT)w=E,m=0;else{if(m>ie.SKIPPED_ROW_COUNT_MAX)break;m++}}f-=m+1,s[2]=new j(w[0],f),s[3]=new j(w[1],f)}return f-r<ie.BARCODE_MIN_HEIGHT&&ne.fill(s,null),s}static findGuardPattern(e,t,n,r,i,o,s){ne.fillWithin(s,0,s.length,0);let a=t,c=0;for(;e.get(a,n)&&a>0&&c++<ie.MAX_PIXEL_DRIFT;)a--;let f=a,m=0,w=o.length;for(let E=i;f<r;f++)if(e.get(f,n)!==E)s[m]++;else{if(m===w-1){if(ie.patternMatchVariance(s,o,ie.MAX_INDIVIDUAL_VARIANCE)<ie.MAX_AVG_VARIANCE)return new Int32Array([a,f]);a+=s[0]+s[1],Q.arraycopy(s,2,s,0,m-1),s[m-1]=0,s[m]=0,m--}else m++;s[m]=1,E=!E}return m===w-1&&ie.patternMatchVariance(s,o,ie.MAX_INDIVIDUAL_VARIANCE)<ie.MAX_AVG_VARIANCE?new Int32Array([a,f-1]):null}static patternMatchVariance(e,t,n){let r=e.length,i=0,o=0;for(let c=0;c<r;c++)i+=e[c],o+=t[c];if(i<o)return 1/0;let s=i/o;n*=s;let a=0;for(let c=0;c<r;c++){let f=e[c],m=t[c]*s,w=f>m?f-m:m-f;if(w>n)return 1/0;a+=w}return a/i}}ie.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),ie.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),ie.MAX_AVG_VARIANCE=.42,ie.MAX_INDIVIDUAL_VARIANCE=.8,ie.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),ie.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),ie.MAX_PIXEL_DRIFT=3,ie.MAX_PATTERN_DRIFT=5,ie.SKIPPED_ROW_COUNT_MAX=25,ie.ROW_STEP=5,ie.BARCODE_MIN_HEIGHT=10;class Xe{constructor(e,t){if(t.length===0)throw new C;this.field=e;let n=t.length;if(n>1&&t[0]===0){let r=1;for(;r<n&&t[r]===0;)r++;r===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-r),Q.arraycopy(t,r,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let r=0;for(let i of this.coefficients)r=this.field.add(r,i);return r}let t=this.coefficients[0],n=this.coefficients.length;for(let r=1;r<n;r++)t=this.field.add(this.field.multiply(e,t),this.coefficients[r]);return t}add(e){if(!this.field.equals(e.field))throw new C("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,n=e.coefficients;if(t.length>n.length){let o=t;t=n,n=o}let r=new Int32Array(n.length),i=n.length-t.length;Q.arraycopy(n,0,r,0,i);for(let o=i;o<n.length;o++)r[o]=this.field.add(t[o-i],n[o]);return new Xe(this.field,r)}subtract(e){if(!this.field.equals(e.field))throw new C("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof Xe?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new C("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new Xe(this.field,new Int32Array([0]));let t=this.coefficients,n=t.length,r=e.coefficients,i=r.length,o=new Int32Array(n+i-1);for(let s=0;s<n;s++){let a=t[s];for(let c=0;c<i;c++)o[s+c]=this.field.add(o[s+c],this.field.multiply(a,r[c]))}return new Xe(this.field,o)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let n=0;n<e;n++)t[n]=this.field.subtract(0,this.coefficients[n]);return new Xe(this.field,t)}multiplyScalar(e){if(e===0)return new Xe(this.field,new Int32Array([0]));if(e===1)return this;let t=this.coefficients.length,n=new Int32Array(t);for(let r=0;r<t;r++)n[r]=this.field.multiply(this.coefficients[r],e);return new Xe(this.field,n)}multiplyByMonomial(e,t){if(e<0)throw new C;if(t===0)return new Xe(this.field,new Int32Array([0]));let n=this.coefficients.length,r=new Int32Array(n+e);for(let i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],t);return new Xe(this.field,r)}toString(){let e=new Ie;for(let t=this.getDegree();t>=0;t--){let n=this.getCoefficient(t);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(t===0||n!==1)&&e.append(n),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class Co{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new C;return this.logTable[e]}inverse(e){if(e===0)throw new nr;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class pr extends Co{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let n=1;for(let r=0;r<e;r++)this.expTable[r]=n,n=n*t%e;for(let r=0;r<e-1;r++)this.logTable[this.expTable[r]]=r;this.zero=new Xe(this,new Int32Array([0])),this.one=new Xe(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new C;if(t===0)return this.zero;let n=new Int32Array(e+1);return n[0]=t,new Xe(this,n)}}pr.PDF417_GF=new pr($.NUMBER_OF_CODEWORDS,3);class Yr{constructor(){this.field=pr.PDF417_GF}decode(e,t,n){let r=new Xe(this.field,e),i=new Int32Array(t),o=!1;for(let I=t;I>0;I--){let S=r.evaluateAt(this.field.exp(I));i[t-I]=S,S!==0&&(o=!0)}if(!o)return 0;let s=this.field.getOne();if(n!=null)for(let I of n){let S=this.field.exp(e.length-1-I),b=new Xe(this.field,new Int32Array([this.field.subtract(0,S),1]));s=s.multiply(b)}let a=new Xe(this.field,i),c=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),a,t),f=c[0],m=c[1],w=this.findErrorLocations(f),E=this.findErrorMagnitudes(m,f,w);for(let I=0;I<w.length;I++){let S=e.length-1-this.field.log(w[I]);if(S<0)throw P.getChecksumInstance();e[S]=this.field.subtract(e[S],E[I])}return w.length}runEuclideanAlgorithm(e,t,n){if(e.getDegree()<t.getDegree()){let w=e;e=t,t=w}let r=e,i=t,o=this.field.getZero(),s=this.field.getOne();for(;i.getDegree()>=Math.round(n/2);){let w=r,E=o;if(r=i,o=s,r.isZero())throw P.getChecksumInstance();i=w;let I=this.field.getZero(),S=r.getCoefficient(r.getDegree()),b=this.field.inverse(S);for(;i.getDegree()>=r.getDegree()&&!i.isZero();){let M=i.getDegree()-r.getDegree(),B=this.field.multiply(i.getCoefficient(i.getDegree()),b);I=I.add(this.field.buildMonomial(M,B)),i=i.subtract(r.multiplyByMonomial(M,B))}s=I.multiply(o).subtract(E).negative()}let a=s.getCoefficient(0);if(a===0)throw P.getChecksumInstance();let c=this.field.inverse(a),f=s.multiply(c),m=i.multiply(c);return[f,m]}findErrorLocations(e){let t=e.getDegree(),n=new Int32Array(t),r=0;for(let i=1;i<this.field.getSize()&&r<t;i++)e.evaluateAt(i)===0&&(n[r]=this.field.inverse(i),r++);if(r!==t)throw P.getChecksumInstance();return n}findErrorMagnitudes(e,t,n){let r=t.getDegree(),i=new Int32Array(r);for(let c=1;c<=r;c++)i[r-c]=this.field.multiply(c,t.getCoefficient(c));let o=new Xe(this.field,i),s=n.length,a=new Int32Array(s);for(let c=0;c<s;c++){let f=this.field.inverse(n[c]),m=this.field.subtract(0,e.evaluateAt(f)),w=this.field.inverse(o.evaluateAt(f));a[c]=this.field.multiply(m,w)}return a}}class Kt{constructor(e,t,n,r,i){e instanceof Kt?this.constructor_2(e):this.constructor_1(e,t,n,r,i)}constructor_1(e,t,n,r,i){let o=t==null||n==null,s=r==null||i==null;if(o&&s)throw new v;o?(t=new j(0,r.getY()),n=new j(0,i.getY())):s&&(r=new j(e.getWidth()-1,t.getY()),i=new j(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=t,this.bottomLeft=n,this.topRight=r,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),n.getX())),this.maxX=Math.trunc(Math.max(r.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),r.getY())),this.maxY=Math.trunc(Math.max(n.getY(),i.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return e==null?t:t==null?e:new Kt(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,n){let r=this.topLeft,i=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(e>0){let a=n?this.topLeft:this.topRight,c=Math.trunc(a.getY()-e);c<0&&(c=0);let f=new j(a.getX(),c);n?r=f:o=f}if(t>0){let a=n?this.bottomLeft:this.bottomRight,c=Math.trunc(a.getY()+t);c>=this.image.getHeight()&&(c=this.image.getHeight()-1);let f=new j(a.getX(),c);n?i=f:s=f}return new Kt(this.image,r,i,o,s)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class wo{constructor(e,t,n,r){this.columnCount=e,this.errorCorrectionLevel=r,this.rowCountUpperPart=t,this.rowCountLowerPart=n,this.rowCount=t+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class En{constructor(){this.buffer=""}static form(e,t){let n=-1;function r(o,s,a,c,f,m){if(o==="%%")return"%";if(t[++n]===void 0)return;o=c?parseInt(c.substr(1)):void 0;let w=f?parseInt(f.substr(1)):void 0,E;switch(m){case"s":E=t[n];break;case"c":E=t[n][0];break;case"f":E=parseFloat(t[n]).toFixed(o);break;case"p":E=parseFloat(t[n]).toPrecision(o);break;case"e":E=parseFloat(t[n]).toExponential(o);break;case"x":E=parseInt(t[n]).toString(w||16);break;case"d":E=parseFloat(parseInt(t[n],w||10).toPrecision(o)).toFixed(0);break}E=typeof E=="object"?JSON.stringify(E):(+E).toString(w);let I=parseInt(a),S=a&&a[0]+""=="0"?"0":" ";for(;E.length<I;)E=s!==void 0?E+S:S+E;return E}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,r)}format(e,...t){this.buffer+=En.form(e,t)}toString(){return this.buffer}}let Zr=(()=>{class l{constructor(t){this.boundingBox=new Kt(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let n=this.getCodeword(t);if(n!=null)return n;for(let r=1;r<l.MAX_NEARBY_DISTANCE;r++){let i=this.imageRowToCodewordIndex(t)-r;if(i>=0&&(n=this.codewords[i],n!=null)||(i=this.imageRowToCodewordIndex(t)+r,i<this.codewords.length&&(n=this.codewords[i],n!=null)))return n}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,n){this.codewords[this.imageRowToCodewordIndex(t)]=n}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){let t=new En,n=0;for(let r of this.codewords){if(r==null){t.format("%3d:    |   %n",n++);continue}t.format("%3d: %3d|%3d%n",n++,r.getRowNumber(),r.getValue())}return t.toString()}}return l.MAX_NEARBY_DISTANCE=5,l})();class In{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(let[n,r]of this.values.entries()){let i={getKey:()=>n,getValue:()=>r};i.getValue()>e?(e=i.getValue(),t=[],t.push(i.getKey())):i.getValue()===e&&t.push(i.getKey())}return $.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class Qr extends Zr{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())e?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=-1,c=1,f=0;for(let m=o;m<s;m++){if(t[m]==null)continue;let w=t[m],E=w.getRowNumber()-a;if(E===0)f++;else if(E===1)c=Math.max(c,f),f=1,a=w.getRowNumber();else if(E<0||w.getRowNumber()>=e.getRowCount()||E>m)t[m]=null;else{let I;c>2?I=(c-2)*E:I=E;let S=I>=m;for(let b=1;b<=I&&!S;b++)S=t[m-b]!=null;S?t[m]=null:(a=w.getRowNumber(),f=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let n of this.getCodewords())if(n!=null){let r=n.getRowNumber();if(r>=t.length)continue;t[r]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),n=this._isLeft?t.getTopLeft():t.getTopRight(),r=this._isLeft?t.getBottomLeft():t.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(n.getY())),o=this.imageRowToCodewordIndex(Math.trunc(r.getY())),s=this.getCodewords(),a=-1;for(let c=i;c<o;c++){if(s[c]==null)continue;let f=s[c];f.setRowNumberAsRowIndicatorColumn();let m=f.getRowNumber()-a;m===0||(m===1?a=f.getRowNumber():f.getRowNumber()>=e.getRowCount()?s[c]=null:a=f.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new In,n=new In,r=new In,i=new In;for(let s of e){if(s==null)continue;s.setRowNumberAsRowIndicatorColumn();let a=s.getValue()%30,c=s.getRowNumber();switch(this._isLeft||(c+=2),c%3){case 0:n.setValue(a*3+1);break;case 1:i.setValue(a/3),r.setValue(a%3);break;case 2:t.setValue(a+1);break}}if(t.getValue().length===0||n.getValue().length===0||r.getValue().length===0||i.getValue().length===0||t.getValue()[0]<1||n.getValue()[0]+r.getValue()[0]<$.MIN_ROWS_IN_BARCODE||n.getValue()[0]+r.getValue()[0]>$.MAX_ROWS_IN_BARCODE)return null;let o=new wo(t.getValue()[0],n.getValue()[0],r.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(e,o),o}removeIncorrectCodewords(e,t){for(let n=0;n<e.length;n++){let r=e[n];if(e[n]==null)continue;let i=r.getValue()%30,o=r.getRowNumber();if(o>t.getRowCount()){e[n]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:i*3+1!==t.getRowCountUpperPart()&&(e[n]=null);break;case 1:(Math.trunc(i/3)!==t.getErrorCorrectionLevel()||i%3!==t.getRowCountLowerPart())&&(e[n]=null);break;case 2:i+1!==t.getColumnCount()&&(e[n]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class yn{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=$.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let n=this.detectionResultColumns[t].getCodewords();for(let r=0;r<n.length;r++)n[r]!=null&&(n[r].hasValidRowNumber()||this.adjustRowNumbers(t,r,n))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++)if(e[n]!=null&&t[n]!=null&&e[n].getRowNumber()===t[n].getRowNumber())for(let r=1;r<=this.barcodeColumnCount;r++){let i=this.detectionResultColumns[r].getCodewords()[n];i!=null&&(i.setRowNumber(e[n].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[r].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<t.length;n++){if(t[n]==null)continue;let r=t[n].getRowNumber(),i=0;for(let o=this.barcodeColumnCount+1;o>0&&i<this.ADJUST_ROW_NUMBER_SKIP;o--){let s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(i=yn.adjustRowNumberIfValid(r,i,s),s.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let n=0;n<t.length;n++){if(t[n]==null)continue;let r=t[n].getRowNumber(),i=0;for(let o=1;o<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;o++){let s=this.detectionResultColumns[o].getCodewords()[n];s!=null&&(i=yn.adjustRowNumberIfValid(r,i,s),s.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,n){if(!this.detectionResultColumns[e-1])return;let r=n[t],i=this.detectionResultColumns[e-1].getCodewords(),o=i;this.detectionResultColumns[e+1]!=null&&(o=this.detectionResultColumns[e+1].getCodewords());let s=new Array(14);s[2]=i[t],s[3]=o[t],t>0&&(s[0]=n[t-1],s[4]=i[t-1],s[5]=o[t-1]),t>1&&(s[8]=n[t-2],s[10]=i[t-2],s[11]=o[t-2]),t<n.length-1&&(s[1]=n[t+1],s[6]=i[t+1],s[7]=o[t+1]),t<n.length-2&&(s[9]=n[t+2],s[12]=i[t+2],s[13]=o[t+2]);for(let a of s)if(yn.adjustRowNumber(r,a))return}static adjustRowNumber(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new En;for(let n=0;n<e.getCodewords().length;n++){t.format("CW %3d:",n);for(let r=0;r<this.barcodeColumnCount+2;r++){if(this.detectionResultColumns[r]==null){t.format("    |   ");continue}let i=this.detectionResultColumns[r].getCodewords()[n];if(i==null){t.format("    |   ");continue}t.format(" %3d|%3d",i.getRowNumber(),i.getValue())}t.format("%n")}return t.toString()}}let Ao=(()=>{class l{constructor(t,n,r,i){this.rowNumber=l.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(n),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==l.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}return l.BARCODE_ROW_UNKNOWN=-1,l})();class ot{static initialize(){for(let e=0;e<$.SYMBOL_TABLE.length;e++){let t=$.SYMBOL_TABLE[e],n=t&1;for(let r=0;r<$.BARS_IN_MODULE;r++){let i=0;for(;(t&1)===n;)i+=1,t>>=1;n=t&1,ot.RATIOS_TABLE[e]||(ot.RATIOS_TABLE[e]=new Array($.BARS_IN_MODULE)),ot.RATIOS_TABLE[e][$.BARS_IN_MODULE-r-1]=Math.fround(i/$.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=ot.getDecodedCodewordValue(ot.sampleBitCounts(e));return t!==-1?t:ot.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=fe.sum(e),n=new Int32Array($.BARS_IN_MODULE),r=0,i=0;for(let o=0;o<$.MODULES_IN_CODEWORD;o++){let s=t/(2*$.MODULES_IN_CODEWORD)+o*t/$.MODULES_IN_CODEWORD;i+e[r]<=s&&(i+=e[r],r++),n[r]++}return n}static getDecodedCodewordValue(e){let t=ot.getBitValue(e);return $.getCodeword(t)===-1?-1:t}static getBitValue(e){let t=0;for(let n=0;n<e.length;n++)for(let r=0;r<e[n];r++)t=t<<1|(n%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=fe.sum(e),n=new Array($.BARS_IN_MODULE);if(t>1)for(let o=0;o<n.length;o++)n[o]=Math.fround(e[o]/t);let r=Mn.MAX_VALUE,i=-1;this.bSymbolTableReady||ot.initialize();for(let o=0;o<ot.RATIOS_TABLE.length;o++){let s=0,a=ot.RATIOS_TABLE[o];for(let c=0;c<$.BARS_IN_MODULE;c++){let f=Math.fround(a[c]-n[c]);if(s+=Math.fround(f*f),s>=r)break}s<r&&(r=s,i=$.SYMBOL_TABLE[o])}return i}}ot.bSymbolTableReady=!1,ot.RATIOS_TABLE=new Array($.SYMBOL_TABLE.length).map(l=>l=new Array($.BARS_IN_MODULE));class qr{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class Kr{static parseLong(e,t=void 0){return parseInt(e,t)}}let Eo=(()=>{class l extends T{}return l.kind="NullPointerException",l})();class Io{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,n){if(e==null)throw new Eo;if(t<0||t>e.length||n<0||t+n>e.length||t+n<0)throw new Fe;if(n===0)return;for(let r=0;r<n;r++)this.write(e[t+r])}flush(){}close(){}}class yo extends T{}class So extends Io{constructor(e=32){if(super(),this.count=0,e<0)throw new C("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let n=this.buf.length<<1;if(n-e<0&&(n=e),n<0){if(e<0)throw new yo;n=W.MAX_VALUE}this.buf=ne.copyOfUint8Array(this.buf,n)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,n){if(t<0||t>e.length||n<0||t+n-e.length>0)throw new Fe;this.ensureCapacity(this.count+n),Q.arraycopy(e,t,this.buf,this.count,n),this.count+=n}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return ne.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var Se=function(l){return l[l.ALPHA=0]="ALPHA",l[l.LOWER=1]="LOWER",l[l.MIXED=2]="MIXED",l[l.PUNCT=3]="PUNCT",l[l.ALPHA_SHIFT=4]="ALPHA_SHIFT",l[l.PUNCT_SHIFT=5]="PUNCT_SHIFT",l}(Se||{});function Jr(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let kn;function zt(l){if(typeof kn>"u"&&(kn=Jr()),kn===null)throw new Error("BigInt is not supported!");return kn(l)}function bo(){let l=[];l[0]=zt(1);let e=zt(900);l[1]=e;for(let t=2;t<16;t++)l[t]=l[t-1]*e;return l}class O{static decode(e,t){let n=new Ie(""),r=F.ISO8859_1;n.enableDecoding(r);let i=1,o=e[i++],s=new qr;for(;i<e[0];){switch(o){case O.TEXT_COMPACTION_MODE_LATCH:i=O.textCompaction(e,i,n);break;case O.BYTE_COMPACTION_MODE_LATCH:case O.BYTE_COMPACTION_MODE_LATCH_6:i=O.byteCompaction(o,e,r,i,n);break;case O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[i++]);break;case O.NUMERIC_COMPACTION_MODE_LATCH:i=O.numericCompaction(e,i,n);break;case O.ECI_CHARSET:let c=F.getCharacterSetECIByValue(e[i++]);break;case O.ECI_GENERAL_PURPOSE:i+=2;break;case O.ECI_USER_DEFINED:i++;break;case O.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=O.decodeMacroBlock(e,i,s);break;case O.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case O.MACRO_PDF417_TERMINATOR:throw new k;default:i--,i=O.textCompaction(e,i,n);break}if(i<e.length)o=e[i++];else throw k.getFormatInstance()}if(n.length()===0)throw k.getFormatInstance();let a=new gn(null,n.toString(),null,t);return a.setOther(s),a}static decodeMacroBlock(e,t,n){if(t+O.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw k.getFormatInstance();let r=new Int32Array(O.NUMBER_OF_SEQUENCE_CODEWORDS);for(let s=0;s<O.NUMBER_OF_SEQUENCE_CODEWORDS;s++,t++)r[s]=e[t];n.setSegmentIndex(W.parseInt(O.decodeBase900toBase10(r,O.NUMBER_OF_SEQUENCE_CODEWORDS)));let i=new Ie;t=O.textCompaction(e,t,i),n.setFileId(i.toString());let o=-1;for(e[t]===O.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=t+1);t<e[0];)switch(e[t]){case O.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case O.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let s=new Ie;t=O.textCompaction(e,t+1,s),n.setFileName(s.toString());break;case O.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let a=new Ie;t=O.textCompaction(e,t+1,a),n.setSender(a.toString());break;case O.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let c=new Ie;t=O.textCompaction(e,t+1,c),n.setAddressee(c.toString());break;case O.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let f=new Ie;t=O.numericCompaction(e,t+1,f),n.setSegmentCount(W.parseInt(f.toString()));break;case O.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let m=new Ie;t=O.numericCompaction(e,t+1,m),n.setTimestamp(Kr.parseLong(m.toString()));break;case O.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let w=new Ie;t=O.numericCompaction(e,t+1,w),n.setChecksum(W.parseInt(w.toString()));break;case O.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let E=new Ie;t=O.numericCompaction(e,t+1,E),n.setFileSize(Kr.parseLong(E.toString()));break;default:throw k.getFormatInstance()}break;case O.MACRO_PDF417_TERMINATOR:t++,n.setLastSegment(!0);break;default:throw k.getFormatInstance()}if(o!==-1){let s=t-o;n.isLastSegment()&&s--,n.setOptionalData(ne.copyOfRange(e,o,o+s))}return t}static textCompaction(e,t,n){let r=new Int32Array((e[0]-t)*2),i=new Int32Array((e[0]-t)*2),o=0,s=!1;for(;t<e[0]&&!s;){let a=e[t++];if(a<O.TEXT_COMPACTION_MODE_LATCH)r[o]=a/30,r[o+1]=a%30,o+=2;else switch(a){case O.TEXT_COMPACTION_MODE_LATCH:r[o++]=O.TEXT_COMPACTION_MODE_LATCH;break;case O.BYTE_COMPACTION_MODE_LATCH:case O.BYTE_COMPACTION_MODE_LATCH_6:case O.NUMERIC_COMPACTION_MODE_LATCH:case O.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case O.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case O.MACRO_PDF417_TERMINATOR:t--,s=!0;break;case O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r[o]=O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,a=e[t++],i[o]=a,o++;break}}return O.decodeTextCompaction(r,i,o,n),t}static decodeTextCompaction(e,t,n,r){let i=Se.ALPHA,o=Se.ALPHA,s=0;for(;s<n;){let a=e[s],c="";switch(i){case Se.ALPHA:if(a<26)c=String.fromCharCode(65+a);else switch(a){case 26:c=" ";break;case O.LL:i=Se.LOWER;break;case O.ML:i=Se.MIXED;break;case O.PS:o=i,i=Se.PUNCT_SHIFT;break;case O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[s]);break;case O.TEXT_COMPACTION_MODE_LATCH:i=Se.ALPHA;break}break;case Se.LOWER:if(a<26)c=String.fromCharCode(97+a);else switch(a){case 26:c=" ";break;case O.AS:o=i,i=Se.ALPHA_SHIFT;break;case O.ML:i=Se.MIXED;break;case O.PS:o=i,i=Se.PUNCT_SHIFT;break;case O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[s]);break;case O.TEXT_COMPACTION_MODE_LATCH:i=Se.ALPHA;break}break;case Se.MIXED:if(a<O.PL)c=O.MIXED_CHARS[a];else switch(a){case O.PL:i=Se.PUNCT;break;case 26:c=" ";break;case O.LL:i=Se.LOWER;break;case O.AL:i=Se.ALPHA;break;case O.PS:o=i,i=Se.PUNCT_SHIFT;break;case O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[s]);break;case O.TEXT_COMPACTION_MODE_LATCH:i=Se.ALPHA;break}break;case Se.PUNCT:if(a<O.PAL)c=O.PUNCT_CHARS[a];else switch(a){case O.PAL:i=Se.ALPHA;break;case O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[s]);break;case O.TEXT_COMPACTION_MODE_LATCH:i=Se.ALPHA;break}break;case Se.ALPHA_SHIFT:if(i=o,a<26)c=String.fromCharCode(65+a);else switch(a){case 26:c=" ";break;case O.TEXT_COMPACTION_MODE_LATCH:i=Se.ALPHA;break}break;case Se.PUNCT_SHIFT:if(i=o,a<O.PAL)c=O.PUNCT_CHARS[a];else switch(a){case O.PAL:i=Se.ALPHA;break;case O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(t[s]);break;case O.TEXT_COMPACTION_MODE_LATCH:i=Se.ALPHA;break}break}c!==""&&r.append(c),s++}}static byteCompaction(e,t,n,r,i){let o=new So,s=0,a=0,c=!1;switch(e){case O.BYTE_COMPACTION_MODE_LATCH:let f=new Int32Array(6),m=t[r++];for(;r<t[0]&&!c;)switch(f[s++]=m,a=900*a+m,m=t[r++],m){case O.TEXT_COMPACTION_MODE_LATCH:case O.BYTE_COMPACTION_MODE_LATCH:case O.NUMERIC_COMPACTION_MODE_LATCH:case O.BYTE_COMPACTION_MODE_LATCH_6:case O.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case O.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case O.MACRO_PDF417_TERMINATOR:r--,c=!0;break;default:if(s%5===0&&s>0){for(let w=0;w<6;++w)o.write(Number(zt(a)>>zt(8*(5-w))));a=0,s=0}break}r===t[0]&&m<O.TEXT_COMPACTION_MODE_LATCH&&(f[s++]=m);for(let w=0;w<s;w++)o.write(f[w]);break;case O.BYTE_COMPACTION_MODE_LATCH_6:for(;r<t[0]&&!c;){let w=t[r++];if(w<O.TEXT_COMPACTION_MODE_LATCH)s++,a=900*a+w;else switch(w){case O.TEXT_COMPACTION_MODE_LATCH:case O.BYTE_COMPACTION_MODE_LATCH:case O.NUMERIC_COMPACTION_MODE_LATCH:case O.BYTE_COMPACTION_MODE_LATCH_6:case O.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case O.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case O.MACRO_PDF417_TERMINATOR:r--,c=!0;break}if(s%5===0&&s>0){for(let E=0;E<6;++E)o.write(Number(zt(a)>>zt(8*(5-E))));a=0,s=0}}break}return i.append(rt.decode(o.toByteArray(),n)),r}static numericCompaction(e,t,n){let r=0,i=!1,o=new Int32Array(O.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!i;){let s=e[t++];if(t===e[0]&&(i=!0),s<O.TEXT_COMPACTION_MODE_LATCH)o[r]=s,r++;else switch(s){case O.TEXT_COMPACTION_MODE_LATCH:case O.BYTE_COMPACTION_MODE_LATCH:case O.BYTE_COMPACTION_MODE_LATCH_6:case O.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case O.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case O.MACRO_PDF417_TERMINATOR:t--,i=!0;break}(r%O.MAX_NUMERIC_CODEWORDS===0||s===O.NUMERIC_COMPACTION_MODE_LATCH||i)&&r>0&&(n.append(O.decodeBase900toBase10(o,r)),r=0)}return t}static decodeBase900toBase10(e,t){let n=zt(0);for(let i=0;i<t;i++)n+=O.EXP900[t-i-1]*zt(e[i]);let r=n.toString();if(r.charAt(0)!=="1")throw new k;return r.substring(1)}}O.TEXT_COMPACTION_MODE_LATCH=900,O.BYTE_COMPACTION_MODE_LATCH=901,O.NUMERIC_COMPACTION_MODE_LATCH=902,O.BYTE_COMPACTION_MODE_LATCH_6=924,O.ECI_USER_DEFINED=925,O.ECI_GENERAL_PURPOSE=926,O.ECI_CHARSET=927,O.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,O.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,O.MACRO_PDF417_TERMINATOR=922,O.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,O.MAX_NUMERIC_CODEWORDS=15,O.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,O.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,O.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,O.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,O.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,O.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,O.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,O.PL=25,O.LL=27,O.AS=27,O.ML=28,O.AL=28,O.PS=29,O.PAL=29,O.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,O.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",O.EXP900=Jr()?bo():[],O.NUMBER_OF_SEQUENCE_CODEWORDS=2;class oe{constructor(){}static decode(e,t,n,r,i,o,s){let a=new Kt(e,t,n,r,i),c=null,f=null,m;for(let I=!0;;I=!1){if(t!=null&&(c=oe.getRowIndicatorColumn(e,a,t,!0,o,s)),r!=null&&(f=oe.getRowIndicatorColumn(e,a,r,!1,o,s)),m=oe.merge(c,f),m==null)throw v.getNotFoundInstance();let S=m.getBoundingBox();if(I&&S!=null&&(S.getMinY()<a.getMinY()||S.getMaxY()>a.getMaxY()))a=S;else break}m.setBoundingBox(a);let w=m.getBarcodeColumnCount()+1;m.setDetectionResultColumn(0,c),m.setDetectionResultColumn(w,f);let E=c!=null;for(let I=1;I<=w;I++){let S=E?I:w-I;if(m.getDetectionResultColumn(S)!==void 0)continue;let b;S===0||S===w?b=new Qr(a,S===0):b=new Zr(a),m.setDetectionResultColumn(S,b);let M=-1,B=M;for(let V=a.getMinY();V<=a.getMaxY();V++){if(M=oe.getStartColumn(m,S,V,E),M<0||M>a.getMaxX()){if(B===-1)continue;M=B}let R=oe.detectCodeword(e,a.getMinX(),a.getMaxX(),E,M,V,o,s);R!=null&&(b.setCodeword(V,R),B=M,o=Math.min(o,R.getWidth()),s=Math.max(s,R.getWidth()))}}return oe.createDecoderResult(m)}static merge(e,t){if(e==null&&t==null)return null;let n=oe.getBarcodeMetadata(e,t);if(n==null)return null;let r=Kt.merge(oe.adjustBoundingBox(e),oe.adjustBoundingBox(t));return new yn(n,r)}static adjustBoundingBox(e){if(e==null)return null;let t=e.getRowHeights();if(t==null)return null;let n=oe.getMax(t),r=0;for(let s of t)if(r+=n-s,s>0)break;let i=e.getCodewords();for(let s=0;r>0&&i[s]==null;s++)r--;let o=0;for(let s=t.length-1;s>=0&&(o+=n-t[s],!(t[s]>0));s--);for(let s=i.length-1;o>0&&i[s]==null;s--)o--;return e.getBoundingBox().addMissingRows(r,o,e.isLeft())}static getMax(e){let t=-1;for(let n of e)t=Math.max(t,n);return t}static getBarcodeMetadata(e,t){let n;if(e==null||(n=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();let r;return t==null||(r=t.getBarcodeMetadata())==null?n:n.getColumnCount()!==r.getColumnCount()&&n.getErrorCorrectionLevel()!==r.getErrorCorrectionLevel()&&n.getRowCount()!==r.getRowCount()?null:n}static getRowIndicatorColumn(e,t,n,r,i,o){let s=new Qr(t,r);for(let a=0;a<2;a++){let c=a===0?1:-1,f=Math.trunc(Math.trunc(n.getX()));for(let m=Math.trunc(Math.trunc(n.getY()));m<=t.getMaxY()&&m>=t.getMinY();m+=c){let w=oe.detectCodeword(e,0,e.getWidth(),r,f,m,i,o);w!=null&&(s.setCodeword(m,w),r?f=w.getStartX():f=w.getEndX())}}return s}static adjustCodewordCount(e,t){let n=t[0][1],r=n.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-oe.getNumberOfECCodeWords(e.getBarcodeECLevel());if(r.length===0){if(i<1||i>$.MAX_CODEWORDS_IN_BARCODE)throw v.getNotFoundInstance();n.setValue(i)}else r[0]!==i&&n.setValue(i)}static createDecoderResult(e){let t=oe.createBarcodeMatrix(e);oe.adjustCodewordCount(e,t);let n=new Array,r=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],o=new Array;for(let a=0;a<e.getBarcodeRowCount();a++)for(let c=0;c<e.getBarcodeColumnCount();c++){let f=t[a][c+1].getValue(),m=a*e.getBarcodeColumnCount()+c;f.length===0?n.push(m):f.length===1?r[m]=f[0]:(o.push(m),i.push(f))}let s=new Array(i.length);for(let a=0;a<s.length;a++)s[a]=i[a];return oe.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),r,$.toIntArray(n),$.toIntArray(o),s)}static createDecoderResultFromAmbiguousValues(e,t,n,r,i){let o=new Int32Array(r.length),s=100;for(;s-- >0;){for(let a=0;a<o.length;a++)t[r[a]]=i[a][o[a]];try{return oe.decodeCodewords(t,e,n)}catch(a){if(!(a instanceof P))throw a}if(o.length===0)throw P.getChecksumInstance();for(let a=0;a<o.length;a++)if(o[a]<i[a].length-1){o[a]++;break}else if(o[a]=0,a===o.length-1)throw P.getChecksumInstance()}throw P.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let r=0;r<t.length;r++)for(let i=0;i<t[r].length;i++)t[r][i]=new In;let n=0;for(let r of e.getDetectionResultColumns()){if(r!=null){for(let i of r.getCodewords())if(i!=null){let o=i.getRowNumber();if(o>=0){if(o>=t.length)continue;t[o][n].setValue(i.getValue())}}}n++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,n,r){let i=r?1:-1,o=null;if(oe.isValidBarcodeColumn(e,t-i)&&(o=e.getDetectionResultColumn(t-i).getCodeword(n)),o!=null)return r?o.getEndX():o.getStartX();if(o=e.getDetectionResultColumn(t).getCodewordNearby(n),o!=null)return r?o.getStartX():o.getEndX();if(oe.isValidBarcodeColumn(e,t-i)&&(o=e.getDetectionResultColumn(t-i).getCodewordNearby(n)),o!=null)return r?o.getEndX():o.getStartX();let s=0;for(;oe.isValidBarcodeColumn(e,t-i);){t-=i;for(let a of e.getDetectionResultColumn(t).getCodewords())if(a!=null)return(r?a.getEndX():a.getStartX())+i*s*(a.getEndX()-a.getStartX());s++}return r?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,n,r,i,o,s,a){i=oe.adjustCodewordStartColumn(e,t,n,r,i,o);let c=oe.getModuleBitCount(e,t,n,r,i,o);if(c==null)return null;let f,m=fe.sum(c);if(r)f=i+m;else{for(let I=0;I<c.length/2;I++){let S=c[I];c[I]=c[c.length-1-I],c[c.length-1-I]=S}f=i,i=f-m}if(!oe.checkCodewordSkew(m,s,a))return null;let w=ot.getDecodedValue(c),E=$.getCodeword(w);return E===-1?null:new Ao(i,f,oe.getCodewordBucketNumber(w),E)}static getModuleBitCount(e,t,n,r,i,o){let s=i,a=new Int32Array(8),c=0,f=r?1:-1,m=r;for(;(r?s<n:s>=t)&&c<a.length;)e.get(s,o)===m?(a[c]++,s+=f):(c++,m=!m);return c===a.length||s===(r?n:t)&&c===a.length-1?a:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,n,r,i,o){let s=i,a=r?-1:1;for(let c=0;c<2;c++){for(;(r?s>=t:s<n)&&r===e.get(s,o);){if(Math.abs(i-s)>oe.CODEWORD_SKEW_SIZE)return i;s+=a}a=-a,r=!r}return s}static checkCodewordSkew(e,t,n){return t-oe.CODEWORD_SKEW_SIZE<=e&&e<=n+oe.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,n){if(e.length===0)throw k.getFormatInstance();let r=1<<t+1,i=oe.correctErrors(e,n,r);oe.verifyCodewordCount(e,r);let o=O.decode(e,""+t);return o.setErrorsCorrected(i),o.setErasures(n.length),o}static correctErrors(e,t,n){if(t!=null&&t.length>n/2+oe.MAX_ERRORS||n<0||n>oe.MAX_EC_CODEWORDS)throw P.getChecksumInstance();return oe.errorCorrection.decode(e,n,t)}static verifyCodewordCount(e,t){if(e.length<4)throw k.getFormatInstance();let n=e[0];if(n>e.length)throw k.getFormatInstance();if(n===0)if(t<e.length)e[0]=e.length-t;else throw k.getFormatInstance()}static getBitCountForCodeword(e){let t=new Int32Array(8),n=0,r=t.length-1;for(;!((e&1)!==n&&(n=e&1,r--,r<0));)t[r]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return oe.getCodewordBucketNumber(oe.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new En;for(let n=0;n<e.length;n++){t.format("Row %2d: ",n);for(let r=0;r<e[n].length;r++){let i=e[n][r];i.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()}}oe.CODEWORD_SKEW_SIZE=2,oe.MAX_ERRORS=3,oe.MAX_EC_CODEWORDS=512,oe.errorCorrection=new Yr;class We{decode(e,t=null){let n=We.decode(e,t,!1);if(n==null||n.length===0||n[0]==null)throw v.getNotFoundInstance();return n[0]}decodeMultiple(e,t=null){try{return We.decode(e,t,!0)}catch(n){throw n instanceof k||n instanceof P?v.getNotFoundInstance():n}}static decode(e,t,n){let r=new Array,i=ie.detectMultiple(e,t,n);for(let o of i.getPoints()){let s=oe.decode(i.getBits(),o[4],o[5],o[6],o[7],We.getMinCodewordWidth(o),We.getMaxCodewordWidth(o)),a=new $e(s.getText(),s.getRawBytes(),void 0,o,q.PDF_417);a.putMetadata(He.ERROR_CORRECTION_LEVEL,s.getECLevel());let c=s.getOther();c!=null&&a.putMetadata(He.PDF417_EXTRA_METADATA,c),r.push(a)}return r.map(o=>o)}static getMaxWidth(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return e==null||t==null?W.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(We.getMaxWidth(e[0],e[4]),We.getMaxWidth(e[6],e[2])*$.MODULES_IN_CODEWORD/$.MODULES_IN_STOP_PATTERN),Math.max(We.getMaxWidth(e[1],e[5]),We.getMaxWidth(e[7],e[3])*$.MODULES_IN_CODEWORD/$.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(We.getMinWidth(e[0],e[4]),We.getMinWidth(e[6],e[2])*$.MODULES_IN_CODEWORD/$.MODULES_IN_STOP_PATTERN),Math.min(We.getMinWidth(e[1],e[5]),We.getMinWidth(e[7],e[3])*$.MODULES_IN_CODEWORD/$.MODULES_IN_STOP_PATTERN)))}reset(){}}let Cr=(()=>{class l extends T{}return l.kind="ReaderException",l})();class $r{constructor(e,t){this.verbose=e===!0,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;let t=!h(e)&&e.get(ue.TRY_HARDER)===!0,n=h(e)?null:e.get(ue.POSSIBLE_FORMATS),r=new Array;if(!h(n)){let i=n.some(o=>o===q.UPC_A||o===q.UPC_E||o===q.EAN_13||o===q.EAN_8||o===q.CODABAR||o===q.CODE_39||o===q.CODE_93||o===q.CODE_128||o===q.ITF||o===q.RSS_14||o===q.RSS_EXPANDED);i&&!t&&r.push(new nn(e,this.verbose)),n.includes(q.QR_CODE)&&r.push(new Ht),n.includes(q.DATA_MATRIX)&&r.push(new Bn),n.includes(q.AZTEC)&&r.push(new Dn),n.includes(q.PDF_417)&&r.push(new We),i&&t&&r.push(new nn(e,this.verbose))}r.length===0&&(t||r.push(new nn(e,this.verbose)),r.push(new Ht),r.push(new Bn),r.push(new Dn),r.push(new We),t&&r.push(new nn(e,this.verbose))),this.readers=r}reset(){if(this.readers!==null)for(let e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new Cr("No readers where selected, nothing can be read.");for(let t of this.readers)try{return t.decode(e,this.hints)}catch(n){if(n instanceof Cr)continue}throw new v("No MultiFormat Readers were able to detect the code.")}}class To extends Yt{constructor(e=null,t=500){let n=new $r;n.setHints(e),super(n,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class _o extends Yt{constructor(e=500){super(new We,e)}}class Mo extends Yt{constructor(e=500){super(new Ht,e)}}var ei=function(l){return l[l.ERROR_CORRECTION=0]="ERROR_CORRECTION",l[l.CHARACTER_SET=1]="CHARACTER_SET",l[l.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",l[l.MIN_SIZE=3]="MIN_SIZE",l[l.MAX_SIZE=4]="MAX_SIZE",l[l.MARGIN=5]="MARGIN",l[l.PDF417_COMPACT=6]="PDF417_COMPACT",l[l.PDF417_COMPACTION=7]="PDF417_COMPACTION",l[l.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",l[l.AZTEC_LAYERS=9]="AZTEC_LAYERS",l[l.QR_VERSION=10]="QR_VERSION",l}(ei||{}),ke=ei;class wr{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new it(e,Int32Array.from([1])))}buildGenerator(e){let t=this.cachedGenerators;if(e>=t.length){let n=t[t.length-1],r=this.field;for(let i=t.length;i<=e;i++){let o=n.multiply(new it(r,Int32Array.from([1,r.exp(i-1+r.getGeneratorBase())])));t.push(o),n=o}}return t[e]}encode(e,t){if(t===0)throw new C("No error correction bytes");let n=e.length-t;if(n<=0)throw new C("No data bytes provided");let r=this.buildGenerator(t),i=new Int32Array(n);Q.arraycopy(e,0,i,0,n);let o=new it(this.field,i);o=o.multiplyByMonomial(t,1);let a=o.divide(r)[1].getCoefficients(),c=t-a.length;for(let f=0;f<c;f++)e[n+f]=0;Q.arraycopy(a,0,e,n+c,a.length)}}let rn=(()=>{class l{constructor(){}static applyMaskPenaltyRule1(t){return l.applyMaskPenaltyRule1Internal(t,!0)+l.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let n=0,r=t.getArray(),i=t.getWidth(),o=t.getHeight();for(let s=0;s<o-1;s++){let a=r[s];for(let c=0;c<i-1;c++){let f=a[c];f===a[c+1]&&f===r[s+1][c]&&f===r[s+1][c+1]&&n++}}return l.N2*n}static applyMaskPenaltyRule3(t){let n=0,r=t.getArray(),i=t.getWidth(),o=t.getHeight();for(let s=0;s<o;s++)for(let a=0;a<i;a++){let c=r[s];a+6<i&&c[a]===1&&c[a+1]===0&&c[a+2]===1&&c[a+3]===1&&c[a+4]===1&&c[a+5]===0&&c[a+6]===1&&(l.isWhiteHorizontal(c,a-4,a)||l.isWhiteHorizontal(c,a+7,a+11))&&n++,s+6<o&&r[s][a]===1&&r[s+1][a]===0&&r[s+2][a]===1&&r[s+3][a]===1&&r[s+4][a]===1&&r[s+5][a]===0&&r[s+6][a]===1&&(l.isWhiteVertical(r,a,s-4,s)||l.isWhiteVertical(r,a,s+7,s+11))&&n++}return n*l.N3}static isWhiteHorizontal(t,n,r){n=Math.max(n,0),r=Math.min(r,t.length);for(let i=n;i<r;i++)if(t[i]===1)return!1;return!0}static isWhiteVertical(t,n,r,i){r=Math.max(r,0),i=Math.min(i,t.length);for(let o=r;o<i;o++)if(t[o][n]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let n=0,r=t.getArray(),i=t.getWidth(),o=t.getHeight();for(let c=0;c<o;c++){let f=r[c];for(let m=0;m<i;m++)f[m]===1&&n++}let s=t.getHeight()*t.getWidth();return Math.floor(Math.abs(n*2-s)*10/s)*l.N4}static getDataMaskBit(t,n,r){let i,o;switch(t){case 0:i=r+n&1;break;case 1:i=r&1;break;case 2:i=n%3;break;case 3:i=(r+n)%3;break;case 4:i=Math.floor(r/2)+Math.floor(n/3)&1;break;case 5:o=r*n,i=(o&1)+o%3;break;case 6:o=r*n,i=(o&1)+o%3&1;break;case 7:o=r*n,i=o%3+(r+n&1)&1;break;default:throw new C("Invalid mask pattern: "+t)}return i===0}static applyMaskPenaltyRule1Internal(t,n){let r=0,i=n?t.getHeight():t.getWidth(),o=n?t.getWidth():t.getHeight(),s=t.getArray();for(let a=0;a<i;a++){let c=0,f=-1;for(let m=0;m<o;m++){let w=n?s[a][m]:s[m][a];w===f?c++:(c>=5&&(r+=l.N1+(c-5)),c=1,f=w)}c>=5&&(r+=l.N1+(c-5))}return r}}return l.N1=3,l.N2=3,l.N3=40,l.N4=10,l})();class Fn{constructor(e,t){this.width=e,this.height=t;let n=new Array(t);for(let r=0;r!==t;r++)n[r]=new Uint8Array(e);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,n){this.bytes[t][e]=n}setBoolean(e,t,n){this.bytes[t][e]=n?1:0}clear(e){for(let t of this.bytes)ne.fill(t,e)}equals(e){if(!(e instanceof Fn))return!1;let t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(let n=0,r=this.height;n<r;++n){let i=this.bytes[n],o=t.bytes[n];for(let s=0,a=this.width;s<a;++s)if(i[s]!==o[s])return!1}return!0}toString(){let e=new Ie;for(let t=0,n=this.height;t<n;++t){let r=this.bytes[t];for(let i=0,o=this.width;i<o;++i)switch(r[i]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}let Un=(()=>{class l{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){let t=new Ie;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<l.NUM_MASK_PATTERNS}}return l.NUM_MASK_PATTERNS=8,l})(),_e=(()=>{class l extends T{}return l.kind="WriterException",l})();class K{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,n,r,i){K.clearMatrix(i),K.embedBasicPatterns(n,i),K.embedTypeInfo(t,r,i),K.maybeEmbedVersionInfo(n,i),K.embedDataBits(e,r,i)}static embedBasicPatterns(e,t){K.embedPositionDetectionPatternsAndSeparators(t),K.embedDarkDotAtLeftBottomCorner(t),K.maybeEmbedPositionAdjustmentPatterns(e,t),K.embedTimingPatterns(t)}static embedTypeInfo(e,t,n){let r=new le;K.makeTypeInfoBits(e,t,r);for(let i=0,o=r.getSize();i<o;++i){let s=r.get(r.getSize()-1-i),a=K.TYPE_INFO_COORDINATES[i],c=a[0],f=a[1];if(n.setBoolean(c,f,s),i<8){let m=n.getWidth()-i-1;n.setBoolean(m,8,s)}else{let w=n.getHeight()-7+(i-8);n.setBoolean(8,w,s)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;let n=new le;K.makeVersionInfoBits(e,n);let r=6*3-1;for(let i=0;i<6;++i)for(let o=0;o<3;++o){let s=n.get(r);r--,t.setBoolean(i,t.getHeight()-11+o,s),t.setBoolean(t.getHeight()-11+o,i,s)}}static embedDataBits(e,t,n){let r=0,i=-1,o=n.getWidth()-1,s=n.getHeight()-1;for(;o>0;){for(o===6&&(o-=1);s>=0&&s<n.getHeight();){for(let a=0;a<2;++a){let c=o-a;if(!K.isEmpty(n.get(c,s)))continue;let f;r<e.getSize()?(f=e.get(r),++r):f=!1,t!==255&&rn.getDataMaskBit(t,c,s)&&(f=!f),n.setBoolean(c,s,f)}s+=i}i=-i,s+=i,o-=2}if(r!==e.getSize())throw new _e("Not all bits consumed: "+r+"/"+e.getSize())}static findMSBSet(e){return 32-W.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(t===0)throw new C("0 polynomial");let n=K.findMSBSet(t);for(e<<=n-1;K.findMSBSet(e)>=n;)e^=t<<K.findMSBSet(e)-n;return e}static makeTypeInfoBits(e,t,n){if(!Un.isValidMaskPattern(t))throw new _e("Invalid mask pattern");let r=e.getBits()<<3|t;n.appendBits(r,5);let i=K.calculateBCHCode(r,K.TYPE_INFO_POLY);n.appendBits(i,10);let o=new le;if(o.appendBits(K.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new _e("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);let n=K.calculateBCHCode(e.getVersionNumber(),K.VERSION_INFO_POLY);if(t.appendBits(n,12),t.getSize()!==18)throw new _e("should not happen but we got: "+t.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){let n=(t+1)%2;K.isEmpty(e.get(t,6))&&e.setNumber(t,6,n),K.isEmpty(e.get(6,t))&&e.setNumber(6,t,n)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new _e;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,n){for(let r=0;r<8;++r){if(!K.isEmpty(n.get(e+r,t)))throw new _e;n.setNumber(e+r,t,0)}}static embedVerticalSeparationPattern(e,t,n){for(let r=0;r<7;++r){if(!K.isEmpty(n.get(e,t+r)))throw new _e;n.setNumber(e,t+r,0)}}static embedPositionAdjustmentPattern(e,t,n){for(let r=0;r<5;++r){let i=K.POSITION_ADJUSTMENT_PATTERN[r];for(let o=0;o<5;++o)n.setNumber(e+o,t+r,i[o])}}static embedPositionDetectionPattern(e,t,n){for(let r=0;r<7;++r){let i=K.POSITION_DETECTION_PATTERN[r];for(let o=0;o<7;++o)n.setNumber(e+o,t+r,i[o])}}static embedPositionDetectionPatternsAndSeparators(e){let t=K.POSITION_DETECTION_PATTERN[0].length;K.embedPositionDetectionPattern(0,0,e),K.embedPositionDetectionPattern(e.getWidth()-t,0,e),K.embedPositionDetectionPattern(0,e.getWidth()-t,e);let n=8;K.embedHorizontalSeparationPattern(0,n-1,e),K.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),K.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);let r=7;K.embedVerticalSeparationPattern(r,0,e),K.embedVerticalSeparationPattern(e.getHeight()-r-1,0,e),K.embedVerticalSeparationPattern(r,e.getHeight()-r,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;let n=e.getVersionNumber()-1,r=K.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let i=0,o=r.length;i!==o;i++){let s=r[i];if(s>=0)for(let a=0;a!==o;a++){let c=r[a];c>=0&&K.isEmpty(t.get(c,s))&&K.embedPositionAdjustmentPattern(c-2,s-2,t)}}}}K.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),K.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),K.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),K.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),K.VERSION_INFO_POLY=7973,K.TYPE_INFO_POLY=1335,K.TYPE_INFO_MASK_PATTERN=21522;class Oo{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Me{constructor(){}static calculateMaskPenalty(e){return rn.applyMaskPenaltyRule1(e)+rn.applyMaskPenaltyRule2(e)+rn.applyMaskPenaltyRule3(e)+rn.applyMaskPenaltyRule4(e)}static encode(e,t,n=null){let r=Me.DEFAULT_BYTE_MODE_ENCODING,i=n!==null&&n.get(ke.CHARACTER_SET)!==void 0;i&&(r=n.get(ke.CHARACTER_SET).toString());let o=this.chooseMode(e,r),s=new le;if(o===Y.BYTE&&(i||Me.DEFAULT_BYTE_MODE_ENCODING!==r)){let V=F.getCharacterSetECIByName(r);V!==void 0&&this.appendECI(V,s)}this.appendModeInfo(o,s);let a=new le;this.appendBytes(e,o,a,r);let c;if(n!==null&&n.get(ke.QR_VERSION)!==void 0){let V=Number.parseInt(n.get(ke.QR_VERSION).toString(),10);c=X.getVersionForNumber(V);let R=this.calculateBitsNeeded(o,s,a,c);if(!this.willFit(R,c,t))throw new _e("Data too big for requested version")}else c=this.recommendVersion(t,o,s,a);let f=new le;f.appendBitArray(s);let m=o===Y.BYTE?a.getSizeInBytes():e.length;this.appendLengthInfo(m,c,o,f),f.appendBitArray(a);let w=c.getECBlocksForLevel(t),E=c.getTotalCodewords()-w.getTotalECCodewords();this.terminateBits(E,f);let I=this.interleaveWithECBytes(f,c.getTotalCodewords(),E,w.getNumBlocks()),S=new Un;S.setECLevel(t),S.setMode(o),S.setVersion(c);let b=c.getDimensionForVersion(),M=new Fn(b,b),B=this.chooseMaskPattern(I,t,c,M);return S.setMaskPattern(B),K.buildMatrix(I,t,c,B,M),S.setMatrix(M),S}static recommendVersion(e,t,n,r){let i=this.calculateBitsNeeded(t,n,r,X.getVersionForNumber(1)),o=this.chooseVersion(i,e),s=this.calculateBitsNeeded(t,n,r,o);return this.chooseVersion(s,e)}static calculateBitsNeeded(e,t,n,r){return t.getSize()+e.getCharacterCountBits(r)+n.getSize()}static getAlphanumericCode(e){return e<Me.ALPHANUMERIC_TABLE.length?Me.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,t=null){if(F.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Y.KANJI;let n=!1,r=!1;for(let i=0,o=e.length;i<o;++i){let s=e.charAt(i);if(Me.isDigit(s))n=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)r=!0;else return Y.BYTE}return r?Y.ALPHANUMERIC:n?Y.NUMERIC:Y.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=rt.encode(e,F.SJIS)}catch{return!1}let n=t.length;if(n%2!==0)return!1;for(let r=0;r<n;r+=2){let i=t[r]&255;if((i<129||i>159)&&(i<224||i>235))return!1}return!0}static chooseMaskPattern(e,t,n,r){let i=Number.MAX_SAFE_INTEGER,o=-1;for(let s=0;s<Un.NUM_MASK_PATTERNS;s++){K.buildMatrix(e,t,n,s,r);let a=this.calculateMaskPenalty(r);a<i&&(i=a,o=s)}return o}static chooseVersion(e,t){for(let n=1;n<=40;n++){let r=X.getVersionForNumber(n);if(Me.willFit(e,r,t))return r}throw new _e("Data too big")}static willFit(e,t,n){let r=t.getTotalCodewords(),o=t.getECBlocksForLevel(n).getTotalECCodewords(),s=r-o,a=(e+7)/8;return s>=a}static terminateBits(e,t){let n=e*8;if(t.getSize()>n)throw new _e("data bits cannot fit in the QR Code"+t.getSize()+" > "+n);for(let o=0;o<4&&t.getSize()<n;++o)t.appendBit(!1);let r=t.getSize()&7;if(r>0)for(let o=r;o<8;o++)t.appendBit(!1);let i=e-t.getSizeInBytes();for(let o=0;o<i;++o)t.appendBits(o&1?17:236,8);if(t.getSize()!==n)throw new _e("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,n,r,i,o){if(r>=n)throw new _e("Block ID too large");let s=e%n,a=n-s,c=Math.floor(e/n),f=c+1,m=Math.floor(t/n),w=m+1,E=c-m,I=f-w;if(E!==I)throw new _e("EC bytes mismatch");if(n!==a+s)throw new _e("RS blocks mismatch");if(e!==(m+E)*a+(w+I)*s)throw new _e("Total bytes mismatch");r<a?(i[0]=m,o[0]=E):(i[0]=w,o[0]=I)}static interleaveWithECBytes(e,t,n,r){if(e.getSizeInBytes()!==n)throw new _e("Number of bits and data bytes does not match");let i=0,o=0,s=0,a=new Array;for(let f=0;f<r;++f){let m=new Int32Array(1),w=new Int32Array(1);Me.getNumDataBytesAndNumECBytesForBlockID(t,n,r,f,m,w);let E=m[0],I=new Uint8Array(E);e.toBytes(8*i,I,0,E);let S=Me.generateECBytes(I,w[0]);a.push(new Oo(I,S)),o=Math.max(o,E),s=Math.max(s,S.length),i+=m[0]}if(n!==i)throw new _e("Data bytes does not match offset");let c=new le;for(let f=0;f<o;++f)for(let m of a){let w=m.getDataBytes();f<w.length&&c.appendBits(w[f],8)}for(let f=0;f<s;++f)for(let m of a){let w=m.getErrorCorrectionBytes();f<w.length&&c.appendBits(w[f],8)}if(t!==c.getSizeInBytes())throw new _e("Interleaving error: "+t+" and "+c.getSizeInBytes()+" differ.");return c}static generateECBytes(e,t){let n=e.length,r=new Int32Array(n+t);for(let o=0;o<n;o++)r[o]=e[o]&255;new wr(me.QR_CODE_FIELD_256).encode(r,t);let i=new Uint8Array(t);for(let o=0;o<t;o++)i[o]=r[n+o];return i}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,n,r){let i=n.getCharacterCountBits(t);if(e>=1<<i)throw new _e(e+" is bigger than "+((1<<i)-1));r.appendBits(e,i)}static appendBytes(e,t,n,r){switch(t){case Y.NUMERIC:Me.appendNumericBytes(e,n);break;case Y.ALPHANUMERIC:Me.appendAlphanumericBytes(e,n);break;case Y.BYTE:Me.append8BitBytes(e,n,r);break;case Y.KANJI:Me.appendKanjiBytes(e,n);break;default:throw new _e("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){let t=Me.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){let n=e.length,r=0;for(;r<n;){let i=Me.getDigit(e.charAt(r));if(r+2<n){let o=Me.getDigit(e.charAt(r+1)),s=Me.getDigit(e.charAt(r+2));t.appendBits(i*100+o*10+s,10),r+=3}else if(r+1<n){let o=Me.getDigit(e.charAt(r+1));t.appendBits(i*10+o,7),r+=2}else t.appendBits(i,4),r++}}static appendAlphanumericBytes(e,t){let n=e.length,r=0;for(;r<n;){let i=Me.getAlphanumericCode(e.charCodeAt(r));if(i===-1)throw new _e;if(r+1<n){let o=Me.getAlphanumericCode(e.charCodeAt(r+1));if(o===-1)throw new _e;t.appendBits(i*45+o,11),r+=2}else t.appendBits(i,6),r++}}static append8BitBytes(e,t,n){let r;try{r=rt.encode(e,n)}catch(i){throw new _e(i)}for(let i=0,o=r.length;i!==o;i++){let s=r[i];t.appendBits(s,8)}}static appendKanjiBytes(e,t){let n;try{n=rt.encode(e,F.SJIS)}catch(i){throw new _e(i)}let r=n.length;for(let i=0;i<r;i+=2){let o=n[i]&255,s=n[i+1]&255,a=o<<8&4294967295|s,c=-1;if(a>=33088&&a<=40956?c=a-33088:a>=57408&&a<=60351&&(c=a-49472),c===-1)throw new _e("Invalid byte sequence");let f=(c>>8)*192+(c&255);t.appendBits(f,13)}}static appendECI(e,t){t.appendBits(Y.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}Me.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Me.DEFAULT_BYTE_MODE_ENCODING=F.UTF8.getName();let No=(()=>{class l{write(t,n,r,i=null){if(t.length===0)throw new C("Found empty contents");if(n<0||r<0)throw new C("Requested dimensions are too small: "+n+"x"+r);let o=Te.L,s=l.QUIET_ZONE_SIZE;i!==null&&(i.get(ke.ERROR_CORRECTION)!==void 0&&(o=Te.fromString(i.get(ke.ERROR_CORRECTION).toString())),i.get(ke.MARGIN)!==void 0&&(s=Number.parseInt(i.get(ke.MARGIN).toString(),10)));let a=Me.encode(t,o,i);return this.renderResult(a,n,r,s)}writeToDom(t,n,r,i,o=null){typeof t=="string"&&(t=document.querySelector(t));let s=this.write(n,r,i,o);t&&t.appendChild(s)}renderResult(t,n,r,i){let o=t.getMatrix();if(o===null)throw new Dt;let s=o.getWidth(),a=o.getHeight(),c=s+i*2,f=a+i*2,m=Math.max(n,c),w=Math.max(r,f),E=Math.min(Math.floor(m/c),Math.floor(w/f)),I=Math.floor((m-s*E)/2),S=Math.floor((w-a*E)/2),b=this.createSVGElement(m,w);for(let M=0,B=S;M<a;M++,B+=E)for(let V=0,R=I;V<s;V++,R+=E)if(o.get(V,M)===1){let se=this.createSvgRectElement(R,B,E,E);b.appendChild(se)}return b}createSVGElement(t,n){let r=document.createElementNS(l.SVG_NS,"svg");return r.setAttributeNS(null,"height",t.toString()),r.setAttributeNS(null,"width",n.toString()),r}createSvgRectElement(t,n,r,i){let o=document.createElementNS(l.SVG_NS,"rect");return o.setAttributeNS(null,"x",t.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"height",r.toString()),o.setAttributeNS(null,"width",i.toString()),o.setAttributeNS(null,"fill","#000000"),o}}return l.QUIET_ZONE_SIZE=4,l.SVG_NS="http://www.w3.org/2000/svg",l})(),ti=(()=>{class l{encode(t,n,r,i,o){if(t.length===0)throw new C("Found empty contents");if(n!==q.QR_CODE)throw new C("Can only encode QR_CODE, but got "+n);if(r<0||i<0)throw new C(`Requested dimensions are too small: ${r}x${i}`);let s=Te.L,a=l.QUIET_ZONE_SIZE;o!==null&&(o.get(ke.ERROR_CORRECTION)!==void 0&&(s=Te.fromString(o.get(ke.ERROR_CORRECTION).toString())),o.get(ke.MARGIN)!==void 0&&(a=Number.parseInt(o.get(ke.MARGIN).toString(),10)));let c=Me.encode(t,s,o);return l.renderResult(c,r,i,a)}static renderResult(t,n,r,i){let o=t.getMatrix();if(o===null)throw new Dt;let s=o.getWidth(),a=o.getHeight(),c=s+i*2,f=a+i*2,m=Math.max(n,c),w=Math.max(r,f),E=Math.min(Math.floor(m/c),Math.floor(w/f)),I=Math.floor((m-s*E)/2),S=Math.floor((w-a*E)/2),b=new Ue(m,w);for(let M=0,B=S;M<a;M++,B+=E)for(let V=0,R=I;V<s;V++,R+=E)o.get(V,M)===1&&b.setRegion(R,B,E,E);return b}}return l.QUIET_ZONE_SIZE=4,l})();class Do{encode(e,t,n,r,i){let o;switch(t){case q.QR_CODE:o=new ti;break;default:throw new C("No encoder available for format "+t)}return o.encode(e,t,n,r,i)}}let Ro=(()=>{class l extends dn{constructor(t,n,r,i,o,s,a,c){if(super(s,a),this.yuvData=t,this.dataWidth=n,this.dataHeight=r,this.left=i,this.top=o,i+s>n||o+a>r)throw new C("Crop rectangle does not fit within image data.");c&&this.reverseHorizontal(s,a)}getRow(t,n){if(t<0||t>=this.getHeight())throw new C("Requested row is outside the image: "+t);let r=this.getWidth();(n==null||n.length<r)&&(n=new Uint8ClampedArray(r));let i=(t+this.top)*this.dataWidth+this.left;return Q.arraycopy(this.yuvData,i,n,0,r),n}getMatrix(){let t=this.getWidth(),n=this.getHeight();if(t===this.dataWidth&&n===this.dataHeight)return this.yuvData;let r=t*n,i=new Uint8ClampedArray(r),o=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Q.arraycopy(this.yuvData,o,i,0,r),i;for(let s=0;s<n;s++){let a=s*t;Q.arraycopy(this.yuvData,o,i,a,t),o+=this.dataWidth}return i}isCropSupported(){return!0}crop(t,n,r,i){return new l(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+n,r,i,!1)}renderThumbnail(){let t=this.getWidth()/l.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/l.THUMBNAIL_SCALE_FACTOR,r=new Int32Array(t*n),i=this.yuvData,o=this.top*this.dataWidth+this.left;for(let s=0;s<n;s++){let a=s*t;for(let c=0;c<t;c++){let f=i[o+c*l.THUMBNAIL_SCALE_FACTOR]&255;r[a+c]=4278190080|f*65793}o+=this.dataWidth*l.THUMBNAIL_SCALE_FACTOR}return r}getThumbnailWidth(){return this.getWidth()/l.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/l.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,n){let r=this.yuvData;for(let i=0,o=this.top*this.dataWidth+this.left;i<n;i++,o+=this.dataWidth){let s=o+t/2;for(let a=o,c=o+t-1;a<s;a++,c--){let f=r[a];r[a]=r[c],r[c]=f}}}invert(){return new Bt(this)}}return l.THUMBNAIL_SCALE_FACTOR=2,l})();class Ar extends dn{constructor(e,t,n,r,i,o,s){if(super(t,n),this.dataWidth=r,this.dataHeight=i,this.left=o,this.top=s,e.BYTES_PER_ELEMENT===4){let a=t*n,c=new Uint8ClampedArray(a);for(let f=0;f<a;f++){let m=e[f],w=m>>16&255,E=m>>7&510,I=m&255;c[f]=(w+E+I)/4&255}this.luminances=c}else this.luminances=e;if(r===void 0&&(this.dataWidth=t),i===void 0&&(this.dataHeight=n),o===void 0&&(this.left=0),s===void 0&&(this.top=0),this.left+t>this.dataWidth||this.top+n>this.dataHeight)throw new C("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new C("Requested row is outside the image: "+e);let n=this.getWidth();(t==null||t.length<n)&&(t=new Uint8ClampedArray(n));let r=(e+this.top)*this.dataWidth+this.left;return Q.arraycopy(this.luminances,r,t,0,n),t}getMatrix(){let e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;let n=e*t,r=new Uint8ClampedArray(n),i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return Q.arraycopy(this.luminances,i,r,0,n),r;for(let o=0;o<t;o++){let s=o*e;Q.arraycopy(this.luminances,i,r,s,e),i+=this.dataWidth}return r}isCropSupported(){return!0}crop(e,t,n,r){return new Ar(this.luminances,n,r,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new Bt(this)}}class ni extends F{static forName(e){return this.getCharacterSetECIByName(e)}}class Er{}Er.ISO_8859_1=F.ISO8859_1;class ri{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class ii{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class vo{constructor(e){this.previous=e}getPrevious(){return this.previous}}class on extends vo{constructor(e,t,n){super(e),this.value=t,this.bitCount=n}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new on(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new on(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+W.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Ir extends on{constructor(e,t,n){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=n}appendTo(e,t){for(let n=0;n<this.binaryShiftByteCount;n++)(n===0||n===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):n===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+n],8)}addBinaryShift(e,t){return new Ir(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Lo(l,e,t){return new Ir(l,e,t)}function Sn(l,e,t){return new on(l,e,t)}let Bo=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],jt=0,Vn=1,mt=2,oi=3,Mt=4,Po=new on(null,0,0),yr=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function ko(l){for(let e of l)ne.fill(e,-1);return l[jt][Mt]=0,l[Vn][Mt]=0,l[Vn][jt]=28,l[oi][Mt]=0,l[mt][Mt]=0,l[mt][jt]=15,l}let si=ko(ne.createInt32Array(6,6));class Ot{constructor(e,t,n,r){this.token=e,this.mode=t,this.binaryShiftByteCount=n,this.bitCount=r}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let n=this.bitCount,r=this.token;if(e!==this.mode){let o=yr[this.mode][e];r=Sn(r,o&65535,o>>16),n+=o>>16}let i=e===mt?4:5;return r=Sn(r,t,i),new Ot(r,e,0,n+i)}shiftAndAppend(e,t){let n=this.token,r=this.mode===mt?4:5;return n=Sn(n,si[this.mode][e],r),n=Sn(n,t,5),new Ot(n,this.mode,0,this.bitCount+r+5)}addBinaryShiftChar(e){let t=this.token,n=this.mode,r=this.bitCount;if(this.mode===Mt||this.mode===mt){let s=yr[n][jt];t=Sn(t,s&65535,s>>16),r+=s>>16,n=jt}let i=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,o=new Ot(t,n,this.binaryShiftByteCount+1,r+i);return o.binaryShiftByteCount===2078&&(o=o.endBinaryShift(e+1)),o}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let t=this.token;return t=Lo(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new Ot(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(yr[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=Ot.calculateBinaryShiftCost(e)-Ot.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let r=this.endBinaryShift(e.length).token;r!==null;r=r.getPrevious())t.unshift(r);let n=new le;for(let r of t)r.appendTo(n,e);return n}toString(){return ee.format("%s bits=%d bytes=%d",Bo[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}Ot.INITIAL_STATE=new Ot(Po,jt,0,0);function Fo(l){let e=ee.getCharCode(" "),t=ee.getCharCode("."),n=ee.getCharCode(",");l[jt][e]=1;let r=ee.getCharCode("Z"),i=ee.getCharCode("A");for(let w=i;w<=r;w++)l[jt][w]=w-i+2;l[Vn][e]=1;let o=ee.getCharCode("z"),s=ee.getCharCode("a");for(let w=s;w<=o;w++)l[Vn][w]=w-s+2;l[mt][e]=1;let a=ee.getCharCode("9"),c=ee.getCharCode("0");for(let w=c;w<=a;w++)l[mt][w]=w-c+2;l[mt][n]=12,l[mt][t]=13;let f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F"];for(let w=0;w<f.length;w++)l[oi][ee.getCharCode(f[w])]=w;let m=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let w=0;w<m.length;w++)ee.getCharCode(m[w])>0&&(l[Mt][ee.getCharCode(m[w])]=w);return l}let Sr=Fo(ne.createInt32Array(5,256));class bn{constructor(e){this.text=e}encode(){let e=ee.getCharCode(" "),t=ee.getCharCode(`
`),n=ii.singletonList(Ot.INITIAL_STATE);for(let i=0;i<this.text.length;i++){let o,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case ee.getCharCode("\r"):o=s===t?2:0;break;case ee.getCharCode("."):o=s===e?3:0;break;case ee.getCharCode(","):o=s===e?4:0;break;case ee.getCharCode(":"):o=s===e?5:0;break;default:o=0}o>0?(n=bn.updateStateListForPair(n,i,o),i++):n=this.updateStateListForChar(n,i)}return ii.min(n,(i,o)=>i.getBitCount()-o.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,t){let n=[];for(let r of e)this.updateStateForChar(r,t,n);return bn.simplifyStates(n)}updateStateForChar(e,t,n){let r=this.text[t]&255,i=Sr[e.getMode()][r]>0,o=null;for(let s=0;s<=Mt;s++){let a=Sr[s][r];if(a>0){if(o==null&&(o=e.endBinaryShift(t)),!i||s===e.getMode()||s===mt){let c=o.latchAndAppend(s,a);n.push(c)}if(!i&&si[e.getMode()][s]>=0){let c=o.shiftAndAppend(s,a);n.push(c)}}}if(e.getBinaryShiftByteCount()>0||Sr[e.getMode()][r]===0){let s=e.addBinaryShiftChar(t);n.push(s)}}static updateStateListForPair(e,t,n){let r=[];for(let i of e)this.updateStateForPair(i,t,n,r);return this.simplifyStates(r)}static updateStateForPair(e,t,n,r){let i=e.endBinaryShift(t);if(r.push(i.latchAndAppend(Mt,n)),e.getMode()!==Mt&&r.push(i.shiftAndAppend(Mt,n)),n===3||n===4){let o=i.latchAndAppend(mt,16-n).latchAndAppend(mt,1);r.push(o)}if(e.getBinaryShiftByteCount()>0){let o=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);r.push(o)}}static simplifyStates(e){let t=[];for(let n of e){let r=!0;for(let i of t){if(i.isBetterThanOrEqualTo(n)){r=!1;break}n.isBetterThanOrEqualTo(i)&&(t=t.filter(o=>o!==i))}r&&t.push(n)}return t}}class de{constructor(){}static encodeBytes(e){return de.encode(e,de.DEFAULT_EC_PERCENT,de.DEFAULT_AZTEC_LAYERS)}static encode(e,t,n){let r=new bn(e).encode(),i=W.truncDivision(r.getSize()*t,100)+11,o=r.getSize()+i,s,a,c,f,m;if(n!==de.DEFAULT_AZTEC_LAYERS){if(s=n<0,a=Math.abs(n),a>(s?de.MAX_NB_BITS_COMPACT:de.MAX_NB_BITS))throw new C(ee.format("Illegal value %s for layers",n));c=de.totalBitsInLayer(a,s),f=de.WORD_SIZE[a];let R=c-c%f;if(m=de.stuffBits(r,f),m.getSize()+i>R)throw new C("Data to large for user specified layer");if(s&&m.getSize()>f*64)throw new C("Data to large for user specified layer")}else{f=0,m=null;for(let R=0;;R++){if(R>de.MAX_NB_BITS)throw new C("Data too large for an Aztec code");if(s=R<=3,a=s?R+1:R,c=de.totalBitsInLayer(a,s),o>c)continue;(m==null||f!==de.WORD_SIZE[a])&&(f=de.WORD_SIZE[a],m=de.stuffBits(r,f));let se=c-c%f;if(!(s&&m.getSize()>f*64)&&m.getSize()+i<=se)break}}let w=de.generateCheckWords(m,c,f),E=m.getSize()/f,I=de.generateModeMessage(s,a,E),S=(s?11:14)+a*4,b=new Int32Array(S),M;if(s){M=S;for(let R=0;R<b.length;R++)b[R]=R}else{M=S+1+2*W.truncDivision(W.truncDivision(S,2)-1,15);let R=W.truncDivision(S,2),se=W.truncDivision(M,2);for(let te=0;te<R;te++){let st=te+W.truncDivision(te,15);b[R-te-1]=se-st-1,b[R+te]=se+st+1}}let B=new Ue(M);for(let R=0,se=0;R<a;R++){let te=(a-R)*4+(s?9:12);for(let st=0;st<te;st++){let St=st*2;for(let at=0;at<2;at++)w.get(se+St+at)&&B.set(b[R*2+at],b[R*2+st]),w.get(se+te*2+St+at)&&B.set(b[R*2+st],b[S-1-R*2-at]),w.get(se+te*4+St+at)&&B.set(b[S-1-R*2-at],b[S-1-R*2-st]),w.get(se+te*6+St+at)&&B.set(b[S-1-R*2-st],b[R*2+at])}se+=te*8}if(de.drawModeMessage(B,s,M,I),s)de.drawBullsEye(B,W.truncDivision(M,2),5);else{de.drawBullsEye(B,W.truncDivision(M,2),7);for(let R=0,se=0;R<W.truncDivision(S,2)-1;R+=15,se+=16)for(let te=W.truncDivision(M,2)&1;te<M;te+=2)B.set(W.truncDivision(M,2)-se,te),B.set(W.truncDivision(M,2)+se,te),B.set(te,W.truncDivision(M,2)-se),B.set(te,W.truncDivision(M,2)+se)}let V=new ri;return V.setCompact(s),V.setSize(M),V.setLayers(a),V.setCodeWords(E),V.setMatrix(B),V}static drawBullsEye(e,t,n){for(let r=0;r<n;r+=2)for(let i=t-r;i<=t+r;i++)e.set(i,t-r),e.set(i,t+r),e.set(t-r,i),e.set(t+r,i);e.set(t-n,t-n),e.set(t-n+1,t-n),e.set(t-n,t-n+1),e.set(t+n,t-n),e.set(t+n,t-n+1),e.set(t+n,t+n-1)}static generateModeMessage(e,t,n){let r=new le;return e?(r.appendBits(t-1,2),r.appendBits(n-1,6),r=de.generateCheckWords(r,28,4)):(r.appendBits(t-1,5),r.appendBits(n-1,11),r=de.generateCheckWords(r,40,4)),r}static drawModeMessage(e,t,n,r){let i=W.truncDivision(n,2);if(t)for(let o=0;o<7;o++){let s=i-3+o;r.get(o)&&e.set(s,i-5),r.get(o+7)&&e.set(i+5,s),r.get(20-o)&&e.set(s,i+5),r.get(27-o)&&e.set(i-5,s)}else for(let o=0;o<10;o++){let s=i-5+o+W.truncDivision(o,5);r.get(o)&&e.set(s,i-7),r.get(o+10)&&e.set(i+7,s),r.get(29-o)&&e.set(s,i+7),r.get(39-o)&&e.set(i-7,s)}}static generateCheckWords(e,t,n){let r=e.getSize()/n,i=new wr(de.getGF(n)),o=W.truncDivision(t,n),s=de.bitsToWords(e,n,o);i.encode(s,o-r);let a=t%n,c=new le;c.appendBits(0,a);for(let f of Array.from(s))c.appendBits(f,n);return c}static bitsToWords(e,t,n){let r=new Int32Array(n),i,o;for(i=0,o=e.getSize()/t;i<o;i++){let s=0;for(let a=0;a<t;a++)s|=e.get(i*t+a)?1<<t-a-1:0;r[i]=s}return r}static getGF(e){switch(e){case 4:return me.AZTEC_PARAM;case 6:return me.AZTEC_DATA_6;case 8:return me.AZTEC_DATA_8;case 10:return me.AZTEC_DATA_10;case 12:return me.AZTEC_DATA_12;default:throw new C("Unsupported word size "+e)}}static stuffBits(e,t){let n=new le,r=e.getSize(),i=(1<<t)-2;for(let o=0;o<r;o+=t){let s=0;for(let a=0;a<t;a++)(o+a>=r||e.get(o+a))&&(s|=1<<t-1-a);(s&i)===i?(n.appendBits(s&i,t),o--):s&i?n.appendBits(s,t):(n.appendBits(s|1,t),o--)}return n}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}de.DEFAULT_EC_PERCENT=33,de.DEFAULT_AZTEC_LAYERS=0,de.MAX_NB_BITS=32,de.MAX_NB_BITS_COMPACT=4,de.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Hn{encode(e,t,n,r){return this.encodeWithHints(e,t,n,r,null)}encodeWithHints(e,t,n,r,i){let o=Er.ISO_8859_1,s=de.DEFAULT_EC_PERCENT,a=de.DEFAULT_AZTEC_LAYERS;return i!=null&&(i.has(ke.CHARACTER_SET)&&(o=ni.forName(i.get(ke.CHARACTER_SET).toString())),i.has(ke.ERROR_CORRECTION)&&(s=W.parseInt(i.get(ke.ERROR_CORRECTION).toString())),i.has(ke.AZTEC_LAYERS)&&(a=W.parseInt(i.get(ke.AZTEC_LAYERS).toString()))),Hn.encodeLayers(e,t,n,r,o,s,a)}static encodeLayers(e,t,n,r,i,o,s){if(t!==q.AZTEC)throw new C("Can only encode AZTEC, but got "+t);let a=de.encode(ee.getBytes(e,i),o,s);return Hn.renderResult(a,n,r)}static renderResult(e,t,n){let r=e.getMatrix();if(r==null)throw new Dt;let i=r.getWidth(),o=r.getHeight(),s=Math.max(t,i),a=Math.max(n,o),c=Math.min(s/i,a/o),f=(s-i*c)/2,m=(a-o*c)/2,w=new Ue(s,a);for(let E=0,I=m;E<o;E++,I+=c)for(let S=0,b=f;S<i;S++,b+=c)r.get(S,E)&&w.setRegion(b,I,c,c);return w}}u.AbstractExpandedDecoder=lr,u.ArgumentException=N,u.ArithmeticException=nr,u.AztecCode=ri,u.AztecCodeReader=Dn,u.AztecCodeWriter=Hn,u.AztecDecoder=rr,u.AztecDetector=Ur,u.AztecDetectorResult=kr,u.AztecEncoder=de,u.AztecHighLevelEncoder=bn,u.AztecPoint=et,u.BarcodeFormat=q,u.Binarizer=xe,u.BinaryBitmap=D,u.BitArray=le,u.BitMatrix=Ue,u.BitSource=dr,u.BrowserAztecCodeReader=eo,u.BrowserBarcodeReader=lo,u.BrowserCodeReader=Yt,u.BrowserDatamatrixCodeReader=ho,u.BrowserMultiFormatReader=To,u.BrowserPDF417Reader=_o,u.BrowserQRCodeReader=Mo,u.BrowserQRCodeSvgWriter=No,u.CharacterSetECI=F,u.ChecksumException=P,u.Code128Reader=U,u.Code39Reader=or,u.DataMatrixDecodedBitStreamParser=Vt,u.DataMatrixReader=Bn,u.DecodeHintType=ue,u.DecoderResult=gn,u.DefaultGridSampler=Fr,u.DetectorResult=On,u.EAN13Reader=Rn,u.EncodeHintType=ke,u.Exception=T,u.FormatException=k,u.GenericGF=me,u.GenericGFPoly=it,u.GlobalHistogramBinarizer=Ve,u.GridSampler=ir,u.GridSamplerInstance=kt,u.HTMLCanvasElementLuminanceSource=Pt,u.HybridBinarizer=re,u.ITFReader=ye,u.IllegalArgumentException=C,u.IllegalStateException=Dt,u.InvertedLuminanceSource=Bt,u.LuminanceSource=dn,u.MathUtils=fe,u.MultiFormatOneDReader=nn,u.MultiFormatReader=$r,u.MultiFormatWriter=Do,u.NotFoundException=v,u.OneDReader=Pe,u.PDF417DecodedBitStreamParser=O,u.PDF417DecoderErrorCorrection=Yr,u.PDF417Reader=We,u.PDF417ResultMetadata=qr,u.PerspectiveTransform=wt,u.PlanarYUVLuminanceSource=Ro,u.QRCodeByteMatrix=Fn,u.QRCodeDataMask=xt,u.QRCodeDecodedBitStreamParser=Xr,u.QRCodeDecoderErrorCorrectionLevel=Te,u.QRCodeDecoderFormatInformation=Qe,u.QRCodeEncoder=Me,u.QRCodeEncoderQRCode=Un,u.QRCodeMaskUtil=rn,u.QRCodeMatrixUtil=K,u.QRCodeMode=Y,u.QRCodeReader=Ht,u.QRCodeVersion=X,u.QRCodeWriter=ti,u.RGBLuminanceSource=Ar,u.RSS14Reader=ve,u.RSSExpandedReader=L,u.ReaderException=Cr,u.ReedSolomonDecoder=pn,u.ReedSolomonEncoder=wr,u.ReedSolomonException=mn,u.Result=$e,u.ResultMetadataType=He,u.ResultPoint=j,u.StringUtils=ee,u.UnsupportedOperationException=fn,u.VideoInputDevice=Lr,u.WhiteRectangleDetector=Nn,u.WriterException=_e,u.ZXingArrays=ne,u.ZXingCharset=ni,u.ZXingInteger=W,u.ZXingStandardCharsets=Er,u.ZXingStringBuilder=Ie,u.ZXingStringEncoding=rt,u.ZXingSystem=Q,u.createAbstractExpandedDecoder=Gr,Object.defineProperty(u,"__esModule",{value:!0})})});var H=function(u){return u[u.QR_CODE=0]="QR_CODE",u[u.AZTEC=1]="AZTEC",u[u.CODABAR=2]="CODABAR",u[u.CODE_39=3]="CODE_39",u[u.CODE_93=4]="CODE_93",u[u.CODE_128=5]="CODE_128",u[u.DATA_MATRIX=6]="DATA_MATRIX",u[u.MAXICODE=7]="MAXICODE",u[u.ITF=8]="ITF",u[u.EAN_13=9]="EAN_13",u[u.EAN_8=10]="EAN_8",u[u.PDF_417=11]="PDF_417",u[u.RSS_14=12]="RSS_14",u[u.RSS_EXPANDED=13]="RSS_EXPANDED",u[u.UPC_A=14]="UPC_A",u[u.UPC_E=15]="UPC_E",u[u.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",u}(H||{}),Si=new Map([[H.QR_CODE,"QR_CODE"],[H.AZTEC,"AZTEC"],[H.CODABAR,"CODABAR"],[H.CODE_39,"CODE_39"],[H.CODE_93,"CODE_93"],[H.CODE_128,"CODE_128"],[H.DATA_MATRIX,"DATA_MATRIX"],[H.MAXICODE,"MAXICODE"],[H.ITF,"ITF"],[H.EAN_13,"EAN_13"],[H.EAN_8,"EAN_8"],[H.PDF_417,"PDF_417"],[H.RSS_14,"RSS_14"],[H.RSS_EXPANDED,"RSS_EXPANDED"],[H.UPC_A,"UPC_A"],[H.UPC_E,"UPC_E"],[H.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function bi(u){return Object.values(H).includes(u)}var Nt=function(u){return u[u.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",u[u.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE",u}(Nt||{}),ut=function(){function u(){}return u.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",u.SCAN_DEFAULT_FPS=2,u.DEFAULT_DISABLE_FLIP=!1,u.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,u.DEFAULT_SUPPORTED_SCAN_TYPE=[Nt.SCAN_TYPE_CAMERA,Nt.SCAN_TYPE_FILE],u}();var qn=function(){function u(h,d){this.format=h,this.formatName=d}return u.prototype.toString=function(){return this.formatName},u.create=function(h){if(!Si.has(h))throw"".concat(h," not in html5QrcodeSupportedFormatsTextMap");return new u(h,Si.get(h))},u}();var br=function(){function u(){}return u.createFromText=function(h){var d={text:h};return{decodedText:h,result:d}},u.createFromQrcodeResult=function(h){return{decodedText:h.text,result:h}},u}();var Ti=function(u){return u[u.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",u[u.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",u[u.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR",u}(Ti||{}),Kn=function(){function u(){}return u.createFrom=function(h){return{errorMessage:h,type:Ti.UNKWOWN_ERROR}},u}();var Jn=function(){function u(h){this.verbose=h}return u.prototype.log=function(h){this.verbose&&console.log(h)},u.prototype.warn=function(h){this.verbose&&console.warn(h)},u.prototype.logError=function(h,d){(this.verbose||d===!0)&&console.error(h)},u.prototype.logErrors=function(h){if(h.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(h)},u}();function pt(u){return typeof u>"u"||u===null}function _i(u,h,d){return u>d?d:u<h?h:u}var Xt=function(){function u(){}return u.codeParseError=function(h){return"QR code parse error, error = ".concat(h)},u.errorGettingUserMedia=function(h){return"Error getting userMedia, error = ".concat(h)},u.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},u.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},u.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},u.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},u.scannerPaused=function(){return"Scanner paused"},u}();var he=function(){function u(){}return u.scanningStatus=function(){return"Scanning"},u.idleStatus=function(){return"Idle"},u.errorStatus=function(){return"Error"},u.permissionStatus=function(){return"Permission"},u.noCameraFoundErrorStatus=function(){return"No Cameras"},u.lastMatch=function(h){return"Last Match: ".concat(h)},u.codeScannerTitle=function(){return"Code Scanner"},u.cameraPermissionTitle=function(){return"Request Camera Permissions"},u.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},u.noCameraFound=function(){return"No camera found"},u.scanButtonStopScanningText=function(){return"Stop Scanning"},u.scanButtonStartScanningText=function(){return"Start Scanning"},u.torchOnButton=function(){return"Switch On Torch"},u.torchOffButton=function(){return"Switch Off Torch"},u.torchOnFailedMessage=function(){return"Failed to turn on torch"},u.torchOffFailedMessage=function(){return"Failed to turn off torch"},u.scanButtonScanningStarting=function(){return"Launching Camera..."},u.textIfCameraScanSelected=function(){return"Scan an Image File"},u.textIfFileScanSelected=function(){return"Scan using camera directly"},u.selectCamera=function(){return"Select Camera"},u.fileSelectionChooseImage=function(){return"Choose Image"},u.fileSelectionChooseAnother=function(){return"Choose Another"},u.fileSelectionNoImageSelected=function(){return"No image choosen"},u.anonymousCameraPrefix=function(){return"Anonymous Camera"},u.dragAndDropMessage=function(){return"Or drop an image to scan"},u.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},u.zoom=function(){return"zoom"},u.loadingImage=function(){return"Loading image..."},u.cameraScanAltText=function(){return"Camera based scan"},u.fileScanAltText=function(){return"Fule based scan"},u}();var Tr=function(){function u(){}return u.poweredBy=function(){return"Powered by "},u.reportIssues=function(){return"Report issues"},u}();var _r=function(){function u(){}return u.isMediaStreamConstraintsValid=function(h,d){if(typeof h!="object"){var x=typeof h;return d.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(x,"."),!0),!1}for(var p=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],g=new Set(p),y=Object.keys(h),T=0,N=y;T<N.length;T++){var C=N[T];if(g.has(C))return d.logError("".concat(C," is not supported videoConstaints."),!0),!1}return!0},u}();var Ee=zo(Oi());var Mr=function(){function u(h,d,x){if(this.formatMap=new Map([[H.QR_CODE,Ee.BarcodeFormat.QR_CODE],[H.AZTEC,Ee.BarcodeFormat.AZTEC],[H.CODABAR,Ee.BarcodeFormat.CODABAR],[H.CODE_39,Ee.BarcodeFormat.CODE_39],[H.CODE_93,Ee.BarcodeFormat.CODE_93],[H.CODE_128,Ee.BarcodeFormat.CODE_128],[H.DATA_MATRIX,Ee.BarcodeFormat.DATA_MATRIX],[H.MAXICODE,Ee.BarcodeFormat.MAXICODE],[H.ITF,Ee.BarcodeFormat.ITF],[H.EAN_13,Ee.BarcodeFormat.EAN_13],[H.EAN_8,Ee.BarcodeFormat.EAN_8],[H.PDF_417,Ee.BarcodeFormat.PDF_417],[H.RSS_14,Ee.BarcodeFormat.RSS_14],[H.RSS_EXPANDED,Ee.BarcodeFormat.RSS_EXPANDED],[H.UPC_A,Ee.BarcodeFormat.UPC_A],[H.UPC_E,Ee.BarcodeFormat.UPC_E],[H.UPC_EAN_EXTENSION,Ee.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Ee)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=d,this.logger=x;var p=this.createZXingFormats(h),g=new Map;g.set(Ee.DecodeHintType.POSSIBLE_FORMATS,p),g.set(Ee.DecodeHintType.TRY_HARDER,!1),this.hints=g}return u.prototype.decodeAsync=function(h){var d=this;return new Promise(function(x,p){try{x(d.decode(h))}catch(g){p(g)}})},u.prototype.decode=function(h){var d=new Ee.MultiFormatReader(this.verbose,this.hints),x=new Ee.HTMLCanvasElementLuminanceSource(h),p=new Ee.BinaryBitmap(new Ee.HybridBinarizer(x)),g=d.decode(p);return{text:g.text,format:qn.create(this.toHtml5QrcodeSupportedFormats(g.format)),debugData:this.createDebugData()}},u.prototype.createReverseFormatMap=function(){var h=new Map;return this.formatMap.forEach(function(d,x,p){h.set(d,x)}),h},u.prototype.toHtml5QrcodeSupportedFormats=function(h){if(!this.reverseFormatMap.has(h))throw"reverseFormatMap doesn't have ".concat(h);return this.reverseFormatMap.get(h)},u.prototype.createZXingFormats=function(h){for(var d=[],x=0,p=h;x<p.length;x++){var g=p[x];this.formatMap.has(g)?d.push(this.formatMap.get(g)):this.logger.logError("".concat(g," is not supported by")+"ZXingHtml5QrcodeShim")}return d},u.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},u}();var jo=function(u,h,d,x){function p(g){return g instanceof d?g:new d(function(y){y(g)})}return new(d||(d=Promise))(function(g,y){function T(D){try{C(x.next(D))}catch(P){y(P)}}function N(D){try{C(x.throw(D))}catch(P){y(P)}}function C(D){D.done?g(D.value):p(D.value).then(T,N)}C((x=x.apply(u,h||[])).next())})},Go=function(u,h){var d={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},x,p,g,y;return y={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function T(C){return function(D){return N([C,D])}}function N(C){if(x)throw new TypeError("Generator is already executing.");for(;y&&(y=0,C[0]&&(d=0)),d;)try{if(x=1,p&&(g=C[0]&2?p.return:C[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,C[1])).done)return g;switch(p=0,g&&(C=[C[0]&2,g.value]),C[0]){case 0:case 1:g=C;break;case 4:return d.label++,{value:C[1],done:!1};case 5:d.label++,p=C[1],C=[0];continue;case 7:C=d.ops.pop(),d.trys.pop();continue;default:if(g=d.trys,!(g=g.length>0&&g[g.length-1])&&(C[0]===6||C[0]===2)){d=0;continue}if(C[0]===3&&(!g||C[1]>g[0]&&C[1]<g[3])){d.label=C[1];break}if(C[0]===6&&d.label<g[1]){d.label=g[1],g=C;break}if(g&&d.label<g[2]){d.label=g[2],d.ops.push(C);break}g[2]&&d.ops.pop(),d.trys.pop();continue}C=h.call(u,d)}catch(D){C=[6,D],p=0}finally{x=g=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},Or=function(){function u(h,d,x){if(this.formatMap=new Map([[H.QR_CODE,"qr_code"],[H.AZTEC,"aztec"],[H.CODABAR,"codabar"],[H.CODE_39,"code_39"],[H.CODE_93,"code_93"],[H.CODE_128,"code_128"],[H.DATA_MATRIX,"data_matrix"],[H.ITF,"itf"],[H.EAN_13,"ean_13"],[H.EAN_8,"ean_8"],[H.PDF_417,"pdf417"],[H.UPC_A,"upc_a"],[H.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!u.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=d,this.logger=x;var p=this.createBarcodeDetectorFormats(h);if(this.detector=new BarcodeDetector(p),!this.detector)throw"BarcodeDetector detector not supported"}return u.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var h=new BarcodeDetector({formats:["qr_code"]});return typeof h<"u"},u.prototype.decodeAsync=function(h){return jo(this,void 0,void 0,function(){var d,x;return Go(this,function(p){switch(p.label){case 0:return[4,this.detector.detect(h)];case 1:if(d=p.sent(),!d||d.length===0)throw"No barcode or QR code detected.";return x=this.selectLargestBarcode(d),[2,{text:x.rawValue,format:qn.create(this.toHtml5QrcodeSupportedFormats(x.format)),debugData:this.createDebugData()}]}})})},u.prototype.selectLargestBarcode=function(h){for(var d=null,x=0,p=0,g=h;p<g.length;p++){var y=g[p],T=y.boundingBox.width*y.boundingBox.height;T>x&&(x=T,d=y)}if(!d)throw"No largest barcode found";return d},u.prototype.createBarcodeDetectorFormats=function(h){for(var d=[],x=0,p=h;x<p.length;x++){var g=p[x];this.formatMap.has(g)?d.push(this.formatMap.get(g)):this.logger.warn("".concat(g," is not supported by")+"BarcodeDetectorDelegate")}return{formats:d}},u.prototype.toHtml5QrcodeSupportedFormats=function(h){if(!this.reverseFormatMap.has(h))throw"reverseFormatMap doesn't have ".concat(h);return this.reverseFormatMap.get(h)},u.prototype.createReverseFormatMap=function(){var h=new Map;return this.formatMap.forEach(function(d,x,p){h.set(d,x)}),h},u.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},u}();var Ni=function(u,h,d,x){function p(g){return g instanceof d?g:new d(function(y){y(g)})}return new(d||(d=Promise))(function(g,y){function T(D){try{C(x.next(D))}catch(P){y(P)}}function N(D){try{C(x.throw(D))}catch(P){y(P)}}function C(D){D.done?g(D.value):p(D.value).then(T,N)}C((x=x.apply(u,h||[])).next())})},Di=function(u,h){var d={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},x,p,g,y;return y={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function T(C){return function(D){return N([C,D])}}function N(C){if(x)throw new TypeError("Generator is already executing.");for(;y&&(y=0,C[0]&&(d=0)),d;)try{if(x=1,p&&(g=C[0]&2?p.return:C[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,C[1])).done)return g;switch(p=0,g&&(C=[C[0]&2,g.value]),C[0]){case 0:case 1:g=C;break;case 4:return d.label++,{value:C[1],done:!1};case 5:d.label++,p=C[1],C=[0];continue;case 7:C=d.ops.pop(),d.trys.pop();continue;default:if(g=d.trys,!(g=g.length>0&&g[g.length-1])&&(C[0]===6||C[0]===2)){d=0;continue}if(C[0]===3&&(!g||C[1]>g[0]&&C[1]<g[3])){d.label=C[1];break}if(C[0]===6&&d.label<g[1]){d.label=g[1],g=C;break}if(g&&d.label<g[2]){d.label=g[2],d.ops.push(C);break}g[2]&&d.ops.pop(),d.trys.pop();continue}C=h.call(u,d)}catch(D){C=[6,D],p=0}finally{x=g=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},Ri=function(){function u(h,d,x,p){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=x,d&&Or.isSupported()?(this.primaryDecoder=new Or(h,x,p),this.secondaryDecoder=new Mr(h,x,p)):this.primaryDecoder=new Mr(h,x,p)}return u.prototype.decodeAsync=function(h){return Ni(this,void 0,void 0,function(){var d;return Di(this,function(x){switch(x.label){case 0:d=performance.now(),x.label=1;case 1:return x.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(h)];case 2:return[2,x.sent()];case 3:return this.possiblyLogPerformance(d),[7];case 4:return[2]}})})},u.prototype.decodeRobustlyAsync=function(h){return Ni(this,void 0,void 0,function(){var d,x;return Di(this,function(p){switch(p.label){case 0:d=performance.now(),p.label=1;case 1:return p.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(h)];case 2:return[2,p.sent()];case 3:if(x=p.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(h)];throw x;case 4:return this.possiblyLogPerformance(d),[7];case 5:return[2]}})})},u.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},u.prototype.possiblyLogPerformance=function(h){if(this.verbose){var d=performance.now()-h;this.executionResults.push(d),this.executions++,this.possiblyFlushPerformanceReport()}},u.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var h=0,d=0,x=this.executionResults;d<x.length;d++){var p=x[d];h+=p}var g=h/this.executionResults.length;console.log("".concat(g," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},u}();var Nr=function(){var u=function(h,d){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,p){x.__proto__=p}||function(x,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(x[g]=p[g])},u(h,d)};return function(h,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");u(h,d);function x(){this.constructor=h}h.prototype=d===null?Object.create(d):(x.prototype=d.prototype,new x)}}(),er=function(u,h,d,x){function p(g){return g instanceof d?g:new d(function(y){y(g)})}return new(d||(d=Promise))(function(g,y){function T(D){try{C(x.next(D))}catch(P){y(P)}}function N(D){try{C(x.throw(D))}catch(P){y(P)}}function C(D){D.done?g(D.value):p(D.value).then(T,N)}C((x=x.apply(u,h||[])).next())})},tr=function(u,h){var d={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},x,p,g,y;return y={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function T(C){return function(D){return N([C,D])}}function N(C){if(x)throw new TypeError("Generator is already executing.");for(;y&&(y=0,C[0]&&(d=0)),d;)try{if(x=1,p&&(g=C[0]&2?p.return:C[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,C[1])).done)return g;switch(p=0,g&&(C=[C[0]&2,g.value]),C[0]){case 0:case 1:g=C;break;case 4:return d.label++,{value:C[1],done:!1};case 5:d.label++,p=C[1],C=[0];continue;case 7:C=d.ops.pop(),d.trys.pop();continue;default:if(g=d.trys,!(g=g.length>0&&g[g.length-1])&&(C[0]===6||C[0]===2)){d=0;continue}if(C[0]===3&&(!g||C[1]>g[0]&&C[1]<g[3])){d.label=C[1];break}if(C[0]===6&&d.label<g[1]){d.label=g[1],g=C;break}if(g&&d.label<g[2]){d.label=g[2],d.ops.push(C);break}g[2]&&d.ops.pop(),d.trys.pop();continue}C=h.call(u,d)}catch(D){C=[6,D],p=0}finally{x=g=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},vi=function(){function u(h,d){this.name=h,this.track=d}return u.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},u.prototype.apply=function(h){var d={};d[this.name]=h;var x={advanced:[d]};return this.track.applyConstraints(x)},u.prototype.value=function(){var h=this.track.getSettings();if(this.name in h){var d=h[this.name];return d}return null},u}(),Xo=function(u){Nr(h,u);function h(d,x){return u.call(this,d,x)||this}return h.prototype.min=function(){return this.getCapabilities().min},h.prototype.max=function(){return this.getCapabilities().max},h.prototype.step=function(){return this.getCapabilities().step},h.prototype.apply=function(d){var x={};x[this.name]=d;var p={advanced:[x]};return this.track.applyConstraints(p)},h.prototype.getCapabilities=function(){this.failIfNotSupported();var d=this.track.getCapabilities(),x=d[this.name];return{min:x.min,max:x.max,step:x.step}},h.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},h}(vi),Wo=function(u){Nr(h,u);function h(d){return u.call(this,"zoom",d)||this}return h}(Xo),Yo=function(u){Nr(h,u);function h(d){return u.call(this,"torch",d)||this}return h}(vi),Zo=function(){function u(h){this.track=h}return u.prototype.zoomFeature=function(){return new Wo(this.track)},u.prototype.torchFeature=function(){return new Yo(this.track)},u}(),Qo=function(){function u(h,d,x){this.isClosed=!1,this.parentElement=h,this.mediaStream=d,this.callbacks=x,this.surface=this.createVideoElement(this.parentElement.clientWidth),h.append(this.surface)}return u.prototype.createVideoElement=function(h){var d=document.createElement("video");return d.style.width="".concat(h,"px"),d.style.display="block",d.muted=!0,d.setAttribute("muted","true"),d.playsInline=!0,d},u.prototype.setupSurface=function(){var h=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var d=function(){var x=h.surface.clientWidth,p=h.surface.clientHeight;h.callbacks.onRenderSurfaceReady(x,p),h.surface.removeEventListener("playing",d)};this.surface.addEventListener("playing",d),this.surface.srcObject=this.mediaStream,this.surface.play()},u.create=function(h,d,x,p){return er(this,void 0,void 0,function(){var g,y;return tr(this,function(T){switch(T.label){case 0:return g=new u(h,d,p),x.aspectRatio?(y={aspectRatio:x.aspectRatio},[4,g.getFirstTrackOrFail().applyConstraints(y)]):[3,2];case 1:T.sent(),T.label=2;case 2:return g.setupSurface(),[2,g]}})})},u.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},u.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},u.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},u.prototype.resume=function(h){this.failIfClosed();var d=this,x=function(){setTimeout(h,200),d.surface.removeEventListener("playing",x)};this.surface.addEventListener("playing",x),this.surface.play()},u.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},u.prototype.getSurface=function(){return this.failIfClosed(),this.surface},u.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},u.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},u.prototype.applyVideoConstraints=function(h){return er(this,void 0,void 0,function(){return tr(this,function(d){if("aspectRatio"in h)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(h)]})})},u.prototype.close=function(){if(this.isClosed)return Promise.resolve();var h=this;return new Promise(function(d,x){var p=h.mediaStream.getVideoTracks(),g=p.length,y=0;h.mediaStream.getVideoTracks().forEach(function(T){h.mediaStream.removeTrack(T),T.stop(),++y,y>=g&&(h.isClosed=!0,h.parentElement.removeChild(h.surface),d())})})},u.prototype.getCapabilities=function(){return new Zo(this.getFirstTrackOrFail())},u}(),Li=function(){function u(h){this.mediaStream=h}return u.prototype.render=function(h,d,x){return er(this,void 0,void 0,function(){return tr(this,function(p){return[2,Qo.create(h,this.mediaStream,d,x)]})})},u.create=function(h){return er(this,void 0,void 0,function(){var d,x;return tr(this,function(p){switch(p.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return d={audio:!1,video:h},[4,navigator.mediaDevices.getUserMedia(d)];case 1:return x=p.sent(),[2,new u(x)]}})})},u}();var Bi=function(u,h,d,x){function p(g){return g instanceof d?g:new d(function(y){y(g)})}return new(d||(d=Promise))(function(g,y){function T(D){try{C(x.next(D))}catch(P){y(P)}}function N(D){try{C(x.throw(D))}catch(P){y(P)}}function C(D){D.done?g(D.value):p(D.value).then(T,N)}C((x=x.apply(u,h||[])).next())})},Pi=function(u,h){var d={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},x,p,g,y;return y={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function T(C){return function(D){return N([C,D])}}function N(C){if(x)throw new TypeError("Generator is already executing.");for(;y&&(y=0,C[0]&&(d=0)),d;)try{if(x=1,p&&(g=C[0]&2?p.return:C[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,C[1])).done)return g;switch(p=0,g&&(C=[C[0]&2,g.value]),C[0]){case 0:case 1:g=C;break;case 4:return d.label++,{value:C[1],done:!1};case 5:d.label++,p=C[1],C=[0];continue;case 7:C=d.ops.pop(),d.trys.pop();continue;default:if(g=d.trys,!(g=g.length>0&&g[g.length-1])&&(C[0]===6||C[0]===2)){d=0;continue}if(C[0]===3&&(!g||C[1]>g[0]&&C[1]<g[3])){d.label=C[1];break}if(C[0]===6&&d.label<g[1]){d.label=g[1],g=C;break}if(g&&d.label<g[2]){d.label=g[2],d.ops.push(C);break}g[2]&&d.ops.pop(),d.trys.pop();continue}C=h.call(u,d)}catch(D){C=[6,D],p=0}finally{x=g=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},ki=function(){function u(){}return u.failIfNotSupported=function(){return Bi(this,void 0,void 0,function(){return Pi(this,function(h){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new u]})})},u.prototype.create=function(h){return Bi(this,void 0,void 0,function(){return Pi(this,function(d){return[2,Li.create(h)]})})},u}();var qo=function(u,h,d,x){function p(g){return g instanceof d?g:new d(function(y){y(g)})}return new(d||(d=Promise))(function(g,y){function T(D){try{C(x.next(D))}catch(P){y(P)}}function N(D){try{C(x.throw(D))}catch(P){y(P)}}function C(D){D.done?g(D.value):p(D.value).then(T,N)}C((x=x.apply(u,h||[])).next())})},Ko=function(u,h){var d={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},x,p,g,y;return y={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function T(C){return function(D){return N([C,D])}}function N(C){if(x)throw new TypeError("Generator is already executing.");for(;y&&(y=0,C[0]&&(d=0)),d;)try{if(x=1,p&&(g=C[0]&2?p.return:C[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,C[1])).done)return g;switch(p=0,g&&(C=[C[0]&2,g.value]),C[0]){case 0:case 1:g=C;break;case 4:return d.label++,{value:C[1],done:!1};case 5:d.label++,p=C[1],C=[0];continue;case 7:C=d.ops.pop(),d.trys.pop();continue;default:if(g=d.trys,!(g=g.length>0&&g[g.length-1])&&(C[0]===6||C[0]===2)){d=0;continue}if(C[0]===3&&(!g||C[1]>g[0]&&C[1]<g[3])){d.label=C[1];break}if(C[0]===6&&d.label<g[1]){d.label=g[1],g=C;break}if(g&&d.label<g[2]){d.label=g[2],d.ops.push(C);break}g[2]&&d.ops.pop(),d.trys.pop();continue}C=h.call(u,d)}catch(D){C=[6,D],p=0}finally{x=g=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},Fi=function(){function u(){}return u.retrieve=function(){if(navigator.mediaDevices)return u.getCamerasFromMediaDevices();var h=MediaStreamTrack;return MediaStreamTrack&&h.getSources?u.getCamerasFromMediaStreamTrack():u.rejectWithError()},u.rejectWithError=function(){var h=Xt.unableToQuerySupportedDevices();return u.isHttpsOrLocalhost()||(h=Xt.insecureContextCameraQueryError()),Promise.reject(h)},u.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var h=location.host.split(":")[0];return h==="127.0.0.1"||h==="localhost"},u.getCamerasFromMediaDevices=function(){return qo(this,void 0,void 0,function(){var h,d,x,p,g,y,T;return Ko(this,function(N){switch(N.label){case 0:return h=function(C){for(var D=C.getVideoTracks(),P=0,xe=D;P<xe.length;P++){var Q=xe[P];Q.enabled=!1,Q.stop(),C.removeTrack(Q)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return d=N.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(x=N.sent(),p=[],g=0,y=x;g<y.length;g++)T=y[g],T.kind==="videoinput"&&p.push({id:T.deviceId,label:T.label});return h(d),[2,p]}})})},u.getCamerasFromMediaStreamTrack=function(){return new Promise(function(h,d){var x=function(g){for(var y=[],T=0,N=g;T<N.length;T++){var C=N[T];C.kind==="video"&&y.push({id:C.id,label:C.label})}h(y)},p=MediaStreamTrack;p.getSources(x)})},u}();var De=function(u){return u[u.UNKNOWN=0]="UNKNOWN",u[u.NOT_STARTED=1]="NOT_STARTED",u[u.SCANNING=2]="SCANNING",u[u.PAUSED=3]="PAUSED",u}(De||{}),Jo=function(){function u(){this.state=De.NOT_STARTED,this.onGoingTransactionNewState=De.UNKNOWN}return u.prototype.directTransition=function(h){this.failIfTransitionOngoing(),this.validateTransition(h),this.state=h},u.prototype.startTransition=function(h){return this.failIfTransitionOngoing(),this.validateTransition(h),this.onGoingTransactionNewState=h,this},u.prototype.execute=function(){if(this.onGoingTransactionNewState===De.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var h=this.onGoingTransactionNewState;this.onGoingTransactionNewState=De.UNKNOWN,this.directTransition(h)},u.prototype.cancel=function(){if(this.onGoingTransactionNewState===De.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=De.UNKNOWN},u.prototype.getState=function(){return this.state},u.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==De.UNKNOWN)throw"Cannot transition to a new state, already under transition"},u.prototype.validateTransition=function(h){switch(this.state){case De.UNKNOWN:throw"Transition from unknown is not allowed";case De.NOT_STARTED:this.failIfNewStateIs(h,[De.PAUSED]);break;case De.SCANNING:break;case De.PAUSED:break}},u.prototype.failIfNewStateIs=function(h,d){for(var x=0,p=d;x<p.length;x++){var g=p[x];if(h===g)throw"Cannot transition from ".concat(this.state," to ").concat(h)}},u}(),$o=function(){function u(h){this.stateManager=h}return u.prototype.startTransition=function(h){return this.stateManager.startTransition(h)},u.prototype.directTransition=function(h){this.stateManager.directTransition(h)},u.prototype.getState=function(){return this.stateManager.getState()},u.prototype.canScanFile=function(){return this.stateManager.getState()===De.NOT_STARTED},u.prototype.isScanning=function(){return this.stateManager.getState()!==De.NOT_STARTED},u.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===De.SCANNING},u.prototype.isPaused=function(){return this.stateManager.getState()===De.PAUSED},u}();var Ui=function(){function u(){}return u.create=function(){return new $o(new Jo)},u}();var es=function(){var u=function(h,d){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,p){x.__proto__=p}||function(x,p){for(var g in p)Object.prototype.hasOwnProperty.call(p,g)&&(x[g]=p[g])},u(h,d)};return function(h,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");u(h,d);function x(){this.constructor=h}h.prototype=d===null?Object.create(d):(x.prototype=d.prototype,new x)}}(),gt=function(u){es(h,u);function h(){return u!==null&&u.apply(this,arguments)||this}return h.DEFAULT_WIDTH=300,h.DEFAULT_WIDTH_OFFSET=2,h.FILE_SCAN_MIN_HEIGHT=300,h.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,h.MIN_QR_BOX_SIZE=50,h.SHADED_LEFT=1,h.SHADED_RIGHT=2,h.SHADED_TOP=3,h.SHADED_BOTTOM=4,h.SHADED_REGION_ELEMENT_ID="qr-shaded-region",h.VERBOSE=!1,h.BORDER_SHADER_DEFAULT_COLOR="#ffffff",h.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",h}(ut),ts=function(){function u(h,d){this.logger=d,this.fps=gt.SCAN_DEFAULT_FPS,h?(h.fps&&(this.fps=h.fps),this.disableFlip=h.disableFlip===!0,this.qrbox=h.qrbox,this.aspectRatio=h.aspectRatio,this.videoConstraints=h.videoConstraints):this.disableFlip=gt.DEFAULT_DISABLE_FLIP}return u.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?_r.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},u.prototype.isShadedBoxEnabled=function(){return!pt(this.qrbox)},u.create=function(h,d){return new u(h,d)},u}(),un=function(){function u(h,d){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(h))throw"HTML Element with id=".concat(h," not found");this.elementId=h,this.verbose=!1;var x,p;typeof d=="boolean"?this.verbose=d===!0:d&&(p=d,this.verbose=p.verbose===!0,x=p.experimentalFeatures),this.logger=new Jn(this.verbose),this.qrcode=new Ri(this.getSupportedFormats(d),this.getUseBarCodeDetectorIfSupported(p),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Ui.create()}return u.prototype.start=function(h,d,x,p){var g=this;if(!h)throw"cameraIdOrConfig is required";if(!x||typeof x!="function")throw"qrCodeSuccessCallback is required and should be a function.";var y;p?y=p:y=this.verbose?this.logger.log:function(){};var T=ts.create(d,this.logger);this.clearElement();var N=!1;T.videoConstraints&&(T.isMediaStreamConstraintsValid()?N=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var C=N,D=document.getElementById(this.elementId),P=D.clientWidth?D.clientWidth:gt.DEFAULT_WIDTH;D.style.position="relative",this.shouldScan=!0,this.element=D;var xe=this,Q=this.stateManagerProxy.startTransition(De.SCANNING);return new Promise(function(Fe,Oe){var ne=C?T.videoConstraints:xe.createVideoConstraints(h);if(!ne){Q.cancel(),Oe("videoConstraints should be defined");return}var W={};(!C||T.aspectRatio)&&(W.aspectRatio=T.aspectRatio);var le={onRenderSurfaceReady:function(Tt,ue){xe.setupUi(Tt,ue,T),xe.isScanning=!0,xe.foreverScan(T,x,y)}};ki.failIfNotSupported().then(function(Tt){Tt.create(ne).then(function(ue){return ue.render(g.element,W,le).then(function(k){xe.renderedCamera=k,Q.execute(),Fe(null)}).catch(function(k){Q.cancel(),Oe(k)})}).catch(function(ue){Q.cancel(),Oe(Xt.errorGettingUserMedia(ue))})}).catch(function(Tt){Q.cancel(),Oe(Xt.cameraStreamingNotSupported())})})},u.prototype.pause=function(h){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(De.PAUSED),this.showPausedState(),(pt(h)||h!==!0)&&(h=!1),h&&this.renderedCamera&&this.renderedCamera.pause()},u.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var h=this,d=function(){h.stateManagerProxy.directTransition(De.SCANNING),h.hidePausedState()};if(!this.renderedCamera.isPaused()){d();return}this.renderedCamera.resume(function(){d()})},u.prototype.getState=function(){return this.stateManagerProxy.getState()},u.prototype.stop=function(){var h=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var d=this.stateManagerProxy.startTransition(De.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var x=function(){if(h.element){var g=document.getElementById(gt.SHADED_REGION_ELEMENT_ID);g&&h.element.removeChild(g)}},p=this;return this.renderedCamera.close().then(function(){return p.renderedCamera=null,p.element&&(p.element.removeChild(p.canvasElement),p.canvasElement=null),x(),p.qrRegion&&(p.qrRegion=null),p.context&&(p.context=null),d.execute(),p.hidePausedState(),p.isScanning=!1,Promise.resolve()})},u.prototype.scanFile=function(h,d){return this.scanFileV2(h,d).then(function(x){return x.decodedText})},u.prototype.scanFileV2=function(h,d){var x=this;if(!h||!(h instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(pt(d)&&(d=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(p,g){x.possiblyCloseLastScanImageFile(),x.clearElement(),x.lastScanImageFile=URL.createObjectURL(h);var y=new Image;y.onload=function(){var T=y.width,N=y.height,C=document.getElementById(x.elementId),D=C.clientWidth?C.clientWidth:gt.DEFAULT_WIDTH,P=Math.max(C.clientHeight?C.clientHeight:N,gt.FILE_SCAN_MIN_HEIGHT),xe=x.computeCanvasDrawConfig(T,N,D,P);if(d){var Q=x.createCanvasElement(D,P,"qr-canvas-visible");Q.style.display="inline-block",C.appendChild(Q);var Fe=Q.getContext("2d");if(!Fe)throw"Unable to get 2d context from canvas";Fe.canvas.width=D,Fe.canvas.height=P,Fe.drawImage(y,0,0,T,N,xe.x,xe.y,xe.width,xe.height)}var Oe=gt.FILE_SCAN_HIDDEN_CANVAS_PADDING,ne=Math.max(y.width,xe.width),W=Math.max(y.height,xe.height),le=ne+2*Oe,Tt=W+2*Oe,ue=x.createCanvasElement(le,Tt);C.appendChild(ue);var k=ue.getContext("2d");if(!k)throw"Unable to get 2d context from canvas";k.canvas.width=le,k.canvas.height=Tt,k.drawImage(y,0,0,T,N,Oe,Oe,ne,W);try{x.qrcode.decodeRobustlyAsync(ue).then(function(ge){p(br.createFromQrcodeResult(ge))}).catch(g)}catch(ge){g("QR code parse error, error = ".concat(ge))}},y.onerror=g,y.onabort=g,y.onstalled=g,y.onsuspend=g,y.src=URL.createObjectURL(h)})},u.prototype.clear=function(){this.clearElement()},u.getCameras=function(){return Fi.retrieve()},u.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},u.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},u.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},u.prototype.applyVideoConstraints=function(h){if(h){if(!_r.isMediaStreamConstraintsValid(h,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(h)},u.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},u.prototype.getSupportedFormats=function(h){var d=[H.QR_CODE,H.AZTEC,H.CODABAR,H.CODE_39,H.CODE_93,H.CODE_128,H.DATA_MATRIX,H.MAXICODE,H.ITF,H.EAN_13,H.EAN_8,H.PDF_417,H.RSS_14,H.RSS_EXPANDED,H.UPC_A,H.UPC_E,H.UPC_EAN_EXTENSION];if(!h||typeof h=="boolean"||!h.formatsToSupport)return d;if(!Array.isArray(h.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(h.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var x=[],p=0,g=h.formatsToSupport;p<g.length;p++){var y=g[p];bi(y)?x.push(y):this.logger.warn("Invalid format: ".concat(y," passed in config, ignoring."))}if(x.length===0)throw"None of formatsToSupport match supported values.";return x},u.prototype.getUseBarCodeDetectorIfSupported=function(h){if(pt(h))return!0;if(!pt(h.useBarCodeDetectorIfSupported))return h.useBarCodeDetectorIfSupported!==!1;if(pt(h.experimentalFeatures))return!0;var d=h.experimentalFeatures;return pt(d.useBarCodeDetectorIfSupported)?!0:d.useBarCodeDetectorIfSupported!==!1},u.prototype.validateQrboxSize=function(h,d,x){var p=this,g=x.qrbox;this.validateQrboxConfig(g);var y=this.toQrdimensions(h,d,g),T=function(C){if(C<gt.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(gt.MIN_QR_BOX_SIZE,"px.")},N=function(C){return C>h&&(p.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),C=h),C};T(y.width),T(y.height),y.width=N(y.width)},u.prototype.validateQrboxConfig=function(h){if(typeof h!="number"&&typeof h!="function"&&(h.width===void 0||h.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},u.prototype.toQrdimensions=function(h,d,x){if(typeof x=="number")return{width:x,height:x};if(typeof x=="function")try{return x(h,d)}catch(p){throw new Error("qrbox config was passed as a function but it failed with unknown error"+p)}return x},u.prototype.setupUi=function(h,d,x){x.isShadedBoxEnabled()&&this.validateQrboxSize(h,d,x);var p=pt(x.qrbox)?{width:h,height:d}:x.qrbox;this.validateQrboxConfig(p);var g=this.toQrdimensions(h,d,p);g.height>d&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var y=x.isShadedBoxEnabled()&&g.height<=d,T={x:0,y:0,width:h,height:d},N=y?this.getShadedRegionBounds(h,d,g):T,C=this.createCanvasElement(N.width,N.height),D={willReadFrequently:!0},P=C.getContext("2d",D);P.canvas.width=N.width,P.canvas.height=N.height,this.element.append(C),y&&this.possiblyInsertShadingElement(this.element,h,d,g),this.createScannerPausedUiElement(this.element),this.qrRegion=N,this.context=P,this.canvasElement=C},u.prototype.createScannerPausedUiElement=function(h){var d=document.createElement("div");d.innerText=Xt.scannerPaused(),d.style.display="none",d.style.position="absolute",d.style.top="0px",d.style.zIndex="1",d.style.background="rgba(9, 9, 9, 0.46)",d.style.color="#FFECEC",d.style.textAlign="center",d.style.width="100%",h.appendChild(d),this.scannerPausedUiElement=d},u.prototype.scanContext=function(h,d){var x=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(p){return h(p.text,br.createFromQrcodeResult(p)),x.possiblyUpdateShaders(!0),!0}).catch(function(p){x.possiblyUpdateShaders(!1);var g=Xt.codeParseError(p);return d(g,Kn.createFrom(g)),!1})},u.prototype.foreverScan=function(h,d,x){var p=this;if(this.shouldScan&&this.renderedCamera){var g=this.renderedCamera.getSurface(),y=g.videoWidth/g.clientWidth,T=g.videoHeight/g.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var N=this.qrRegion.width*y,C=this.qrRegion.height*T,D=this.qrRegion.x*y,P=this.qrRegion.y*T;this.context.drawImage(g,D,P,N,C,0,0,this.qrRegion.width,this.qrRegion.height);var xe=function(){p.foreverScanTimeout=setTimeout(function(){p.foreverScan(h,d,x)},p.getTimeoutFps(h.fps))};this.scanContext(d,x).then(function(Q){!Q&&h.disableFlip!==!0?(p.context.translate(p.context.canvas.width,0),p.context.scale(-1,1),p.scanContext(d,x).finally(function(){xe()})):xe()}).catch(function(Q){p.logger.logError("Error happend while scanning context",Q),xe()})}},u.prototype.createVideoConstraints=function(h){if(typeof h=="string")return{deviceId:{exact:h}};if(typeof h=="object"){var d="facingMode",x="deviceId",p={user:!0,environment:!0},g="exact",y=function(Fe){if(Fe in p)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(Fe,"'")},T=Object.keys(h);if(T.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(T.length," keys");var N=Object.keys(h)[0];if(N!==d&&N!==x)throw"Only '".concat(d,"' and '").concat(x,"' ")+" are supported for 'cameraIdOrConfig'";if(N===d){var C=h.facingMode;if(typeof C=="string"){if(y(C))return{facingMode:C}}else if(typeof C=="object")if(g in C){if(y(C["".concat(g)]))return{facingMode:{exact:C["".concat(g)]}}}else throw"'facingMode' should be string or object with"+" ".concat(g," as key.");else{var D=typeof C;throw"Invalid type of 'facingMode' = ".concat(D)}}else{var P=h.deviceId;if(typeof P=="string")return{deviceId:P};if(typeof P=="object"){if(g in P)return{deviceId:{exact:P["".concat(g)]}};throw"'deviceId' should be string or object with"+" ".concat(g," as key.")}else{var xe=typeof P;throw"Invalid type of 'deviceId' = ".concat(xe)}}}var Q=typeof h;throw"Invalid type of 'cameraIdOrConfig' = ".concat(Q)},u.prototype.computeCanvasDrawConfig=function(h,d,x,p){if(h<=x&&d<=p){var g=(x-h)/2,y=(p-d)/2;return{x:g,y,width:h,height:d}}else{var T=h,N=d;return h>x&&(d=x/h*d,h=x),d>p&&(h=p/d*h,d=p),this.logger.log("Image downsampled from "+"".concat(T,"X").concat(N)+" to ".concat(h,"X").concat(d,".")),this.computeCanvasDrawConfig(h,d,x,p)}},u.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var h=document.getElementById(this.elementId);h&&(h.innerHTML="")},u.prototype.possiblyUpdateShaders=function(h){this.qrMatch!==h&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(d){d.style.backgroundColor=h?gt.BORDER_SHADER_MATCH_COLOR:gt.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=h)},u.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},u.prototype.createCanvasElement=function(h,d,x){var p=h,g=d,y=document.createElement("canvas");return y.style.width="".concat(p,"px"),y.style.height="".concat(g,"px"),y.style.display="none",y.id=pt(x)?"qr-canvas":x,y},u.prototype.getShadedRegionBounds=function(h,d,x){if(x.width>h||x.height>d)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(h-x.width)/2,y:(d-x.height)/2,width:x.width,height:x.height}},u.prototype.possiblyInsertShadingElement=function(h,d,x,p){if(!(d-p.width<1||x-p.height<1)){var g=document.createElement("div");g.style.position="absolute";var y=(d-p.width)/2,T=(x-p.height)/2;if(g.style.borderLeft="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderRight="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderTop="".concat(T,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderBottom="".concat(T,"px solid rgba(0, 0, 0, 0.48)"),g.style.boxSizing="border-box",g.style.top="0px",g.style.bottom="0px",g.style.left="0px",g.style.right="0px",g.id="".concat(gt.SHADED_REGION_ELEMENT_ID),d-p.width<11||x-p.height<11)this.hasBorderShaders=!1;else{var N=5,C=40;this.insertShaderBorders(g,C,N,-N,null,0,!0),this.insertShaderBorders(g,C,N,-N,null,0,!1),this.insertShaderBorders(g,C,N,null,-N,0,!0),this.insertShaderBorders(g,C,N,null,-N,0,!1),this.insertShaderBorders(g,N,C+N,-N,null,-N,!0),this.insertShaderBorders(g,N,C+N,null,-N,-N,!0),this.insertShaderBorders(g,N,C+N,-N,null,-N,!1),this.insertShaderBorders(g,N,C+N,null,-N,-N,!1),this.hasBorderShaders=!0}h.append(g)}},u.prototype.insertShaderBorders=function(h,d,x,p,g,y,T){var N=document.createElement("div");N.style.position="absolute",N.style.backgroundColor=gt.BORDER_SHADER_DEFAULT_COLOR,N.style.width="".concat(d,"px"),N.style.height="".concat(x,"px"),p!==null&&(N.style.top="".concat(p,"px")),g!==null&&(N.style.bottom="".concat(g,"px")),T?N.style.left="".concat(y,"px"):N.style.right="".concat(y,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(N),h.appendChild(N)},u.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},u.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},u.prototype.getTimeoutFps=function(h){return 1e3/h},u}();var Dr="data:image/svg+xml;base64,",Vi=Dr+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",Hi=Dr+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Rr=Dr+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",zi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=";var ji=function(){function u(){}return u.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},u}(),Gi=function(){function u(){this.data=ji.createDefault();var h=localStorage.getItem(u.LOCAL_STORAGE_KEY);h?this.data=JSON.parse(h):this.reset()}return u.prototype.hasCameraPermissions=function(){return this.data.hasPermission},u.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},u.prototype.setHasPermission=function(h){this.data.hasPermission=h,this.flush()},u.prototype.setLastUsedCameraId=function(h){this.data.lastUsedCameraId=h,this.flush()},u.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},u.prototype.reset=function(){this.data=ji.createDefault(),this.flush()},u.prototype.flush=function(){localStorage.setItem(u.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},u.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",u}();var ns=function(){function u(){this.infoDiv=document.createElement("div")}return u.prototype.renderInto=function(h){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Tr.poweredBy();var d=document.createElement("a");d.innerText="ScanApp",d.href="https://scanapp.org",d.target="new",d.style.color="white",this.infoDiv.appendChild(d);var x=document.createElement("br"),p=document.createElement("br");this.infoDiv.appendChild(x),this.infoDiv.appendChild(p);var g=document.createElement("a");g.innerText=Tr.reportIssues(),g.href="https://github.com/mebjas/html5-qrcode/issues",g.target="new",g.style.color="white",this.infoDiv.appendChild(g),h.appendChild(this.infoDiv)},u.prototype.show=function(){this.infoDiv.style.display="block"},u.prototype.hide=function(){this.infoDiv.style.display="none"},u}(),rs=function(){function u(h,d){this.isShowingInfoIcon=!0,this.onTapIn=h,this.onTapOut=d,this.infoIcon=document.createElement("img")}return u.prototype.renderInto=function(h){var d=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Rr,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(x){return d.onHoverIn()},this.infoIcon.onmouseout=function(x){return d.onHoverOut()},this.infoIcon.onclick=function(x){return d.onClick()},h.appendChild(this.infoIcon)},u.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},u.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},u.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=zi,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Rr,this.infoIcon.style.opacity="0.6")},u}(),Xi=function(){function u(){var h=this;this.infoDiv=new ns,this.infoIcon=new rs(function(){h.infoDiv.show()},function(){h.infoDiv.hide()})}return u.prototype.renderInto=function(h){this.infoDiv.renderInto(h),this.infoIcon.renderInto(h)},u}();var is=function(u,h,d,x){function p(g){return g instanceof d?g:new d(function(y){y(g)})}return new(d||(d=Promise))(function(g,y){function T(D){try{C(x.next(D))}catch(P){y(P)}}function N(D){try{C(x.throw(D))}catch(P){y(P)}}function C(D){D.done?g(D.value):p(D.value).then(T,N)}C((x=x.apply(u,h||[])).next())})},os=function(u,h){var d={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},x,p,g,y;return y={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function T(C){return function(D){return N([C,D])}}function N(C){if(x)throw new TypeError("Generator is already executing.");for(;y&&(y=0,C[0]&&(d=0)),d;)try{if(x=1,p&&(g=C[0]&2?p.return:C[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,C[1])).done)return g;switch(p=0,g&&(C=[C[0]&2,g.value]),C[0]){case 0:case 1:g=C;break;case 4:return d.label++,{value:C[1],done:!1};case 5:d.label++,p=C[1],C=[0];continue;case 7:C=d.ops.pop(),d.trys.pop();continue;default:if(g=d.trys,!(g=g.length>0&&g[g.length-1])&&(C[0]===6||C[0]===2)){d=0;continue}if(C[0]===3&&(!g||C[1]>g[0]&&C[1]<g[3])){d.label=C[1];break}if(C[0]===6&&d.label<g[1]){d.label=g[1],g=C;break}if(g&&d.label<g[2]){d.label=g[2],d.ops.push(C);break}g[2]&&d.ops.pop(),d.trys.pop();continue}C=h.call(u,d)}catch(D){C=[6,D],p=0}finally{x=g=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},vr=function(){function u(){}return u.hasPermissions=function(){return is(this,void 0,void 0,function(){var h,d,x,p;return os(this,function(g){switch(g.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(h=g.sent(),d=0,x=h;d<x.length;d++)if(p=x[d],p.kind==="videoinput"&&p.label)return[2,!0];return[2,!1]}})})},u}();var Lt=function(){function u(h){this.supportedScanTypes=this.validateAndReturnScanTypes(h)}return u.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},u.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},u.prototype.isCameraScanRequired=function(){for(var h=0,d=this.supportedScanTypes;h<d.length;h++){var x=d[h];if(u.isCameraScanType(x))return!0}return!1},u.isCameraScanType=function(h){return h===Nt.SCAN_TYPE_CAMERA},u.isFileScanType=function(h){return h===Nt.SCAN_TYPE_FILE},u.prototype.validateAndReturnScanTypes=function(h){if(!h||h.length===0)return ut.DEFAULT_SUPPORTED_SCAN_TYPE;var d=ut.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(h.length>d)throw"Max ".concat(d," values expected for ")+"supportedScanTypes";for(var x=0,p=h;x<p.length;x++){var g=p[x];if(!ut.DEFAULT_SUPPORTED_SCAN_TYPE.includes(g))throw"Unsupported scan type ".concat(g)}return h},u}();var je=function(){function u(){}return u.ALL_ELEMENT_CLASS="html5-qrcode-element",u.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",u.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",u.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",u.TORCH_BUTTON_ID="html5-qrcode-button-torch",u.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",u.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",u.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",u.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",u.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",u.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",u}();var ht=function(){function u(){}return u.createElement=function(h,d){var x=document.createElement(h);return x.id=d,x.classList.add(je.ALL_ELEMENT_CLASS),h==="button"&&x.setAttribute("type","button"),x},u}();var Yi=function(u,h,d,x){function p(g){return g instanceof d?g:new d(function(y){y(g)})}return new(d||(d=Promise))(function(g,y){function T(D){try{C(x.next(D))}catch(P){y(P)}}function N(D){try{C(x.throw(D))}catch(P){y(P)}}function C(D){D.done?g(D.value):p(D.value).then(T,N)}C((x=x.apply(u,h||[])).next())})},Zi=function(u,h){var d={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},x,p,g,y;return y={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function T(C){return function(D){return N([C,D])}}function N(C){if(x)throw new TypeError("Generator is already executing.");for(;y&&(y=0,C[0]&&(d=0)),d;)try{if(x=1,p&&(g=C[0]&2?p.return:C[0]?p.throw||((g=p.return)&&g.call(p),0):p.next)&&!(g=g.call(p,C[1])).done)return g;switch(p=0,g&&(C=[C[0]&2,g.value]),C[0]){case 0:case 1:g=C;break;case 4:return d.label++,{value:C[1],done:!1};case 5:d.label++,p=C[1],C=[0];continue;case 7:C=d.ops.pop(),d.trys.pop();continue;default:if(g=d.trys,!(g=g.length>0&&g[g.length-1])&&(C[0]===6||C[0]===2)){d=0;continue}if(C[0]===3&&(!g||C[1]>g[0]&&C[1]<g[3])){d.label=C[1];break}if(C[0]===6&&d.label<g[1]){d.label=g[1],g=C;break}if(g&&d.label<g[2]){d.label=g[2],d.ops.push(C);break}g[2]&&d.ops.pop(),d.trys.pop();continue}C=h.call(u,d)}catch(D){C=[6,D],p=0}finally{x=g=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},Wi=function(){function u(h,d,x){this.isTorchOn=!1,this.torchCapability=h,this.buttonController=d,this.onTorchActionFailureCallback=x}return u.prototype.isTorchEnabled=function(){return this.isTorchOn},u.prototype.flipState=function(){return Yi(this,void 0,void 0,function(){var h,d;return Zi(this,function(x){switch(x.label){case 0:this.buttonController.disable(),h=!this.isTorchOn,x.label=1;case 1:return x.trys.push([1,3,,4]),[4,this.torchCapability.apply(h)];case 2:return x.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),h),[3,4];case 3:return d=x.sent(),this.propagateFailure(h,d),this.buttonController.enable(),[3,4];case 4:return[2]}})})},u.prototype.updateUiBasedOnLatestSettings=function(h,d){h===d?(this.buttonController.setText(d?he.torchOffButton():he.torchOnButton()),this.isTorchOn=d):this.propagateFailure(d),this.buttonController.enable()},u.prototype.propagateFailure=function(h,d){var x=h?he.torchOnFailedMessage():he.torchOffFailedMessage();d&&(x+="; Error = "+d),this.onTorchActionFailureCallback(x)},u.prototype.reset=function(){this.isTorchOn=!1},u}(),Qi=function(){function u(h,d){this.onTorchActionFailureCallback=d,this.torchButton=ht.createElement("button",je.TORCH_BUTTON_ID),this.torchController=new Wi(h,this,d)}return u.prototype.render=function(h,d){var x=this;this.torchButton.innerText=he.torchOnButton(),this.torchButton.style.display=d.display,this.torchButton.style.marginLeft=d.marginLeft;var p=this;this.torchButton.addEventListener("click",function(g){return Yi(x,void 0,void 0,function(){return Zi(this,function(y){switch(y.label){case 0:return[4,p.torchController.flipState()];case 1:return y.sent(),p.torchController.isTorchEnabled()?(p.torchButton.classList.remove(je.TORCH_BUTTON_CLASS_TORCH_OFF),p.torchButton.classList.add(je.TORCH_BUTTON_CLASS_TORCH_ON)):(p.torchButton.classList.remove(je.TORCH_BUTTON_CLASS_TORCH_ON),p.torchButton.classList.add(je.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),h.appendChild(this.torchButton)},u.prototype.updateTorchCapability=function(h){this.torchController=new Wi(h,this,this.onTorchActionFailureCallback)},u.prototype.getTorchButton=function(){return this.torchButton},u.prototype.hide=function(){this.torchButton.style.display="none"},u.prototype.show=function(){this.torchButton.style.display="inline-block"},u.prototype.disable=function(){this.torchButton.disabled=!0},u.prototype.enable=function(){this.torchButton.disabled=!1},u.prototype.setText=function(h){this.torchButton.innerText=h},u.prototype.reset=function(){this.torchButton.innerText=he.torchOnButton(),this.torchController.reset()},u.create=function(h,d,x,p){var g=new u(d,p);return g.render(h,x),g},u}();var qi=function(){function u(h,d,x){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=d?"block":"none",h.appendChild(this.fileBasedScanRegion);var p=document.createElement("label");p.setAttribute("for",this.getFileScanInputId()),p.style.display="inline-block",this.fileBasedScanRegion.appendChild(p),this.fileSelectionButton=ht.createElement("button",je.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(T){p.click()}),p.append(this.fileSelectionButton),this.fileScanInput=ht.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",p.appendChild(this.fileScanInput);var g=this;this.fileScanInput.addEventListener("change",function(T){if(!(T==null||T.target==null)){var N=T.target;if(!(N.files&&N.files.length===0)){var C=N.files,D=C[0],P=D.name;g.setImageNameToButton(P),x(D)}}});var y=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(y),this.fileBasedScanRegion.addEventListener("dragenter",function(T){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionActiveBorder(),T.stopPropagation(),T.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(T){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionDefaultBorder(),T.stopPropagation(),T.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(T){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionActiveBorder(),T.stopPropagation(),T.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(T){T.stopPropagation(),T.preventDefault(),g.fileBasedScanRegion.style.border=g.fileBasedScanRegionDefaultBorder();var N=T.dataTransfer;if(N){var C=N.files;if(!C||C.length===0)return;for(var D=!1,P=0;P<C.length;++P){var xe=C.item(P);if(xe){var Q=/image.*/;if(xe.type.match(Q)){D=!0;var Fe=xe.name;g.setImageNameToButton(Fe),x(xe),y.innerText=he.dragAndDropMessage();break}}}D||(y.innerText=he.dragAndDropMessageOnlyImages())}})}return u.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},u.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},u.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},u.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},u.prototype.createFileBasedScanRegion=function(){var h=document.createElement("div");return h.style.textAlign="center",h.style.margin="auto",h.style.width="80%",h.style.maxWidth="600px",h.style.border=this.fileBasedScanRegionDefaultBorder(),h.style.padding="10px",h.style.marginBottom="10px",h},u.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},u.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},u.prototype.createDragAndDropMessage=function(){var h=document.createElement("div");return h.innerText=he.dragAndDropMessage(),h.style.fontWeight="400",h},u.prototype.setImageNameToButton=function(h){var d=20;if(h.length>d){var x=h.substring(0,8),p=h.length,g=h.substring(p-8,p);h="".concat(x,"....").concat(g)}var y=he.fileSelectionChooseAnother()+" - "+h;this.fileSelectionButton.innerText=y},u.prototype.setInitialValueToButton=function(){var h=he.fileSelectionChooseImage()+" - "+he.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=h},u.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},u.create=function(h,d,x){var p=new u(h,d,x);return p},u}();var Ki=function(){function u(h){this.selectElement=ht.createElement("select",je.CAMERA_SELECTION_SELECT_ID),this.cameras=h,this.options=[]}return u.prototype.render=function(h){var d=document.createElement("span");d.style.marginRight="10px";var x=this.cameras.length;if(x===0)throw new Error("No cameras found");if(x===1)d.style.display="none";else{var p=he.selectCamera();d.innerText="".concat(p," (").concat(this.cameras.length,")  ")}for(var g=1,y=0,T=this.cameras;y<T.length;y++){var N=T[y],C=N.id,D=N.label==null?C:N.label;(!D||D==="")&&(D=[he.anonymousCameraPrefix(),g++].join(" "));var P=document.createElement("option");P.value=C,P.innerText=D,this.options.push(P),this.selectElement.appendChild(P)}d.appendChild(this.selectElement),h.appendChild(d)},u.prototype.disable=function(){this.selectElement.disabled=!0},u.prototype.isDisabled=function(){return this.selectElement.disabled===!0},u.prototype.enable=function(){this.selectElement.disabled=!1},u.prototype.getValue=function(){return this.selectElement.value},u.prototype.hasValue=function(h){for(var d=0,x=this.options;d<x.length;d++){var p=x[d];if(p.value===h)return!0}return!1},u.prototype.setValue=function(h){if(!this.hasValue(h))throw new Error("".concat(h," is not present in the camera list."));this.selectElement.value=h},u.prototype.hasSingleItem=function(){return this.cameras.length===1},u.prototype.numCameras=function(){return this.cameras.length},u.create=function(h,d){var x=new u(d);return x.render(h),x},u}();var Ji=function(){function u(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=ht.createElement("input",je.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return u.prototype.render=function(h,d){this.zoomElementContainer.style.display=d?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",h.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var x=he.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(x),this.rangeText.style.marginRight="10px";var p=this;this.rangeInput.addEventListener("input",function(){return p.onValueChange()}),this.rangeInput.addEventListener("change",function(){return p.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},u.prototype.onValueChange=function(){var h=he.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(h),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},u.prototype.setValues=function(h,d,x,p){this.rangeInput.min=h.toString(),this.rangeInput.max=d.toString(),this.rangeInput.step=p.toString(),this.rangeInput.value=x.toString(),this.onValueChange()},u.prototype.show=function(){this.zoomElementContainer.style.display="block"},u.prototype.hide=function(){this.zoomElementContainer.style.display="none"},u.prototype.setOnCameraZoomValueChangeCallback=function(h){this.onChangeCallback=h},u.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},u.create=function(h,d){var x=new u;return x.render(h,d),x},u}();var Ct=function(u){return u[u.STATUS_DEFAULT=0]="STATUS_DEFAULT",u[u.STATUS_SUCCESS=1]="STATUS_SUCCESS",u[u.STATUS_WARNING=2]="STATUS_WARNING",u[u.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION",u}(Ct||{});function ss(u){return{fps:u.fps,qrbox:u.qrbox,aspectRatio:u.aspectRatio,disableFlip:u.disableFlip,videoConstraints:u.videoConstraints}}function as(u,h){return{formatsToSupport:u.formatsToSupport,useBarCodeDetectorIfSupported:u.useBarCodeDetectorIfSupported,experimentalFeatures:u.experimentalFeatures,verbose:h}}var cs=function(){function u(h,d,x){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=h,this.config=this.createConfig(d),this.verbose=x===!0,!document.getElementById(h))throw"HTML Element with id=".concat(h," not found");this.scanTypeSelector=new Lt(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Jn(this.verbose),this.persistedDataManager=new Gi,d.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return u.prototype.render=function(h,d){var x=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(g,y){if(h)h(g,y);else{if(x.lastMatchFound===g)return;x.lastMatchFound=g,x.setHeaderMessage(he.lastMatch(g),Ct.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(g,y){d&&d(g,y)};var p=document.getElementById(this.elementId);if(!p)throw"HTML Element with id=".concat(this.elementId," not found");p.innerHTML="",this.createBasicLayout(p),this.html5Qrcode=new un(this.getScanRegionId(),as(this.config,this.verbose))},u.prototype.pause=function(h){(pt(h)||h!==!0)&&(h=!1),this.getHtml5QrcodeOrFail().pause(h)},u.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},u.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},u.prototype.clear=function(){var h=this,d=function(){var x=document.getElementById(h.elementId);x&&(x.innerHTML="",h.resetBasicLayout(x))};return this.html5Qrcode?new Promise(function(x,p){if(!h.html5Qrcode){x();return}h.html5Qrcode.isScanning?h.html5Qrcode.stop().then(function(g){if(!h.html5Qrcode){x();return}h.html5Qrcode.clear(),d(),x()}).catch(function(g){h.verbose&&h.logger.logError("Unable to stop qrcode scanner",g),p(g)}):(h.html5Qrcode.clear(),d(),x())}):Promise.resolve()},u.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},u.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},u.prototype.applyVideoConstraints=function(h){return this.getHtml5QrcodeOrFail().applyVideoConstraints(h)},u.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},u.prototype.createConfig=function(h){return h?(h.fps||(h.fps=ut.SCAN_DEFAULT_FPS),h.rememberLastUsedCamera!==!ut.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(h.rememberLastUsedCamera=ut.DEFAULT_REMEMBER_LAST_CAMERA_USED),h.supportedScanTypes||(h.supportedScanTypes=ut.DEFAULT_SUPPORTED_SCAN_TYPE),h):{fps:ut.SCAN_DEFAULT_FPS,rememberLastUsedCamera:ut.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:ut.DEFAULT_SUPPORTED_SCAN_TYPE}},u.prototype.createBasicLayout=function(h){h.style.position="relative",h.style.padding="0px",h.style.border="1px solid silver",this.createHeader(h);var d=document.createElement("div"),x=this.getScanRegionId();d.id=x,d.style.width="100%",d.style.minHeight="100px",d.style.textAlign="center",h.appendChild(d),Lt.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var p=document.createElement("div"),g=this.getDashboardId();p.id=g,p.style.width="100%",h.appendChild(p),this.setupInitialDashboard(p)},u.prototype.resetBasicLayout=function(h){h.style.border="none"},u.prototype.setupInitialDashboard=function(h){this.createSection(h),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},u.prototype.createHeader=function(h){var d=document.createElement("div");d.style.textAlign="left",d.style.margin="0px",h.appendChild(d);var x=new Xi;x.renderInto(d);var p=document.createElement("div");p.id=this.getHeaderMessageContainerId(),p.style.display="none",p.style.textAlign="center",p.style.fontSize="14px",p.style.padding="2px 10px",p.style.margin="4px",p.style.borderTop="1px solid #f6f6f6",d.appendChild(p)},u.prototype.createSection=function(h){var d=document.createElement("div");d.id=this.getDashboardSectionId(),d.style.width="100%",d.style.padding="10px 0px 10px 0px",d.style.textAlign="left",h.appendChild(d)},u.prototype.createCameraListUi=function(h,d,x){var p=this;p.showHideScanTypeSwapLink(!1),p.setHeaderMessage(he.cameraPermissionRequesting());var g=function(){x||p.createPermissionButton(h,d)};un.getCameras().then(function(y){p.persistedDataManager.setHasPermission(!0),p.showHideScanTypeSwapLink(!0),p.resetHeaderMessage(),y&&y.length>0?(h.removeChild(d),p.renderCameraSelection(y)):(p.setHeaderMessage(he.noCameraFound(),Ct.STATUS_WARNING),g())}).catch(function(y){p.persistedDataManager.setHasPermission(!1),x?x.disabled=!1:g(),p.setHeaderMessage(y,Ct.STATUS_WARNING),p.showHideScanTypeSwapLink(!0)})},u.prototype.createPermissionButton=function(h,d){var x=this,p=ht.createElement("button",this.getCameraPermissionButtonId());p.innerText=he.cameraPermissionTitle(),p.addEventListener("click",function(){p.disabled=!0,x.createCameraListUi(h,d,p)}),d.appendChild(p)},u.prototype.createPermissionsUi=function(h,d){var x=this;if(Lt.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){vr.hasPermissions().then(function(p){p?x.createCameraListUi(h,d):(x.persistedDataManager.setHasPermission(!1),x.createPermissionButton(h,d))}).catch(function(p){x.persistedDataManager.setHasPermission(!1),x.createPermissionButton(h,d)});return}this.createPermissionButton(h,d)},u.prototype.createSectionControlPanel=function(){var h=document.getElementById(this.getDashboardSectionId()),d=document.createElement("div");h.appendChild(d);var x=document.createElement("div");x.id=this.getDashboardSectionCameraScanRegionId(),x.style.display=Lt.isCameraScanType(this.currentScanType)?"block":"none",d.appendChild(x);var p=document.createElement("div");p.style.textAlign="center",x.appendChild(p),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(x,p),this.renderFileScanUi(d)},u.prototype.renderFileScanUi=function(h){var d=Lt.isFileScanType(this.currentScanType),x=this,p=function(g){if(!x.html5Qrcode)throw"html5Qrcode not defined";Lt.isFileScanType(x.currentScanType)&&(x.setHeaderMessage(he.loadingImage()),x.html5Qrcode.scanFileV2(g,!0).then(function(y){x.resetHeaderMessage(),x.qrCodeSuccessCallback(y.decodedText,y)}).catch(function(y){x.setHeaderMessage(y,Ct.STATUS_WARNING),x.qrCodeErrorCallback(y,Kn.createFrom(y))}))};this.fileSelectionUi=qi.create(h,d,p)},u.prototype.renderCameraSelection=function(h){var d=this,x=this,p=document.getElementById(this.getDashboardSectionCameraScanRegionId());p.style.textAlign="center";var g=Ji.create(p,!1),y=function(Oe){var ne=Oe.zoomFeature();if(ne.isSupported()){g.setOnCameraZoomValueChangeCallback(function(le){ne.apply(le)});var W=1;d.config.defaultZoomValueIfSupported&&(W=d.config.defaultZoomValueIfSupported),W=_i(W,ne.min(),ne.max()),g.setValues(ne.min(),ne.max(),W,ne.step()),g.show()}},T=Ki.create(p,h),N=document.createElement("span"),C=ht.createElement("button",je.CAMERA_START_BUTTON_ID);C.innerText=he.scanButtonStartScanningText(),N.appendChild(C);var D=ht.createElement("button",je.CAMERA_STOP_BUTTON_ID);D.innerText=he.scanButtonStopScanningText(),D.style.display="none",D.disabled=!0,N.appendChild(D);var P,xe=function(Oe){if(!Oe.torchFeature().isSupported()){P&&P.hide();return}P?P.updateTorchCapability(Oe.torchFeature()):P=Qi.create(N,Oe.torchFeature(),{display:"none",marginLeft:"5px"},function(ne){x.setHeaderMessage(ne,Ct.STATUS_WARNING)}),P.show()};p.appendChild(N);var Q=function(Oe){Oe||(C.style.display="none"),C.innerText=he.scanButtonStartScanningText(),C.style.opacity="1",C.disabled=!1,Oe&&(C.style.display="inline-block")};if(C.addEventListener("click",function(Oe){C.innerText=he.scanButtonScanningStarting(),T.disable(),C.disabled=!0,C.style.opacity="0.5",d.scanTypeSelector.hasMoreThanOneScanType()&&x.showHideScanTypeSwapLink(!1),x.resetHeaderMessage();var ne=T.getValue();x.persistedDataManager.setLastUsedCameraId(ne),x.html5Qrcode.start(ne,ss(x.config),x.qrCodeSuccessCallback,x.qrCodeErrorCallback).then(function(W){D.disabled=!1,D.style.display="inline-block",Q(!1);var le=x.html5Qrcode.getRunningTrackCameraCapabilities();d.config.showTorchButtonIfSupported===!0&&xe(le),d.config.showZoomSliderIfSupported===!0&&y(le)}).catch(function(W){x.showHideScanTypeSwapLink(!0),T.enable(),Q(!0),x.setHeaderMessage(W,Ct.STATUS_WARNING)})}),T.hasSingleItem()&&C.click(),D.addEventListener("click",function(Oe){if(!x.html5Qrcode)throw"html5Qrcode not defined";D.disabled=!0,x.html5Qrcode.stop().then(function(ne){d.scanTypeSelector.hasMoreThanOneScanType()&&x.showHideScanTypeSwapLink(!0),T.enable(),C.disabled=!1,D.style.display="none",C.style.display="inline-block",P&&(P.reset(),P.hide()),g.removeOnCameraZoomValueChangeCallback(),g.hide(),x.insertCameraScanImageToScanRegion()}).catch(function(ne){D.disabled=!1,x.setHeaderMessage(ne,Ct.STATUS_WARNING)})}),x.persistedDataManager.getLastUsedCameraId()){var Fe=x.persistedDataManager.getLastUsedCameraId();T.hasValue(Fe)?(T.setValue(Fe),C.click()):x.persistedDataManager.resetLastUsedCameraId()}},u.prototype.createSectionSwap=function(){var h=this,d=he.textIfCameraScanSelected(),x=he.textIfFileScanSelected(),p=document.getElementById(this.getDashboardSectionId()),g=document.createElement("div");g.style.textAlign="center";var y=ht.createElement("span",this.getDashboardSectionSwapLinkId());y.style.textDecoration="underline",y.style.cursor="pointer",y.innerText=Lt.isCameraScanType(this.currentScanType)?d:x,y.addEventListener("click",function(){if(!h.sectionSwapAllowed){h.verbose&&h.logger.logError("Section swap called when not allowed");return}h.resetHeaderMessage(),h.fileSelectionUi.resetValue(),h.sectionSwapAllowed=!1,Lt.isCameraScanType(h.currentScanType)?(h.clearScanRegion(),h.getCameraScanRegion().style.display="none",h.fileSelectionUi.show(),y.innerText=x,h.currentScanType=Nt.SCAN_TYPE_FILE,h.insertFileScanImageToScanRegion()):(h.clearScanRegion(),h.getCameraScanRegion().style.display="block",h.fileSelectionUi.hide(),y.innerText=d,h.currentScanType=Nt.SCAN_TYPE_CAMERA,h.insertCameraScanImageToScanRegion(),h.startCameraScanIfPermissionExistsOnSwap()),h.sectionSwapAllowed=!0}),g.appendChild(y),p.appendChild(g)},u.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var h=this,d=this;if(this.persistedDataManager.hasCameraPermissions()){vr.hasPermissions().then(function(x){if(x){var p=document.getElementById(d.getCameraPermissionButtonId());if(!p)throw h.logger.logError("Permission button not found, fail;"),"Permission button not found";p.click()}else d.persistedDataManager.setHasPermission(!1)}).catch(function(x){d.persistedDataManager.setHasPermission(!1)});return}},u.prototype.resetHeaderMessage=function(){var h=document.getElementById(this.getHeaderMessageContainerId());h.style.display="none"},u.prototype.setHeaderMessage=function(h,d){d||(d=Ct.STATUS_DEFAULT);var x=this.getHeaderMessageDiv();switch(x.innerText=h,x.style.display="block",d){case Ct.STATUS_SUCCESS:x.style.background="rgba(106, 175, 80, 0.26)",x.style.color="#477735";break;case Ct.STATUS_WARNING:x.style.background="rgba(203, 36, 49, 0.14)",x.style.color="#cb2431";break;case Ct.STATUS_DEFAULT:default:x.style.background="rgba(0, 0, 0, 0)",x.style.color="rgb(17, 17, 17)";break}},u.prototype.showHideScanTypeSwapLink=function(h){this.scanTypeSelector.hasMoreThanOneScanType()&&(h!==!0&&(h=!1),this.sectionSwapAllowed=h,this.getDashboardSectionSwapLink().style.display=h?"inline-block":"none")},u.prototype.insertCameraScanImageToScanRegion=function(){var h=this,d=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){d.innerHTML="<br>",d.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(x){d.innerHTML="<br>",d.appendChild(h.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=Vi,this.cameraScanImage.alt=he.cameraScanAltText()},u.prototype.insertFileScanImageToScanRegion=function(){var h=this,d=document.getElementById(this.getScanRegionId());if(this.fileScanImage){d.innerHTML="<br>",d.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(x){d.innerHTML="<br>",d.appendChild(h.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=Hi,this.fileScanImage.alt=he.fileScanAltText()},u.prototype.clearScanRegion=function(){var h=document.getElementById(this.getScanRegionId());h.innerHTML=""},u.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},u.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},u.prototype.getDashboardSectionSwapLinkId=function(){return je.SCAN_TYPE_CHANGE_ANCHOR_ID},u.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},u.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},u.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},u.prototype.getCameraPermissionButtonId=function(){return je.CAMERA_PERMISSION_BUTTON_ID},u.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},u.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},u.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},u}();function hs(u,h){if(u&1){let d=bt();qe(0),G(1,"button",5),Be("click",function(){tt(d);let p=Ne();return nt(p.start())}),dt(2,"i",6),J(),Ke()}}function fs(u,h){if(u&1){let d=bt();qe(0),G(1,"div",9)(2,"input",10),Be("input",function(p){tt(d);let g=Ne(2);return nt(g.torch(p))}),J(),G(3,"label",11),dt(4,"i",12),J()(),Ke()}}function ds(u,h){if(u&1){let d=bt();qe(0),ct(1,fs,5,0,"ng-container",4),G(2,"button",7),Be("click",function(){tt(d);let p=Ne();return nt(p.stop())}),dt(3,"i",8),J(),Ke()}if(u&2){let d=Ne();Z(),ae("ngIf",d.isTorchSupported())}}var gs=u=>({"m-3":u}),xs=u=>({"scan-vid":u}),$i=function(u){return u[u.std=1.333334]="std",u[u.wide=1.777778]="wide",u[u.square=1]="square",u}($i||{}),_n=(()=>{let h=class h{constructor(x){this.el=x,this.elementId="reader",this.onScan=!1,this.state=!1,this.lastScan="",this.scanned=new ai,this.getState=()=>this.state,this.scanning=()=>this.onScan}ngAfterViewInit(){this.qr=new un(this.elementId,{verbose:!1});let p=this.el.nativeElement.querySelector("#beep");p!=null&&(this.audio=p)}start(){return cn(this,null,function*(){let x={facingMode:"environment"};this.onScan=!0;try{return yield this.qr.start(x,{fps:10,aspectRatio:$i.square,disableFlip:!0,qrbox:{height:250,width:250}},(p,g)=>{this.lastScan!=p&&(this.audio.play(),this.lastScan=p,this.scanned.emit(p))},void 0),this.state=!0,!0}catch(p){return this.state=!1,this.onScan=!1,console.error(p),alert("Camera not found!"),!1}})}stop(){return cn(this,null,function*(){try{return yield this.qr.stop(),this.onScan=!1,this.state=!1,!0}catch(x){return this.state=!0,this.onScan=!0,console.error(x),!1}})}stopClicked(){this.el.nativeElement.querySelector("[title=stop]").dispatchEvent(new Event("click"))}isTorchSupported(){return"torch"in this.qr.getRunningTrackSettings()}torch(x){return cn(this,null,function*(){let p=x.target.checked,g={torch:p,advanced:[{torch:p}]};try{yield this.qr.applyVideoConstraints(g)}catch(y){console.error(y),x.target.checked=!p}})}};h.\u0275fac=function(p){return new(p||h)(ln(Gn))},h.\u0275cmp=zn({type:h,selectors:[["app-scanner"]],outputs:{scanned:"scanned"},standalone:!0,features:[Wn],decls:6,vars:9,consts:[["id","beep","src","https://www.soundjay.com/buttons/beep-07a.mp3"],[1,"d-flex","justify-content-center",3,"ngClass"],[3,"id","ngClass"],[1,"btn-scan"],[4,"ngIf"],["type","button","title","start",1,"btn","btn-lg","btn-primary","rounded-circle",3,"click"],[1,"bi","bi-upc-scan"],["type","button","title","stop",1,"btn","btn-lg","btn-danger","rounded-circle",3,"click"],[1,"bi","bi-stop-fill"],[1,"m-0"],["type","checkbox","name","torch","id","torch","title","torch","autocomplete","off",1,"btn-check",3,"input"],["for","torch",1,"btn","btn-lg","btn-warning","rounded-circle"],[1,"bi","bi-sun-fill"]],template:function(p,g){p&1&&(dt(0,"audio",0),G(1,"div",1),dt(2,"div",2),J(),G(3,"div",3),ct(4,hs,3,0,"ng-container",4)(5,ds,4,1,"ng-container",4),J()),p&2&&(Z(),ae("ngClass",lt(5,gs,g.scanning())),Z(),ae("id",g.elementId)("ngClass",lt(7,xs,g.scanning())),Z(2),ae("ngIf",!g.getState()),Z(),ae("ngIf",g.getState()))},dependencies:[Qn,Yn,Zn],styles:["html[_ngcontent-%COMP%]{overflow:hidden;max-width:100vw;max-height:100vh}body[_ngcontent-%COMP%]{width:-webkit-fill-available;height:-webkit-fill-available}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{font-family:system-ui}div[_ngcontent-%COMP%], span[_ngcontent-%COMP%], a[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{-webkit-user-select:none}.h-fill[_ngcontent-%COMP%]{height:-webkit-fill-available!important}.w-fill[_ngcontent-%COMP%]{width:-webkit-fill-available!important}[_ngcontent-%COMP%]::placeholder{font-style:italic}*[_ngcontent-%COMP%]:has( > input[_ngcontent-%COMP%]:focus)   label[_ngcontent-%COMP%]{font-weight:bolder}*[_ngcontent-%COMP%]:has( > label[_ngcontent-%COMP%],  > input[_ngcontent-%COMP%]:not(.form-control),  > select[_ngcontent-%COMP%]:not(.form-select)){margin-bottom:1rem;display:flex;flex-direction:column}*[_ngcontent-%COMP%]:has( > label[_ngcontent-%COMP%],  > input[_ngcontent-%COMP%]:not(.form-control),  > select[_ngcontent-%COMP%]:not(.form-select))   label[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:has( > label[_ngcontent-%COMP%],  > input[_ngcontent-%COMP%]:not(.form-control),  > select[_ngcontent-%COMP%]:not(.form-select))   input[_ngcontent-%COMP%]{transition:all .2s ease-in-out}*[_ngcontent-%COMP%]:has( > label[_ngcontent-%COMP%],  > input[_ngcontent-%COMP%]:not(.form-control),  > select[_ngcontent-%COMP%]:not(.form-select))   input[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:has( > label[_ngcontent-%COMP%],  > input[_ngcontent-%COMP%]:not(.form-control),  > select[_ngcontent-%COMP%]:not(.form-select))   select[_ngcontent-%COMP%]{flex:1 1 auto;padding:.5rem;border:0;border-bottom:1px solid silver;background-color:#fff;color:#000}*[_ngcontent-%COMP%]:has( > label[_ngcontent-%COMP%],  > input[_ngcontent-%COMP%]:not(.form-control),  > select[_ngcontent-%COMP%]:not(.form-select))   [_ngcontent-%COMP%]:focus{transition:all 1s ease;outline:1px solid silver;animation:_ngcontent-%COMP%_bg-blink 1.5s ease infinite}@keyframes _ngcontent-%COMP%_bg-blink{0%{outline-color:#0000}50%{outline-color:silver}to{outline-color:#0000}}button[_ngcontent-%COMP%]{padding:.5rem;cursor:pointer}.btn-secondary[_ngcontent-%COMP%]{background-color:#7a858d}*[_ngcontent-%COMP%]:has( > input[type=radio][_ngcontent-%COMP%],  > input[type=checkbox])[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}*[_ngcontent-%COMP%]:has( > input[type=radio][_ngcontent-%COMP%],  > input[type=checkbox])[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{background-color:#000;color:#fff}*[_ngcontent-%COMP%]:has( > input[type=radio][_ngcontent-%COMP%],  > input[type=checkbox])[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:-webkit-fill-available;padding:.5rem;text-align:center;cursor:pointer;-webkit-user-select:auto;border:1px solid silver;display:flex;justify-content:center;align-items:center}a[_ngcontent-%COMP%]{padding:.5rem;text-decoration:none;border-inline:1px solid gainsboro}a[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#dcdcdc}a[_ngcontent-%COMP%]:active, a.active[_ngcontent-%COMP%]{color:#fff;background-color:#000}.is-negative[_ngcontent-%COMP%]{color:#dc143c}.is-positive[_ngcontent-%COMP%]{color:green}div[_ngcontent-%COMP%]:has(.scan-vid){transition:all .5s ease}div[_ngcontent-%COMP%]:has(.scan-vid)   .scan-vid[_ngcontent-%COMP%]{background-color:#000;width:300px;height:300px}.btn-scan[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;width:-webkit-fill-available}.btn-scan[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:60px!important;height:60px!important}"]});let u=h;return u})();function ps(u,h){if(u&1){let d=bt();qe(0),G(1,"button",38),Be("click",function(){tt(d);let p=Ne();return nt(p.dataReset())}),G(2,"i",35),we(3," Reset"),J()(),Ke()}}function Cs(u,h){if(u&1&&(qe(0),G(1,"div")(2,"code"),we(3),J()(),G(4,"div"),we(5),J(),Ke()),u&2){let d=Ne().$implicit;Z(3),Tn(" # ",d.itemRef==null?null:d.itemRef.pack_code," ",d.itemRef==null?null:d.itemRef.pcs_code," "),Z(2),Xn(d.itemRef==null?null:d.itemRef.kategori)}}var Wt=u=>[u,"IDR","symbol","1.0","id-ID"];function ws(u,h){if(u&1&&(qe(0),we(1),Rt(2,"currency"),Ke()),u&2){let d=Ne().$implicit;Z(),li(" ",d.qty," ",d.unit," @",vt(2,3,lt(9,Wt,d.harga))," ")}}function As(u,h){if(u&1){let d=bt();G(0,"div",39),Be("click",function(){let g=tt(d).$implicit,y=Ne();return nt(y.getForm(g))}),G(1,"div"),dt(2,"img",40),J(),G(3,"div",41)(4,"div"),ct(5,Cs,6,3,"ng-container",1),G(6,"h3",20),we(7),J()(),G(8,"div",42)(9,"div"),ct(10,ws,3,11,"ng-container",1),J(),G(11,"div",43),we(12),Rt(13,"currency"),J()()()()}if(u&2){let d=h.$implicit,x=Ne();Z(2),Jt("src",d.itemRef==null?null:d.itemRef.img,jn),Jt("alt",d.nama),Z(3),ae("ngIf",x.form.mode==x.inputMode.item),Z(2),Xn(d.nama),Z(3),ae("ngIf",x.form.mode==x.inputMode.item),Z(2),Gt(" ",vt(13,6,lt(12,Wt,d.qty*d.harga))," ")}}function Es(u,h){u&1&&(qe(0),we(1," PAS! "),Ke())}function Is(u,h){u&1&&(qe(0),we(1," Kembalian "),Ke())}function ys(u,h){u&1&&(qe(0),we(1," Kekurangan "),Ke())}function Ss(u,h){u&1&&(qe(0),G(1,"div",44)(2,"i",45),we(3," -- Belum ada data -- "),J()(),Ke())}function bs(u,h){if(u&1&&(qe(0),we(1),Rt(2,"currency"),Ke()),u&2){let d=Ne().$implicit;Z(),Tn(" ",d.pack_unit,": ",vt(2,2,lt(8,Wt,d.pack_harga)),", ")}}function Ts(u,h){if(u&1&&(qe(0),we(1),Rt(2,"currency"),Ke()),u&2){let d=Ne().$implicit;Z(),Tn(" ",d.pcs_unit,": ",vt(2,2,lt(8,Wt,d.pcs_harga)),", ")}}function _s(u,h){if(u&1&&(qe(0),we(1),Rt(2,"currency"),Ke()),u&2){let d=Ne().$implicit;Z(),Tn(" ",d.sat_unit,": ",vt(2,2,lt(8,Wt,d.sat_harga)),", ")}}function Ms(u,h){if(u&1){let d=bt();G(0,"li",53),Be("click",function(){let g=tt(d).$implicit,y=Ne(2);return nt(y.itemSelected(g))}),G(1,"div")(2,"code")(3,"i"),we(4),J()(),G(5,"div")(6,"div",54),we(7),J(),G(8,"div",55)(9,"small"),ct(10,bs,3,10,"ng-container",1)(11,Ts,3,10,"ng-container",1)(12,_s,3,10,"ng-container",1),J()()()(),dt(13,"img",21),J()}if(u&2){let d=h.$implicit;Z(4),Gt(" ",d.kategori," "),Z(3),Gt(" ",d.nama," "),Z(3),ae("ngIf",d.pack_harga!=""),Z(),ae("ngIf",d.pcs_harga!=""),Z(),ae("ngIf",d.sat_harga!=""),Z(),Jt("alt",d.nama),ae("src",d.img,jn)("hidden",d.img=="")}}var Os=u=>({hide:u});function Ns(u,h){if(u&1){let d=bt();G(0,"div")(1,"app-scanner",46),Be("scanned",function(p){tt(d);let g=Ne();return nt(g.onScanned(p))}),J(),G(2,"label",47),we(3,"Nama Barang"),J(),G(4,"input",48),Be("ngModelChange",function(p){tt(d);let g=Ne();return nt(g.form.nama=p)})("focus",function(p){tt(d);let g=Ne();return nt(g.enterName(p))}),J(),G(5,"div",49)(6,"div",50)(7,"ul",51),Be("blur",function(){tt(d);let p=Ne();return nt(p.itemLi=!1)}),ct(8,Ms,14,8,"li",52),J()()()()}if(u&2){let d=Ne();Z(4),ae("ngModel",d.form.nama),Z(),ae("ngClass",lt(4,Os,!d.itemLi)),Z(3),ae("ngForOf",d.filterItems(d.form.nama))("ngForTrackBy",d.tracker)}}function Ds(u,h){if(u&1){let d=bt();G(0,"div")(1,"label",47),we(2,"Nama Barang"),J(),G(3,"input",56,57),Be("ngModelChange",function(p){tt(d);let g=Ne();return nt(g.form.nama=p)})("focus",function(){tt(d);let p=ci(4);return nt(p.select())}),J()()}if(u&2){let d=Ne();Z(3),ae("ngModel",d.form.nama)}}function Rs(u,h){if(u&1){let d=bt();qe(0),G(1,"input",58),Be("input",function(){let g=tt(d).$implicit,y=Ne();return nt(y.unitChanged(g))}),J(),G(2,"label",59),we(3),J(),Ke()}if(u&2){let d=h.$implicit;Z(),Jt("id",d.name),ae("value",d.unit),Z(),Jt("for",d.name),Z(),Gt(" ",d.unit," ")}}var vs=(u,h)=>({"is-negative":u,"is-positive":h}),Ls=u=>({"d-none":u}),hn=function(u){return u.item="Barang",u.manual="Manual",u}(hn||{}),r1=(()=>{let h=class h{constructor(x,p,g){this.app=x,this.el=p,this.scan=g,this.inputMode=hn,this.modal=!1,this.itemLi=!1,this.mode=hn.item,this.cash=null,this.items=[],this.data=[],this.fillTime=50,this.doc=this.el.nativeElement}ngOnInit(){return cn(this,null,function*(){this.items=this.app.items,this.app.itemLoaded.subscribe(()=>{this.items=this.app.items}),this.form=this.newForm()})}filterItems(x){let p=x.toLowerCase(),g=[];return g=this.items.filter(y=>y.pack_code?.includes(p)||y.pcs_code?.includes(p)||y.kategori.toLowerCase().includes(p)||y.nama.toLowerCase().includes(p)),g}itemSelected(x){this.form.itemRef=x,this.form.nama=x.nama,this.itemLi=!1,(this.form.qty==null||this.form.qty==0)&&(this.form.qty=1),setTimeout(()=>{this.fillUnits(x);let p=this.doc.querySelector("[name=qty]");p?.focus()},200)}fillUnits(x){let p=[{name:"pack",unit:"Pack",harga:0,isi:0},{name:"pcs",unit:"Pcs",harga:0,isi:0},{name:"sat",unit:"Ecer",harga:0,isi:0}];x!=null&&Object.values(p).map(T=>T.name).forEach((T,N)=>{let C="",D=0,P=0;T=="pack"?(C=x.pack_unit,D=Number(x.pack_harga),P=Number(x.pack_isi)):T=="pcs"?(C=x.pcs_unit,D=Number(x.pcs_harga),P=Number(x.pcs_isi)):T=="sat"&&(C=x.sat_unit,D=Number(x.sat_harga),P=0),p[N].unit=C,p[N].harga=D,p[N].isi=P}),p=p.filter(y=>y.harga!=0),this.formUnits=p;let g=p.find(y=>y.harga>0);return this.doc!=null&&g!=null&&(this.unitChanged(g),setTimeout(()=>{let y=this.doc.querySelector(`#${g.name}`);y!=null&&(y.checked=!0)},this.fillTime)),p}getFormUnit(x){let p=this.fillUnits(this.form.itemRef);setTimeout(()=>{let g=this.doc.querySelector(`.unit [value='${x}']`);if(g!=null){g.checked=!0;let y=p.find(T=>T.unit==x);y!=null&&this.unitChanged(y)}},this.fillTime+1)}unitChanged(x){this.form.harga=x.harga,this.form.unit=x.unit;let p=this.doc.querySelector("#harga");p!=null&&(p.placeholder=x.harga.toLocaleString("id-ID",{useGrouping:!0,currency:"IDR",style:"currency",maximumFractionDigits:0}),p.focus())}newForm(){return this.mode==hn.item?(this.formOri={mode:this.mode,nama:"",qty:null,harga:null},this.fillUnits()):this.formOri={mode:this.mode,nama:`Transaksi manual #${this.data.length+1}`,qty:1,harga:null},JSON.parse(JSON.stringify(this.formOri))}getForm(x){this.itemLi=!1,this.modal=!0,x==null?(this.form=this.newForm(),this.mode==hn.item?this.focusName("nama"):this.focusName("harga")):(this.mode=x.mode,this.formOri=x,this.form=JSON.parse(JSON.stringify(x)),this.getFormUnit(x.unit))}formSubmit(x){x.preventDefault();let p=JSON.parse(JSON.stringify(this.form)),g=this.data.findIndex(C=>C.nama==this.formOri.nama),y=this.form.nama,T=this.form.harga,N=this.filterItems(y);if(this.mode==hn.item){if(y!=""&&!isNaN(Number(y))){N.length==1&&this.itemSelected(N[0]);return}else if(y==""||y!=""&&N.length==0){this.formClose();return}}else if(T==null||T==0){this.formClose();return}if(g<0)return this.data.push(p),this.getForm();this.data[g]=p,this.formClose()}formReset(x){x.preventDefault(),this.getForm(this.formOri);let p=this.doc.querySelector("[name=harga]");p.placeholder="harga/jumlah"}formClose(){this.modal=!1,this.focusName("cash")}dataReset(){confirm("Hapus semua dan mulai baru?")&&(this.data=[])}onScanned(x){this.scan.stopClicked();let p=this.filterItems(x);if(p.length==0)return alert(`item not found: ${x}`);this.form.nama=p[0].nama,p.length==1&&this.itemSelected(p[0])}enterName(x){this.itemLi=!0,x.target.select()}focusName(x="nama"){setTimeout(()=>{this.doc.querySelector(`[name=${x}]`).focus()},50)}getTotal(){let x=0;return this.data.forEach(p=>{p.harga!=null&&p.qty!=null&&(x+=p.harga*p.qty)}),x}tracker(x,p){return p}};h.\u0275fac=function(p){return new(p||h)(ln(yi),ln(Gn),ln(_n))},h.\u0275cmp=zn({type:h,selectors:[["app-transaction"]],standalone:!0,features:[ui([{provide:_n}]),Wn],decls:74,vars:55,consts:[[1,"btn-group","d-block","text-center"],[4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"bi","bi-upc-scan"],[1,"bi","bi-pencil-fill"],[1,"data-container","position-absolute","overflow-auto","w-fill","h-fill"],[1,"container"],["class","grid d-flex gap-3 p-2 m-2 border-bottom",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex-total","sticky-bottom","w-fill","px-3","bg-body","border-top","border-black","border-3",3,"hidden"],[1,"d-flex","justify-content-between","my-3","fw-bolder"],[1,"border-bottom","border-black","mb-0","pb-2"],[1,"d-flex","justify-content-between","my-2","align-items-baseline","cash"],[1,"m-0"],["type","number","name","cash","step","500","placeholder","jumlah pembayaran",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-between","my-2","align-items-baseline","fw-bold","return",3,"ngClass"],[1,"overlay",3,"hidden","click"],[1,"modal-item",3,"hidden"],[1,"content"],[1,"input",3,"submit"],[1,"title"],[1,"mb-2"],["loading","lazy",3,"src","alt","hidden"],[3,"ngClass"],[1,"flex-2"],["for","qty"],["id","qty","name","qty","type","number","min","1","autocomplete","off","placeholder","banyak barang",3,"ngModel","ngModelChange"],[1,"unit"],[4,"ngFor","ngForOf","ngForTrackBy"],["for","harga"],["id","harga","name","harga","type","number","step","500","min","0","autocomplete","off","placeholder","harga/unit",3,"ngModel","ngModelChange"],[1,"jumlah"],["for","jumlah"],["id","jumlah"],[1,"btn-group","w-fill","my-3","py-3"],["type","button","tabindex","-1","title","reset",1,"btn","btn-secondary",3,"click"],[1,"bi","bi-arrow-counterclockwise"],["type","submit","tabindex","-1","title","update",1,"btn","btn-success"],[1,"bi","bi-floppy-fill"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"grid","d-flex","gap-3","p-2","m-2","border-bottom",3,"click"],["loading","lazy",3,"src","alt"],[1,"w-fill"],[1,"d-flex","justify-content-between"],[1,"fw-bolder"],[1,"d-flex","justify-content-center","align-items-center","h-fill","w-fill","position-absolute"],[1,"font-monospace","text-secondary"],[3,"scanned"],["for","nama"],["id","nama","name","nama","type","search","autocomplete","off","placeholder","nama barang/barcode",3,"ngModel","ngModelChange","focus"],[1,"item-container",3,"ngClass"],[1,"item-group"],[3,"blur"],[3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[3,"click"],[1,"item-title"],[1,"item-price"],["id","nama","name","nama","type","search","autocomplete","off","placeholder","keterangan transaksi",3,"ngModel","ngModelChange","focus"],["nama",""],["name","unit","type","radio",3,"id","value","input"],[3,"for"]],template:function(p,g){p&1&&(G(0,"div",0),ct(1,ps,4,0,"ng-container",1),G(2,"button",2),Be("click",function(){return g.mode=g.inputMode.item,g.getForm()}),G(3,"i",3),we(4," Barang"),J()(),G(5,"button",2),Be("click",function(){return g.mode=g.inputMode.manual,g.getForm()}),G(6,"i",4),we(7," Manual"),J()()(),G(8,"div",5)(9,"div",6),ct(10,As,14,14,"div",7),J(),G(11,"div",8)(12,"div",9)(13,"div"),we(14,"Total Belanja"),J(),G(15,"div")(16,"div",10),we(17),Rt(18,"currency"),J()()(),G(19,"div",11)(20,"div"),we(21,"Cash"),J(),G(22,"div",12)(23,"input",13),Be("ngModelChange",function(T){return g.cash=T}),J()()(),G(24,"div",14)(25,"div"),ct(26,Es,2,0,"ng-container",1)(27,Is,2,0,"ng-container",1)(28,ys,2,0,"ng-container",1),J(),G(29,"div")(30,"div"),we(31),Rt(32,"currency"),J()()()()(),ct(33,Ss,4,0,"ng-container",1),G(34,"div",15),Be("click",function(){return g.formClose()}),J(),G(35,"div",16)(36,"div",17)(37,"form",18),Be("submit",function(T){return g.formSubmit(T)}),G(38,"div")(39,"div",19)(40,"h2",20),we(41,"Formulir Penjualan"),J(),G(42,"small"),we(43),J()()(),G(44,"div")(45,"div"),dt(46,"img",21),J(),ct(47,Ns,9,6,"div",1)(48,Ds,5,1,"div",1),G(49,"div",22)(50,"div",23)(51,"div")(52,"label",24),we(53,"Qty"),J(),G(54,"input",25),Be("ngModelChange",function(T){return g.form.qty=T}),J()(),G(55,"div",26),ct(56,Rs,4,4,"ng-container",27),J()(),G(57,"div",23)(58,"div")(59,"label",28),we(60,"Harga"),J(),G(61,"input",29),Be("ngModelChange",function(T){return g.form.harga=T}),J()(),G(62,"div",30)(63,"label",31),we(64,"Jumlah"),J(),G(65,"output",32),we(66),Rt(67,"currency"),J()()(),dt(68,"br"),G(69,"div",33)(70,"button",34),Be("click",function(T){return g.formReset(T)}),dt(71,"i",35),J(),G(72,"button",36),dt(73,"i",37),J()()()()()()()),p&2&&(Z(),ae("ngIf",g.data.length>0),Z(9),ae("ngForOf",g.data)("ngForTrackBy",g.tracker),Z(),ae("hidden",g.data.length==0),Z(6),Gt(" ",vt(18,26,lt(44,Wt,g.getTotal()))," "),Z(6),ae("ngModel",g.cash),Z(),ae("ngClass",hi(46,vs,g.cash-g.getTotal()<0,g.cash-g.getTotal()>0)),Z(2),ae("ngIf",g.cash-g.getTotal()==0),Z(),ae("ngIf",g.cash-g.getTotal()>0),Z(),ae("ngIf",g.cash-g.getTotal()<0),Z(3),Xn(vt(32,32,lt(49,Wt,g.cash-g.getTotal()))),Z(2),ae("ngIf",g.data.length==0),Z(),ae("hidden",!g.modal),Z(),ae("hidden",!g.modal),Z(8),Gt(" Mode: ",g.mode," "),Z(3),Jt("alt",g.form.nama),ae("src",g.form.itemRef==null?null:g.form.itemRef.img,jn)("hidden",(g.form.itemRef==null?null:g.form.itemRef.img)==null||(g.form.itemRef==null?null:g.form.itemRef.img)==""),Z(),ae("ngIf",g.mode==g.inputMode.item),Z(),ae("ngIf",g.mode==g.inputMode.manual),Z(),ae("ngClass",lt(51,Ls,g.mode==g.inputMode.item&&(g.itemLi||g.form.nama==""))),Z(5),ae("ngModel",g.form.qty),Z(2),ae("ngForOf",g.formUnits)("ngForTrackBy",g.tracker),Z(5),ae("ngModel",g.form.harga),Z(5),Gt(" ",vt(67,38,lt(53,Wt,g.form.harga*g.form.qty))," "))},dependencies:[Qn,Yn,fi,Zn,di,Ii,wi,gi,Ai,xi,mi,Ei,Ci,pi,_n],styles:["html[_ngcontent-%COMP%]{overflow:hidden;max-width:100vw;max-height:100vh}body[_ngcontent-%COMP%]{width:-webkit-fill-available;height:-webkit-fill-available}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{font-family:system-ui}div[_ngcontent-%COMP%], span[_ngcontent-%COMP%], a[_ngcontent-%COMP%], button[_ngcontent-%COMP%]{-webkit-user-select:none}.h-fill[_ngcontent-%COMP%]{height:-webkit-fill-available!important}.w-fill[_ngcontent-%COMP%]{width:-webkit-fill-available!important}[_ngcontent-%COMP%]::placeholder{font-style:italic}*[_ngcontent-%COMP%]:has( > input[_ngcontent-%COMP%]:focus)   label[_ngcontent-%COMP%]{font-weight:bolder}*[_ngcontent-%COMP%]:has( > label[_ngcontent-%COMP%],  > input[_ngcontent-%COMP%]:not(.form-control),  > select[_ngcontent-%COMP%]:not(.form-select)){margin-bottom:1rem;display:flex;flex-direction:column}*[_ngcontent-%COMP%]:has( > label[_ngcontent-%COMP%],  > input[_ngcontent-%COMP%]:not(.form-control),  > select[_ngcontent-%COMP%]:not(.form-select))   label[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:has( > label[_ngcontent-%COMP%],  > input[_ngcontent-%COMP%]:not(.form-control),  > select[_ngcontent-%COMP%]:not(.form-select))   input[_ngcontent-%COMP%]{transition:all .2s ease-in-out}*[_ngcontent-%COMP%]:has( > label[_ngcontent-%COMP%],  > input[_ngcontent-%COMP%]:not(.form-control),  > select[_ngcontent-%COMP%]:not(.form-select))   input[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:has( > label[_ngcontent-%COMP%],  > input[_ngcontent-%COMP%]:not(.form-control),  > select[_ngcontent-%COMP%]:not(.form-select))   select[_ngcontent-%COMP%]{flex:1 1 auto;padding:.5rem;border:0;border-bottom:1px solid silver;background-color:#fff;color:#000}*[_ngcontent-%COMP%]:has( > label[_ngcontent-%COMP%],  > input[_ngcontent-%COMP%]:not(.form-control),  > select[_ngcontent-%COMP%]:not(.form-select))   [_ngcontent-%COMP%]:focus{transition:all 1s ease;outline:1px solid silver;animation:_ngcontent-%COMP%_bg-blink 1.5s ease infinite}@keyframes _ngcontent-%COMP%_bg-blink{0%{outline-color:#0000}50%{outline-color:silver}to{outline-color:#0000}}button[_ngcontent-%COMP%]{padding:.5rem;cursor:pointer}.btn-secondary[_ngcontent-%COMP%]{background-color:#7a858d}*[_ngcontent-%COMP%]:has( > input[type=radio][_ngcontent-%COMP%],  > input[type=checkbox])[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}*[_ngcontent-%COMP%]:has( > input[type=radio][_ngcontent-%COMP%],  > input[type=checkbox])[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{background-color:#000;color:#fff}*[_ngcontent-%COMP%]:has( > input[type=radio][_ngcontent-%COMP%],  > input[type=checkbox])[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:-webkit-fill-available;padding:.5rem;text-align:center;cursor:pointer;-webkit-user-select:auto;border:1px solid silver;display:flex;justify-content:center;align-items:center}a[_ngcontent-%COMP%]{padding:.5rem;text-decoration:none;border-inline:1px solid gainsboro}a[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#dcdcdc}a[_ngcontent-%COMP%]:active, a.active[_ngcontent-%COMP%]{color:#fff;background-color:#000}.is-negative[_ngcontent-%COMP%]{color:#dc143c}.is-positive[_ngcontent-%COMP%]{color:green}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%]{margin:0}.d-none[_ngcontent-%COMP%]{display:none}.hide[_ngcontent-%COMP%]{transition:opacity 1s ease;opacity:0;z-index:-1}.data-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#dcdcdc80}.data-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]:nth-last-child(2){border-bottom:none}.data-container[_ngcontent-%COMP%]   .grid[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{min-width:100px;min-height:100px;max-width:100px;max-height:100px;border-radius:.5rem;border:1px solid silver}.data-container[_ngcontent-%COMP%]   .flex-total[_ngcontent-%COMP%]   .cash[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:has( > input)[_ngcontent-%COMP%], .data-container[_ngcontent-%COMP%]   .flex-total[_ngcontent-%COMP%]   .return[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:has( > input)[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;justify-self:flex-end}.data-container[_ngcontent-%COMP%]   .flex-total[_ngcontent-%COMP%]   .cash[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .data-container[_ngcontent-%COMP%]   .flex-total[_ngcontent-%COMP%]   .return[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-align:end;background-color:#faebd7}.data-container[_ngcontent-%COMP%]   .flex-total[_ngcontent-%COMP%]   .return[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(2)   *[_ngcontent-%COMP%]{border-top:1px solid;border-bottom:3px double;width:-moz-fit-content;width:fit-content}.modal-item[_ngcontent-%COMP%], .overlay[_ngcontent-%COMP%], .modal-item.content[_ngcontent-%COMP%]{position:absolute;width:-webkit-fill-available;height:-webkit-fill-available;top:0;left:0}.overlay[_ngcontent-%COMP%]{z-index:1021;background-color:#00000080}.modal-item[_ngcontent-%COMP%]{overflow:hidden}.modal-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1.5rem}.modal-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{z-index:1022;position:absolute;background-color:#fff;border:1px solid silver;border-radius:.5rem;max-width:80vw;max-height:80vh;padding:1rem}.modal-item[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:has( > .title)[_ngcontent-%COMP%]{display:flex;justify-content:center}.modal-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-bottom:.5rem;margin-bottom:.5rem;border-bottom:3px solid black;display:flex;align-items:center;flex-direction:column;padding-inline:1rem}.modal-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{width:500px}.modal-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:has( > img)[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:.5rem}.modal-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:cover}.modal-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .flex-2[_ngcontent-%COMP%]{display:grid;grid-template-columns:150px auto;gap:.5rem}.modal-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .flex-2[_ngcontent-%COMP%]   .unit[_ngcontent-%COMP%]{display:flex;align-items:end;justify-content:center;flex-direction:row;z-index:1023}.modal-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .jumlah[_ngcontent-%COMP%]{font-weight:bolder;display:grid;align-content:space-between;padding-bottom:.5rem}.modal-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]{position:relative}.modal-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .item-group[_ngcontent-%COMP%]{width:-webkit-fill-available;max-height:300px;overflow:auto;background-color:#fff;padding:.5rem;border:1px solid silver;border-bottom-radius:.5rem;position:absolute}.modal-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .item-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;list-style-type:none;padding-inline-start:0}.modal-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .item-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding-block:.5rem;border-bottom:1px solid silver;display:flex;align-items:flex-start;justify-content:space-between;padding-inline:.5rem}.modal-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .item-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{color:gray}.modal-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .item-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover;width:50px;height:50px}.modal-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .item-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .item-price[_ngcontent-%COMP%]{color:gray}.modal-item[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]   .item-group[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{cursor:pointer;font-weight:bolder;background-color:#dcdcdc80}@media (min-width: 600px){.total[_ngcontent-%COMP%]{padding:.5rem;margin-bottom:0}.cash[_ngcontent-%COMP%], .return[_ngcontent-%COMP%]{padding:.5rem;padding-bottom:0;margin-inline:2rem}.return[_ngcontent-%COMP%]{display:flex;flex-direction:row}}@media screen and (max-width: 340px){.flex-2[_ngcontent-%COMP%]{display:flex!important;flex-direction:column;flex-wrap:nowrap}}"]});let u=h;return u})();export{r1 as TransactionComponent};
